import{L as _}from"./use-chrome-storage.ebf04b55.js";import{r as u}from"./index.828e458e.js";import{j as d,a as H,F as U}from"./jsx-runtime.cdbfd54c.js";function le(e){const t=u.exports.useRef(null);return u.exports.useEffect(()=>{t.current=new BroadcastChannel("mia-broadcast-channel"),t.current.onmessage=o=>{o.data&&(e==null||e(o.data))}},[]),o=>{if(t.current===null){_.error("Broadcast channel is not initialized");return}t.current.postMessage(o)}}function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},R.apply(this,arguments)}var z=["shift","alt","meta","mod","ctrl"],N={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function y(e){return(N[e]||e).trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function q(e){return z.includes(e)}function K(e,t){return t===void 0&&(t=","),e.split(t)}function B(e,t,n){t===void 0&&(t="+");var o=e.toLocaleLowerCase().split(t).map(function(l){return y(l)}),i={alt:o.includes("alt"),ctrl:o.includes("ctrl")||o.includes("control"),shift:o.includes("shift"),meta:o.includes("meta"),mod:o.includes("mod")},s=o.filter(function(l){return!z.includes(l)});return R({},i,{keys:s,description:n})}(function(){typeof document<"u"&&(document.addEventListener("keydown",function(e){e.key!==void 0&&W([y(e.key),y(e.code)])}),document.addEventListener("keyup",function(e){e.key!==void 0&&D([y(e.key),y(e.code)])})),typeof window<"u"&&window.addEventListener("blur",function(){h.clear()})})();var h=new Set;function S(e){return Array.isArray(e)}function T(e,t){t===void 0&&(t=",");var n=S(e)?e:e.split(t);return n.every(function(o){return h.has(o.trim().toLowerCase())})}function W(e){var t=Array.isArray(e)?e:[e];h.has("meta")&&h.forEach(function(n){return!q(n)&&h.delete(n.toLowerCase())}),t.forEach(function(n){return h.add(n.toLowerCase())})}function D(e){var t=Array.isArray(e)?e:[e];e==="meta"?h.clear():t.forEach(function(n){return h.delete(n.toLowerCase())})}function $(e,t,n){(typeof n=="function"&&n(e,t)||n===!0)&&e.preventDefault()}function G(e,t,n){return typeof n=="function"?n(e,t):n===!0||n===void 0}function J(e){return F(e,["input","textarea","select"])}function F(e,t){var n=e.target;t===void 0&&(t=!1);var o=n&&n.tagName;return S(t)?Boolean(o&&t&&t.some(function(i){return i.toLowerCase()===o.toLowerCase()})):Boolean(o&&t&&t===!0)}function Q(e,t){return e.length===0&&t?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):t?e.some(function(n){return t.includes(n)})||e.includes("*"):!0}var V=function(t,n,o){o===void 0&&(o=!1);var i=n.alt,s=n.meta,l=n.mod,v=n.shift,g=n.ctrl,c=n.keys,b=t.key,r=t.code,w=t.ctrlKey,C=t.metaKey,m=t.shiftKey,x=t.altKey,E=y(r),f=b.toLowerCase();if(!o){if(i===!x&&f!=="alt"||v===!m&&f!=="shift")return!1;if(l){if(!C&&!w)return!1}else if(s===!C&&f!=="meta"&&f!=="os"||g===!w&&f!=="ctrl"&&f!=="control")return!1}return c&&c.length===1&&(c.includes(f)||c.includes(E))?!0:c?T(c):!c},X=u.exports.createContext(void 0),Y=function(){return u.exports.useContext(X)};function M(e,t){return e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(e).length===Object.keys(t).length&&Object.keys(e).reduce(function(n,o){return n&&M(e[o],t[o])},!0):e===t}var Z=u.exports.createContext({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),ee=function(){return u.exports.useContext(Z)};function te(e){var t=u.exports.useRef(void 0);return M(t.current,e)||(t.current=e),t.current}var I=function(t){t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation()},ne=typeof window<"u"?u.exports.useLayoutEffect:u.exports.useEffect;function re(e,t,n,o){var i=u.exports.useRef(null),s=u.exports.useRef(!1),l=n instanceof Array?o instanceof Array?void 0:o:n,v=S(e)?e.join(l==null?void 0:l.splitKey):e,g=n instanceof Array?n:o instanceof Array?o:void 0,c=u.exports.useCallback(t,g!=null?g:[]),b=u.exports.useRef(c);g?b.current=c:b.current=t;var r=te(l),w=ee(),C=w.enabledScopes,m=Y();return ne(function(){if(!((r==null?void 0:r.enabled)===!1||!Q(C,r==null?void 0:r.scopes))){var x=function(a,A){var P;if(A===void 0&&(A=!1),!(J(a)&&!F(a,r==null?void 0:r.enableOnFormTags))&&!(r!=null&&r.ignoreEventWhen!=null&&r.ignoreEventWhen(a))){if(i.current!==null&&document.activeElement!==i.current&&!i.current.contains(document.activeElement)){I(a);return}(P=a.target)!=null&&P.isContentEditable&&!(r!=null&&r.enableOnContentEditable)||K(v,r==null?void 0:r.splitKey).forEach(function(O){var j,k=B(O,r==null?void 0:r.combinationKey);if(V(a,k,r==null?void 0:r.ignoreModifiers)||(j=k.keys)!=null&&j.includes("*")){if(A&&s.current)return;if($(a,k,r==null?void 0:r.preventDefault),!G(a,k,r==null?void 0:r.enabled)){I(a);return}b.current(a,k),A||(s.current=!0)}})}},E=function(a){a.key!==void 0&&(W(y(a.code)),((r==null?void 0:r.keydown)===void 0&&(r==null?void 0:r.keyup)!==!0||r!=null&&r.keydown)&&x(a))},f=function(a){a.key!==void 0&&(D(y(a.code)),s.current=!1,r!=null&&r.keyup&&x(a,!0))},L=i.current||(l==null?void 0:l.document)||document;return L.addEventListener("keyup",f),L.addEventListener("keydown",E),m&&K(v,r==null?void 0:r.splitKey).forEach(function(p){return m.addHotkey(B(p,r==null?void 0:r.combinationKey,r==null?void 0:r.description))}),function(){L.removeEventListener("keyup",f),L.removeEventListener("keydown",E),m&&K(v,r==null?void 0:r.splitKey).forEach(function(p){return m.removeHotkey(B(p,r==null?void 0:r.combinationKey,r==null?void 0:r.description))})}}},[v,r,C]),i}const oe="/assets/svg/imgClose.chunk.svg";function ie(e){return d("button",{style:{padding:"8px 12px",background:"rgb(16, 163, 127)",color:"white",borderRadius:5,border:"1px solid transparent",cursor:"pointer",fontSize:12,float:"right",alignSelf:"flex-end",...e.style},onClick:e.onClick,children:e.children})}function ce(e){var s;const t=u.exports.useRef(null),[n,o]=u.exports.useState(!0),i=(s=e.showFooterCloseButton)!=null?s:!0;return u.exports.useEffect(()=>{e.open&&t.current&&t.current.offsetHeight>=window.innerHeight&&o(!1)},[e.open]),re("esc",()=>{e.open&&e.onClose()}),e.open?H(U,{children:[d("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:999},onClick:e.onClose}),d("div",{style:{overflow:"auto",height:"100vh",position:"fixed",zIndex:1e3,top:0,left:0,right:0,bottom:0,color:"#444"},children:d("div",{style:{display:"flex",justifyContent:"center",alignItems:n?"center":"flex-start",height:n?"100%":"auto"},children:H("div",{ref:t,style:{boxSizing:"border-box",background:"white",padding:25,width:"100%",maxWidth:685,borderRadius:10,margin:"10px auto",display:"flex",flexDirection:"column"},children:[H("div",{children:[H("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.title&&d("h3",{style:{fontSize:18,fontWeight:"bold",marginBottom:20},children:e.title}),e.showHeaderCloseButton&&d("div",{style:{cursor:"pointer"},onClick:e.onClose,children:d("img",{style:{width:15,height:15},src:chrome.runtime.getURL(oe),alt:"close"})})]}),d("div",{children:e.children})]}),i&&d(ie,{style:{maxWidth:100,marginTop:30},onClick:e.onClose,children:"Close"})]})})})]}):null}function fe(e,t){const n=new FileReader,o=e.size/(1024*1024);n.onload=function(){const s=n.result.split(",")[1];t(s,o)},n.readAsDataURL(e)}function de(e){const t=atob(e),n=new Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);const o=new Uint8Array(n);return new Blob([o])}export{ce as W,re as a,ie as b,oe as c,de as d,fe as e,le as u};
