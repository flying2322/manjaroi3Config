function NRQuickStart(){let e=this;if(e.capsule=null,e.shadow=null,e.container=null,e.dragHandle=null,e.isInit=!1,e.docType=docType,e.injectQuickStart=function(){if(!e.isInit)try{return new Promise((r=>{fetch(chrome.runtime.getURL("injected/nr-ext-quick-start/nr-ext-quick-start.html")).then((e=>e.text())).then((async r=>{await async function(t){try{e.capsule=document.createElement("DIV"),e.capsule.id="nr-ext-quick-start-capsule",e.capsule.style.width=0,e.capsule.style.height=0,e.capsule.style.left=0,e.capsule.style.bottom=0,e.capsule.style.display="none",e.shadow=e.capsule.attachShadow({mode:"open"}),await async function(){try{await a(null,"injected/nr-ext-quick-start/nr-ext-quick-start.css")}catch(e){}}();const n=document.createElement("DIV");n.innerHTML=t;const c=[];for(;n.children.length>0;)c.push(n.children[0]),e.shadow.appendChild(n.children[0]);document.body.appendChild(e.capsule)}catch(e){}}(r),await async function(){try{await a(null,chrome.runtime.getURL("injected/nr-ext-reading-bar/nr-ext-reading-bar.css")),e.container=e.shadow.getElementById("nr-ext-quick-bar");e.shadow.getElementById("nr-ext-quick-backdrop");const r=e.shadow.getElementById("nr-ext-quick-max"),s=e.shadow.getElementById("nr-ext-quick-exit"),l=e.shadow.getElementById("nr-ext-quick-play"),o=e.shadow.getElementById("nr-ext-quick-bar");e.dragHandle=e.shadow.getElementById("nr-ext-quick-drag"),chrome.runtime.sendMessage({fn:"getReadingBarSettings"},(function(t){let n=t.theme;"system"===n&&(n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),"light"==n?(e.dragHandle.querySelector("#ext-icon-drag").style.fill="#67686b",e.dragHandle.querySelector("#ext-icon-drag").style.color="#67686b"):(e.dragHandle.querySelector("#ext-icon-drag").style.fill="#e0e6ef",e.dragHandle.querySelector("#ext-icon-drag").style.color="#e0e6ef"),e.shadow.getElementById("nr-ext-quick-start").setAttribute("ext-theme",n)}));const d={constrain:!1,handle:e.dragHandle,onMouseDown:t,onMouseUp:n,customMove:c};displace(e.container,d),e.container.style.position="fixed",l.onclick=()=>{chrome.runtime.sendMessage({message:"injectReadingBarAndRead"})},r.onclick=()=>{chrome.runtime.sendMessage({message:"injectReadingBar",docType:utils.docType})};const u=e.shadow.getElementById("nr-ext-qcuik-start-exit-options");s.onclick=()=>{o.style.display="none",e.capsule.style.width="100%",e.capsule.style.height="100%",e.capsule.style.top=0,e.capsule.style.right=0,u.style.display="flex"};e.shadow.getElementById("nr-ext-quick-exit-cancel").onclick=()=>{o.style.display="flex",e.capsule.style.width="70px",e.capsule.style.height="186px",e.capsule.style.top="70px",e.capsule.style.right="34px",u.style.display="none"};e.shadow.getElementById("nr-ext-quick-start-exit-confirm").onclick=()=>{const t=$('input[name="quick-start-exit-options"]:checked',e.shadow).val();"exit-once"===t?i():"exit-page"===t?(i(),chrome.runtime.sendMessage({fn:"addQuickStartBlackList"},(()=>{chrome.runtime.lastError}))):"exit-forever"===t&&(i(),chrome.runtime.sendMessage({fn:"setReadingBarSetting",key:"isQuickStartWebpage",value:!1},(()=>{chrome.runtime.lastError})),chrome.runtime.sendMessage({fn:"setReadingBarSetting",key:"isQuickStartGoogleDocs",value:!1},(()=>{chrome.runtime.lastError})))}}catch(e){}}()})).catch((e=>{})),r()}))}catch(e){}},displace=window.displacejs,e.getHasQuickStart=function(t,n,c){c(e.isInit)},e.asyncFunctions=["getHasQuickStart"],e.showTimer=null,e.hideTimer=null,"complete"===document.readyState){if("undefined"!=typeof readingBar)return void(nrQuickStart=null);e.injectQuickStart()}else document.onreadystatechange=function(){if("complete"===document.readyState){if("undefined"!=typeof readingBar)return void(nrQuickStart=null);e.injectQuickStart()}};function t(){document.body.style.pointerEvents="none"}function n(){document.body.style.pointerEvents="unset"}function c(e,t,n){try{const c=window.innerHeight,a=window.innerWidth;let i=e.getBoundingClientRect(),r=i.right-i.left,s=i.bottom-i.top;e.style.right=t>=0&&t+r<=a?a-(t+r)+"px":t<0?a-r+"px":"0px",e.style.top=n>=0&&n+s<=c?n+"px":n<0?"0px":c-s+"px"}catch(e){}}function a(t,n){return new Promise(((c,a)=>{let i;if(!t){let e=n.match(/\.([^.]+)$/);e&&(t=e[1])}t||(t="js");const r="nr-ext-"+n;n=chrome.runtime.getURL(n),"css"===t?(i=document.createElement("link"),i.id=r,i.type="text/css",i.rel="stylesheet",i.href=n,i.onload=()=>{n.includes("nr-ext-quick-start.css")&&(e.capsule.style.display="block")},e.shadow.appendChild(i),c()):"js"===t?(i=document.createElement("script"),i.id=r,fetch(n).then((e=>e.text())).then((t=>{i.textContent=t,e.shadow.appendChild(i),c()})).catch((e=>{c()}))):c()})).catch((e=>{}))}function i(){document.getElementById("nr-ext-quick-start-capsule").remove()}}var nrQuickStart=nrQuickStart||new NRQuickStart;