function AlertHandler(){let e=this;function t(t,n={}){return new Promise((a=>{if(t.message&&(t=t.message),"ERR_NOT_READABLE"===t||"ERR_NO_TEXT"===t)"selection-context-menu"===reader.readOption||e.pwTabId||(extension.showOnboard?chrome.tabs.create({url:"https://help.naturalreaders.com/en/articles/6093937-chrome-extension-reading-webpages"},(async t=>{e.pwTabId=t.id,chrome.tabs.onUpdated.addListener((function e(t,r){if("complete"===r.status)return chrome.tabs.onUpdated.removeListener(e),extension.actionOnClicked()}))})):chrome.tabs.create({url:"https://www.naturalreaders.com/online/"},(async t=>{e.pwTabId=t.id})));else if("ERR_INVALID_PAGE"===t)r("alert-invalid-page");else if("ERR_TTS_LIMIT"===t||1005==t){let e=readingBar.settings.voiceType,t=readingBar.settings.userInfo.pwLicNum,n=readingBar.settings.userInfo.pwLicType;"prem"===e?r("alert-prem-tts-limit"):r("alert-plus-tts-limit",{tabId:extension.beingReadTabId,license:t,licType:n})}else"ERR_NO_TABID"===t||("ERR_NO_FREE_VOICES"===t?r("alert-no-free-voices"):"UPGRADE_DIALOG"===t?r("alert-upgrade",n):r("UPGRADE_UNSUPPORTED_DIALOG"===t?"alert-upgrade-unsupported":"ERR_GOOGLE_DRIVE_PREVIEW"===t?"alert-google-drive-preview":"ERR_DOCS_NO_ANNOTATED"===t?"alert-google-docs-no-annotated":"alert-generic"));a()})).catch((e=>{}))}function r(e="generic",t=null){return scriptInjector.executeScriptsForAlert(extension.activeTabId,extension.activeTab.docType).then((()=>{chrome.tabs.sendMessage(extension.activeTabId,{fn:"showAlert",alertType:e,data:t},(()=>{chrome.runtime.lastError}))}))}e.windowId=null,e.tabId=null,e.displayAlertMessage=t,e.closeAlertWindow=function(e,t,r){chrome.windows.remove(e.windowId,(()=>{chrome.runtime.lastError}))},e.showAlert=r,e.pwTabId=null,chrome.runtime.onMessage.addListener((function(n,a,s){return"displayAlertMessage"===n.fn?t(n.message):"showAlert"===n.message?r():void(e[n.fn]&&e[n.fn](n,a,s))}))}const alertHandler=new AlertHandler;