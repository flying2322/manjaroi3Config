function Pdf(){let e=this;function t(){return utils.getActiveTab().then((e=>{let t=function(e){let t={origin:"no origin",href:"no href"};if(e.url){let r=new URL(e.url);t={origin:r.origin,href:r.href}}return t}(e);return e&&e.url&&e.url.match(/\.pdf$/)?e.url.match(/file(.)+.pdf$/)?Promise.resolve({pdf:!0,type:"local",tabId:e.id,urlInfo:t}):Promise.resolve({pdf:!0,type:"online",tabId:e.id,urlInfo:t}):Promise.resolve({pdf:!1,urlInfo:t})}))}e.checkPDF=function(){return t().then((e=>e.pdf?Promise.resolve({isPdf:!0,tabId:e.tabId,urlInfo:e.urlInfo}):Promise.resolve({isPdf:!1,tabId:e.tabId,urlInfo:e.urlInfo})))},e.isOnlinePdf=function(){return t().then((e=>e.pdf&&"online"===e.type?Promise.resolve(!0):Promise.resolve(!1))).catch((e=>{}))},e.localInstructions='<p>Warning: We noticed you want to read a pdf, to read pdf\'s please upload the file <a class="pdf-instr" target="_blank" href="https://www.naturalreaders.com/online/?action=upload">here</a> </p>',e.downloadPdf=function(t,r,n){const o=t.url;return fetch(o).then((e=>{if(e.ok)return e.blob()})).then((t=>{chrome.tabs.create({url:"https://www.naturalreaders.com/online/?action=openRemotePdf&source=ext-remote-pdf"},(r=>{e.tabId=r.id,e.remotePdf=t;const n=o.split("/");e.pdfName=n[n.length-1]}))})).catch((e=>{}))},e.tabId=null,e.remotePdf=null,e.getRemotePdf=function(t){e.tabId&&e.remotePdf&&scriptInjector.executeScriptOnTab(e.tabId,["injected/nr-ext-pdf/nr-ext-remote-pdf.js"]).then((()=>{chrome.tabs.sendMessage(e.tabId,{fn:"sendRemotePdfToPW",url:e.remotePdf,pdfName:e.pdfName},(function(r){chrome.runtime.lastError,t(r),e.remotePdf=null,e.tabId=null}))})).catch((e=>{}))},e.setFile=function(t,r,n){const o=t.url;let d="ext-remote-pdf";t.source&&(d=t.source);chrome.tabs.create({url:"https://www.naturalreaders.com/online/?action=openRemotePdf&source="+d},(r=>{e.tabId=r.id,e.remotePdf=o,e.pdfName=t.fileName}))},e.pdfName="NR.pdf",chrome.runtime.onMessage.addListener((function(t,r,n){e[t.fn]&&e[t.fn](t,r,n)}))}const pdfDoc=new Pdf;