(window.webpackJsonp=window.webpackJsonp||[]).push([[27,4,5,6,28,32,34,36,40],[function(t,e,r){"use strict";r.d(e,"t",(function(){return a})),r.d(e,"j",(function(){return s})),r.d(e,"q",(function(){return c})),r.d(e,"s",(function(){return u})),r.d(e,"h",(function(){return l})),r.d(e,"i",(function(){return f})),r.d(e,"n",(function(){return d})),r.d(e,"k",(function(){return p})),r.d(e,"r",(function(){return h})),r.d(e,"e",(function(){return g})),r.d(e,"c",(function(){return m})),r.d(e,"y",(function(){return y})),r.d(e,"d",(function(){return v})),r.d(e,"l",(function(){return b})),r.d(e,"m",(function(){return w})),r.d(e,"o",(function(){return x})),r.d(e,"p",(function(){return S})),r.d(e,"v",(function(){return _})),r.d(e,"a",(function(){return k})),r.d(e,"x",(function(){return T})),r.d(e,"u",(function(){return j})),r.d(e,"w",(function(){return I})),r.d(e,"A",(function(){return O})),r.d(e,"z",(function(){return E})),r.d(e,"f",(function(){return L})),r.d(e,"b",(function(){return A})),r.d(e,"g",(function(){return R})),r.d(e,"H",(function(){return P})),r.d(e,"B",(function(){return M})),r.d(e,"F",(function(){return U})),r.d(e,"C",(function(){return B})),r.d(e,"G",(function(){return q})),r.d(e,"D",(function(){return F})),r.d(e,"E",(function(){return $}));r(21),r(62);var n,o=r(114),i=r.n(o);const a="object"!=typeof window,s=!1,c=!0,u=!1,l=!1,f=l,d=!1,p=!0,h=!1,g="basic",m="edge",y="10.0.127",v="1713321035407",b=f||d||p||l||h,w=(f||d||p||h)&&!l,x=navigator.platform.indexOf("Mac")>=0,S=!1,_=c?"jiaocheng.inftab.com":"qzeuoq1yf.hn-bkt.clouddn.com",k="https://infinityicon.infinitynewtab.com/assets",T=c?"https://api.infinitynewtab.com/v2":"https://api-infinitynewtab-com.test690.com/v2",j=c?"https://api.infinitynewtab.com/privacy":"https://test-api.infinitynewtab.com/privacy",I="https://infinity-api.infinitynewtab.com",O=u?location.origin:c?"https://inftab.com":"https://test.inftab.com",E="https://weatheroffer.com/api/extfans",L="https://mail.google.com",A="https://suggestion.baidu.com",R="https://google.com",C=["cs","da","de","el","en","en-GB","en-US","es","es-419","fi","fr","hi","hu","id","it","ja","ko","ms","nl","no","pl","pt-BR","pt-PT","ro","ru","sk","sv","th","tr","uk","vi","zh-CN","zh-TW"],P=!!(null===(n=i.a.chrome)||void 0===n?void 0:n.abp),M=function(){if(u)return{baiduLabel:"Infinity新标签页web版",trackingId:"UA-202382853-4"};if(l)return{baiduLabel:"Infinity新标签页app版",trackingId:"UA-202382853-3"};if(b){if("pro"===g)return{baiduLabel:"Infinity新标签页pro版",trackingId:"UA-202382853-1"};if("basic"===g)return{baiduLabel:"Infinity新标签页basic版",trackingId:"UA-202382853-2"}}throw new Error("no ga info")}();function U(t="",e="_"){const r=t.split(e);return 2===r.length?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),r.join(e)):t}function N(t){const e=U(t.replace("_","-"),"-");return C.includes(e)?e:"zh"===t||0===e.indexOf("zh-")?"zh-CN":"en-US"}const B={get lang(){return u?function(){if(!a){const t=localStorage.getItem("langCode");if(null!==localStorage.getItem("setLangCode")&&null!==t)return t}return N(navigator.language||"en-us")}():N(chrome.i18n.getUILanguage())},get extVersion(){return u?"web":chrome.runtime.getManifest().version},get extId(){return u?"web":chrome.runtime.id},get platform(){return u?"web":"edge"},get supportCookie(){return!h&&"safari"!==this.runtimePlatform},get runtimePlatform(){return P?"360":D().broswer},get platformVersion(){return D().version},get isZh(){return"zh-CN"===B.lang},get isEn(){return/^(en|en-GB|en-US)$/.test(B.lang)},get isWindows(){return/windows|win32/i.test(navigator.userAgent)},get isMac(){return-1!==navigator.platform.toLowerCase().indexOf("mac")},get vendor(){let t=m;return"web"===m&&(t=D().broswer),t.charAt(0).toUpperCase()+t.slice(1)}};function D(){const t={},e=navigator.userAgent.toLowerCase();let r;return(r=e.match(/edg\/([\d.]+)/i))?t.edge=r[1]:(r=e.match(/rv:([\d.]+)\) like gecko/))||(r=e.match(/msie ([\d.]+)/))?t.ie=r[1]:(r=e.match(/firefox\/([\d.]+)/))?t.firefox=r[1]:(r=e.match(/chrome\/([\d.]+)/))?t.chrome=r[1]:(r=e.match(/opera.([\d.]+)/))?t.opera=r[1]:(r=e.match(/version\/([\d.]+).*safari/))&&(t.safari=r[1]),t.edge?{broswer:"edge",version:t.edge}:t.ie?{broswer:"ie",version:t.ie}:t.firefox?{broswer:"firefox",version:t.firefox}:t.chrome?{broswer:"chrome",version:t.chrome}:t.opera?{broswer:"opera",version:t.opera}:t.safari?{broswer:"safari",version:t.safari}:{broswer:"none",version:"0"}}const q=()=>{const t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];let r=!1;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>0){r=!0;break}try{document.createEvent("TouchEvent"),r=!0}catch(t){}return!r},F="10.0.107",$="10.0.109"},,function(t,e,r){"use strict";r.r(e),r.d(e,"i18n",(function(){return f})),r.d(e,"IS_ZH",(function(){return d})),r.d(e,"initMasterI18n",(function(){return p})),r.d(e,"initI18n",(function(){return h})),r.d(e,"setLangToLocal",(function(){return m})),r.d(e,"getLangFromLocal",(function(){return y}));var n=r(114),o=r.n(n),i=(r(11),r(13),r(21),r(62),r(8),r(0)),a=r(77),s=r.n(a),c=r(22),u=r.n(c);let l={};const f=function(t,e){var r;if(i.l&&!i.r)return chrome.i18n.getMessage(t,e)||t;if(i.s||i.r){if(i.r&&void 0===e)return chrome.i18n.getMessage(t,e)||t;const n=null===(r=l[t])||void 0===r?void 0:r.message,o=[];"string"==typeof e?o.push(e):Array.isArray(e)&&o.push(...e);const a=/(\$.+?\$)/g;let s=a.exec(n),c=n;for(;s;){let[t]=o.splice(0,1);void 0===t&&(t=""),c=c.replace(s[1],t),s=a.exec(n)}return c||t}return t};i.t?o.a.i18n=f:window.i18n=f;const d="zh-CN"===i.C.lang;async function p(){const t=await y();l=t}async function h(){if(!i.s&&!i.r)return;const{slave:t}=await Promise.all([r.e(28),r.e(32)]).then(r.bind(null,161)),e=i.C.lang;try{const r=await y(),n=localStorage.getItem("setLangCode"),o=localStorage.getItem("langCode");null!==n&&null!==r||o===e&&null!==r?(l=r,g(n?o:e)):await g(n?o:e),t.postTask("slave:master-init-i18n",l)}catch(t){}}async function g(t){const e=t.replace("-","_"),r=(await s.a.get(`${i.A}/_locales/${Object(i.F)(e)}/messages.json?v=1713150275365`)).data;Object.keys(r).length>50&&(l=r,localStorage.setItem("langCode",t),m(r))}function m(t){return u.a.setItem("current-language",t)}function y(){return u.a.getItem("current-language")}},function(t,e,r){"use strict";r.d(e,"b",(function(){return w})),r.d(e,"a",(function(){return x}));r(21),r(8),r(11),r(13);var n=r(6),o=r.n(n),i=r(77),a=r.n(i),s=r(0),c=r(58),u=r(9);const l=a.a.create({timeout:3e4});let f=!1;const d=[],p=()=>new o.a(async(t,e)=>{if(d.push({resolve:t,reject:e}),!f){f=!0;try{let t;if(c.a){const e=s.l&&window.updateFromThirtyFiveStatus,{data:r}=await u.l.read(e?"localstorage":null);t=r}else{t=(await Promise.all([r.e(0),r.e(1),r.e(2),r.e(6)]).then(r.bind(null,467))).userStore}const{refreshToken:e}=t;if(!e)return t.setOutdated(),f=!1,void d.forEach(t=>{t.reject(new Error("no refreshtoken"))});const{status:n,data:o}=await l.post(s.x+"/refresh_token",{refresh_token:e},{headers:{"i-lang":s.C.lang}});if(200===n&&0===o.code){const{token:e,refreshToken:r}=o.data;t.setToken(o.data),t.setRefreshToken(r),f=!1,d.forEach(t=>{t.resolve(e)})}else{if(200!==n||3010!==o.code&&3012!==o.code)throw new Error(null==o?void 0:o.message);t.setOutdated(),f=!1,d.forEach(t=>{t.reject(o.message)})}}catch(t){f=!1,d.forEach(e=>{e.reject(t)})}}});var h=r(15);r(41);const g=["params","data","_auth"],m=async t=>{const{slave:e}=await r.e(36).then(r.bind(null,161)),n=((t,e={})=>{const r=Object.keys(e).map(t=>`${t}=${encodeURIComponent(e[t])}`);return r.length?t.includes("?")?t+r.join("&"):t+"?"+r.join("&"):t})(t.url,t.params),{request:o,option:i}=(t=>{const e={},r={};return t.data&&!e.body&&(e.body=JSON.stringify(t.data)),Object.keys(t).forEach(n=>{g.includes(n)||(n.startsWith("_")?r[n]=t[n]:e[n]=t[n])}),{request:e,option:r}})(t);return e.postTask("slave:fetch",{url:n,request:o,option:i})},y=a.a.CancelToken,v=a.a.create({timeout:6e4});v.interceptors.response.use(null,t=>(t.message=i18n("network_error"),o.a.reject(t)));const b=Object.create(null),w=t=>{b[t]&&b[t]()},x=async t=>{if(t._single){const e=(t=>{let e;return e=!0===t._single?t.method+"-"+t.url.split("?")[0]:t._single,e})(t);b[e]&&b[e](),t.cancelToken=new y(t=>{b[e]=t})}var e;t._delay&&await(e=t._delay,new o.a(t=>{setTimeout(t,e)}));const n={};if(t._auth){let e=null;if(c.a){const t=s.l&&window.updateFromThirtyFiveStatus,{data:r}=await u.l.read(t?"localstorage":null);e=r}else{const{userStore:t}=await Promise.all([r.e(0),r.e(1),r.e(2),r.e(6)]).then(r.bind(null,467));e=t}if(!e||!e.token)throw new Error("error token");{const r=h.a.parseJwt(e.token),o=await h.a.getTimestamp();if(t._Authorization)n.Authorization=t._Authorization,n["i-token"]=t._Authorization;else if(Math.floor(o/1e3)>r.exp-60){const t=await p();n.Authorization="Bearer "+t,n["i-token"]="Bearer "+t}else n.Authorization="Bearer "+e.token,n["i-token"]="Bearer "+e.token}}let i;if(t.url.includes(s.x)&&(n["i-lang"]=s.C.lang,n["i-edition"]=s.e,n["i-version"]=s.C.extVersion),t.headers=Object.assign(Object.assign({},n),t.headers),i=t._proxy?await m(t):await v(t),t._responseAll)return i;let{data:a}=i;if(!t._Authorization&&3010===(null==a?void 0:a.code)){const e=await p();t._Authorization="Bearer "+e,delete t.headers.Authorization,delete t.headers["i-token"],a=await x(t)}return a};["get","delete"].forEach(t=>{x[t]=(e,r,n={})=>x(Object.assign({url:e,params:r,method:t},n))}),["post","patch","put"].forEach(t=>{x[t]=(e,r,n={})=>x(Object.assign({url:e,data:r,method:t},n))}),x.jsonp=(t,e,r={})=>x(Object.assign({url:t,params:e},r))},,,function(t,e,r){t.exports=r(288)},,,function(t,e,r){"use strict";r.d(e,"a",(function(){return d})),r.d(e,"d",(function(){return h})),r.d(e,"g",(function(){return g})),r.d(e,"h",(function(){return m})),r.d(e,"i",(function(){return y})),r.d(e,"j",(function(){return v})),r.d(e,"k",(function(){return b})),r.d(e,"l",(function(){return w})),r.d(e,"n",(function(){return x})),r.d(e,"o",(function(){return S})),r.d(e,"m",(function(){return _})),r.d(e,"b",(function(){return k})),r.d(e,"c",(function(){return T})),r.d(e,"f",(function(){return j})),r.d(e,"e",(function(){return I}));var n,o=r(240),i=r.n(o),a=r(6),s=r.n(a),c=(r(8),r(11),r(13),r(41),r(22)),u=r.n(c);async function l(t,e,r,n=!1){try{if("idb"===r)await u.a.setItem(t,e);else if("localstorage"===r){let r=e;n||(r=JSON.stringify(e)),localStorage.setItem(t,r)}else"storage.local"===r&&await new s.a((r,n)=>chrome.storage.local.set({[t]:e},()=>{const t=chrome.runtime.lastError;t&&n(t),r(!0)}));return{data:!0}}catch(t){return console.error("setStorage -> error",t),{error:t}}}async function f(t,e){try{return"idb"===e?await u.a.removeItem(t):"localstorage"===e?localStorage.removeItem(t):"storage.local"===e&&await new s.a((e,r)=>chrome.storage.local.remove(t,()=>{const t=chrome.runtime.lastError;t&&r(t),e(null)})),{data:!0}}catch(t){return console.error("clearStorage -> error",t),{error:t}}}!function(t){t.storeNote="store-notes",t.storeSearch="store-search",t.storeSetting="store-setting",t.storeSite="store-site",t.storeSync="store-sync",t.storeTodo="store-todo",t.storeUser="store-user",t.storeWallpaper="store-wallpaper",t.storeWeather="store-weather",t.storeBookmarks="store-bookmarks",t.storeGmail="store-gmail",t.storePrivacy="store-privacy",t.storeWallpaperAutoData="store-wallpaper-auto-data",t.storeNotification="store-notification"}(n||(n={}));class d{constructor(t,e,r){this.options={ensureStringValue:!1,keepWithLogout:!1},this.key=t,this.type=e,this.options=Object.assign(Object.assign({},this.options),r),this.setInstanceMapper()}static getInstanceFromKey(t){return this.instanceKeyMapper.has(t)?this.instanceKeyMapper.get(t):null}static async deleteAllForLogout(){var t;const e=Array.from(i()(t=this.instanceKeyMapper).call(t));let r;return(await s.a.all(e.map(async t=>await t.deleteForLogout()))).some(t=>!!t.error&&(r=t.error,!0))?{error:r}:{data:!0}}setInstanceMapper(){d.instanceKeyMapper.set(this.key,this)}async create(t){return await l(this.key,t,this.type)}async read(t){return await async function(t,e,r=!1){try{if("idb"===e){return{data:await u.a.getItem(t)}}if("localstorage"===e){const e=localStorage.getItem(t);return!r&&e?"undefined"===e?{data:void 0}:{data:JSON.parse(e)}:{data:e}}if("storage.local"===e){return{data:await new s.a((e,r)=>chrome.storage.local.get(t,n=>{const o=chrome.runtime.lastError;o&&r(o),e(null==n?void 0:n[t])}))}}}catch(t){return console.error("getStorage -> error",t),{error:t}}}(this.key,t||this.type)}async update(t){const{data:e,error:r}=await this.read();if(r)return{error:r};if(e&&"object"==typeof e){const r=Object.assign(Object.assign({},e),t);return await this.create(r)}return{error:{data:e}}}async delete(t){return await f(this.key,t||this.type)}async deleteWithRetain(...t){if(0===t.length)return{error:{keys:t}};const{data:e,error:r}=await this.read();if(r)return{error:r};if(e&&"object"==typeof e){const r={};return t.forEach(t=>{r[t]=e[t]}),await this.create(r)}return{error:{data:e}}}async deleteForLogout(){return this.options.keepWithLogout?{data:!0}:await this.delete()}}d.instanceKeyMapper=new Map;var p=r(0);const h=new d(n.storeNote,"idb"),g=new class extends d{async create(t){return"localstorage"!==this.type&&setTimeout(()=>{l(this.key,t,"localstorage")},0),super.create(t)}async delete(){return"localstorage"!==this.type&&requestAnimationFrame(()=>{f(this.key,"localstorage")}),super.delete()}async deleteForLogout(){return await super.deleteWithRetain("ignoreSuggest")}}(n.storeSearch,p.i?"localstorage":"idb"),m=new class extends d{async create(t){return"localstorage"!==this.type&&setTimeout(()=>{l(this.key,t,"localstorage")},0),super.create(t)}async delete(){return"localstorage"!==this.type&&requestAnimationFrame(()=>{f(this.key,"localstorage")}),super.delete()}async deleteForLogout(){return await super.deleteWithRetain("permission")}}(n.storeSetting,p.i?"localstorage":"idb"),y=new class extends d{async create(t){return"localstorage"!==this.type&&setTimeout(()=>{l(this.key,t,"localstorage")},0),super.create(t)}async delete(){return"localstorage"!==this.type&&requestAnimationFrame(()=>{f(this.key,"localstorage")}),super.delete()}}(n.storeSite,p.i?"localstorage":"idb"),v=new class extends d{constructor(){super(...arguments),this.userStore=null,this.sendTabsSync=t=>{console.warn("SyncStorageManager ~ sync: need inject sendTabsSync",t)}}injectUserStore(t){this.userStore=t}injectSendTabsSync(t){this.sendTabsSync=t}async updateSyncPipe(t,e){var r;if(!(null===(r=this.userStore)||void 0===r?void 0:r.isLogin))return{error:"isLogin false"};const{data:n,error:o}=await this.read();if(o||!n)return{error:"read error"};if(!n.isOpenSync)return{error:"isOpenSync false"};const{autoBackupPipe:i}=n;i.data[t]=e,i.timestamp=Date.now(),i.websocketKeys.includes(t)||i.websocketKeys.push(t);const a=await this.update({autoBackupPipe:i});return this.sendTabsSync(this.key),a}}(n.storeSync,"idb"),b=new d(n.storeTodo,"idb"),w=new d(n.storeUser,p.i?"localstorage":"idb"),x=new d(n.storeWallpaper,"idb"),S=new d(n.storeWeather,"idb"),_=new d(n.storeWallpaperAutoData,"idb"),k=new d(n.storeBookmarks,"localstorage",{keepWithLogout:!0}),T=new d(n.storeGmail,"localstorage",{keepWithLogout:!0}),j=new d(n.storePrivacy,"localstorage",{keepWithLogout:!0}),I=new d(n.storeNotification,"idb")},,,,,,function(t,e,r){"use strict";var n=r(6),o=r.n(n),i=r(36),a=r.n(i),s=(r(8),r(11),r(13),r(21),r(62),r(41),r(237),r(0)),c=r(2),u=r(75),l=r(241),f=r(120);const d=t=>{t&&(s.s?window.open(t,"_self"):window.chrome.tabs.getCurrent(e=>window.chrome.tabs.update(e.id,{url:t},()=>{chrome.runtime.lastError&&(t.startsWith("http")?window.open(t,"_self"):window.chrome.tabs.create({url:t}))})))},p={randomId:f.c,group:(t,e)=>{const r=[],n=Math.ceil(t.length/e);for(let o=0;o<n;o++)o===n-1?r.push(t.slice(o*e,t.length)):r.push(t.slice(o*e,(o+1)*e));return r},openUrl:(t,e=!0,r)=>{!r||1!==r.button&&!p.ctrlKeyStatus(r)?e?s.s?window.open(t,"_blank").focus():window.chrome.tabs.create({url:t,active:!0}):d(t):s.s?window.open(t,"_blank"):window.chrome.tabs.create({url:t,active:!1})},openChromeApp:async(t,e=!0,n)=>{if(!await u.a.has(["management"]))try{await u.a.request(["management"])}catch(t){const{message:e}=await Promise.all([r.e(0),r.e(1),r.e(2),r.e(6)]).then(r.bind(null,94));return void e.error(i18n("no_permission_to_open_app",s.C.vendor))}chrome.management.get(t,async({type:o,launchType:i,enabled:a,appLaunchUrl:c}={})=>{if(chrome.runtime.lastError){const{message:t}=await Promise.all([r.e(0),r.e(1),r.e(2),r.e(6)]).then(r.bind(null,94));t.error(i18n("target_chrome_app_not_installed",s.C.vendor))}else{const s=()=>{!n||1!==n.button&&!p.ctrlKeyStatus(n)?e||"hosted_app"!==o||"OPEN_AS_REGULAR_TAB"!==i?chrome.management.launchApp(t):d(c):chrome.management.launchApp(t)};if(a)s();else{const{IConfirm:e}=await Promise.all([r.e(0),r.e(37)]).then(r.bind(null,470));e.create().toShow({text:i18n("app_disabled_enable_first"),onConfirm:()=>{window.chrome.management.setEnabled(t,!0,()=>{s()})}})}}})},send:async function({key:t,data:e}){s.s||window.chrome.runtime.sendMessage({key:t,data:e})},downloadImg:function(t,e,r){if(!e)if(e="infinity-"+Math.ceil(Date.now()*Math.random()/(555555*Math.random())),t.startsWith("blob:"))e=`${e}.${r||"png"}`;else{const r=t.indexOf("?");let n=t;~r&&(n=t.slice(0,r));e=`${e}.${n.split("/").reverse()[0].split(".").reverse()[0]}`}const n=e,o=document.createElement("a");let i=t;t.startsWith("blob:")||(i=t.includes("?")?`${t}&attname=${n}`:`${t}?attname=${n}`),s.r?window.open(i,"_blank"):(s.n&&o.setAttribute("target","_blank"),o.setAttribute("download",n),o.setAttribute("href",i),document.body.appendChild(o),o.click(),document.body.removeChild(o))},fmtTime:(t,e)=>new Date(t).toLocaleString(s.C.lang,e||{year:"numeric",month:"long",day:"2-digit",hour:"2-digit",minute:"2-digit"}),getTimestamp:async function(){return Date.now()},parseJwt:t=>{const e=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(e).split("").map(t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(r)},compress:(t,e=10,r)=>new o.a(n=>{const o=new Image,i=document.createElement("canvas"),a=i.getContext("2d");o.onload=()=>{r=r||o.height*e/o.width,i.width=e,i.height=r,a.fillRect(0,0,e,r),a.drawImage(o,0,0,e,r),i.toBlob(n,"image/jpeg")},o.src=t}),mergeArray:function(t=[],e=[],r="id",n="updatetime"){if(!t||0===t.length)return{result:e||[],isLocalEffective:!1};const o=e.filter(t=>!!t),i=Object.create(null);e.forEach((t,e)=>{if(t[r]){const n=t[r];i[n]=e}});let a=!1;return t.filter(t=>0!==t[n]).forEach(t=>{const e=t[r],s=i[e];if(void 0!==s){(o[s][n]||0)<(t[n]||0)&&(o[s]=t,a=!0)}else a=!0,o.push(t)}),{result:o.filter(t=>!!t),isLocalEffective:a}},throttle:function(t,e){let r;return function(...n){const o=this;r||(r=setTimeout(()=>{t.apply(o,n),r=null},e))}},debounce:function(t,e){let r=null;return function(){const n=this,o=arguments;r&&(clearTimeout(r),r=null),r=setTimeout(()=>{t.apply(n,o)},e)}},setStyle:function(t,e=document.body){Object.keys(t).forEach(r=>{e.style.setProperty(r,t[r])})},isInputType:t=>!!t&&(!("INPUT"!==t.tagName||t.getAttribute("type")&&"text"!==t.getAttribute("type")&&"search"!==t.getAttribute("type"))||("TEXTAREA"===t.tagName||(!!t.getAttribute("contenteditable")||void 0))),convertBase64ToBlob:t=>{const e=t.split(",");let r="",n="";e.length>1&&(n=e[1],r=e[0].substring(e[0].indexOf(":")+1,e[0].indexOf(";")));const o=atob(n),i=new ArrayBuffer(o.length),a=new Uint8Array(i);for(let t=0;t<o.length;t++)a[t]=o.charCodeAt(t);return new Blob([i],{type:r})},isTouchScreendevice:()=>!(!("ontouchstart"in window)&&!navigator.maxTouchPoints),stopBubble(t){t.stopPropagation()},hexColorDelta(t,e){let r,n,o,i,a,s;Array.isArray(t)?[r,n,o]=t:(r=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),o=parseInt(t.substring(4,6),16)),Array.isArray(e)?[i,a,s]=e:(i=parseInt(e.substring(0,2),16),a=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16));let c=255-Math.abs(r-i),u=255-Math.abs(n-a),l=255-Math.abs(o-s);return c/=255,u/=255,l/=255,(c+u+l)/3},async getSimilarColor(t){const e=a.a.createObjectURL(t),r=await new o.a(t=>{const r=new Image;r.onload=()=>t(r),r.src=e}),n=(new ColorThief).getColor(r),i=window.__INFINITY__.color_list,s=i.map(t=>p.hexColorDelta(n,t)),c=Math.max.apply(null,s),u=i[s.indexOf(c)];return a.a.revokeObjectURL(e),u},getPrivacyUrl(){const t=c.IS_ZH?"zh":"en";return s.n?`/privacy/${t}/privacy.html`:`${s.u}/${s.e}/${s.c}/${t}/privacy.html`},sleep:(t=0)=>new o.a(e=>{setTimeout(()=>{e(null)},t)}),checkImage(){let t;return[e=>new o.a((r,n)=>{t=new Image,t.onload=r,t.onerror=n,t.src=e}),()=>{t&&(t.src="")}]},requestFirefoxThrottle(t,e,r=!1){if(s.n||r){const r="throttle-"+t;if("boolean"==typeof e&&localStorage.setItem(r,Date.now()+""),"number"==typeof e){const t=localStorage.getItem(r),n=Date.now();if(t&&Number(t)<n&&Number(t)+e>n)return!1}}return!0},chooseFile:(t,e)=>(t=t||"image/jpg,image/jpeg,image/png,image/gif,image/bmp,image/webp,image/svg",e=e||"readAsDataURL",new o.a(r=>{try{document.querySelectorAll(".choose-file").forEach(t=>{document.body.removeChild(t)})}catch(t){}const n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("class","choose-file"),n.setAttribute("accept",t),n.style.opacity="0",n.style.width="0",n.style.height="0",n.value="",n.addEventListener("change",t=>{const o=t.target.files[0],i=new FileReader;i[e](o),i.onload=function(t){const e=t.target.result;r(e);try{document.body.removeChild(n)}catch(t){}}},{once:!0}),document.body.appendChild(n),n.click()})),exportJsonFile(t,e){const r=JSON.stringify(t);let n="text/infinity";s.r&&(n="custom/infinity");const o=new Blob([r],{type:n}),i=a.a.createObjectURL(o);if(s.r)window.open(i,"_blank");else{const t=new Date,r=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),n=document.createElement("a");n.href=i,n.download=e+r+".infinity",document.body.appendChild(n),n.click(),document.body.removeChild(n)}a.a.revokeObjectURL(i)},stopShowMenu(t){if(!p.isInputType(t.target))return t.stopPropagation(),t.preventDefault(),document.querySelector("i-menu").toHide(),!1},ctrlKeyStatus:t=>s.o?t.metaKey:t.ctrlKey,getFavIconSrc:t=>g(t)?t:function(t){try{return new l.a(t).host}catch(e){return t}}(function(t){if(function(t){return/^(.+?):\/\//.test(t)}(t)||g(t))return t;return"http://"+t}(t)).replace("^www.",""),getLastReqValue(t){const e=[],r=this;return async function(n,o,i){const a=r.randomId("req");e.push(a);const s=await t(n,o,i),c=e.findIndex(t=>t===a),u=e.length;return e.splice(0,c+1),c===u-1?s:null}},isFirstDate(t){const e=new Date("2013/11/30").toLocaleDateString(t);let r="";if(e.replace(/(\d{1,4})\D+(\d{1,2})\D+(\d{1,4})/,(t,e)=>(r=e,"")),"2013"===r)return!0;const n=String(new Date("2013/11/30").getDate());return r===n},internaDateToStan:f.a,getTargetLogDomain(t){if(!t)return"";try{if(t.startsWith("http://")||t.startsWith("https://")){const e=new a.a(t);if(e.host)return e.host}return t.split("?")[0]}catch(e){return t}}};const h=/^\w+:\w/;function g(t){return h.test(t)}e.a=p;const m=document.createElement("script");m.src="/vendor/color-thief.min.js",document.head.appendChild(m),m.onload=()=>{m.remove()}},,,,,function(t,e,r){(function(e){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,r(64))},function(t,e,r){"use strict";var n=r(45),o=r(168);n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},function(t,e,r){(function(e){t.exports=function t(e,r,n){function o(a,s){if(!r[a]){if(!e[a]){if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[a]={exports:{}};e[a][0].call(u.exports,(function(t){var r=e[a][1][t];return o(r||t)}),u,u.exports,t,e,r,n)}return r[a].exports}for(var i=!1,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,r,n){(function(t){"use strict";var e,n,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var i=0,a=new o(l),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),e=function(){s.data=i=++i%2}}else if(t.setImmediate||void 0===t.MessageChannel)e="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){l(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(l,0)};else{var c=new t.MessageChannel;c.port1.onmessage=l,e=function(){c.port2.postMessage(0)}}var u=[];function l(){var t,e;n=!0;for(var r=u.length;r;){for(e=u,u=[],t=-1;++t<r;)e[t]();r=u.length}n=!1}r.exports=function(t){1!==u.push(t)||n||e()}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,r){"use strict";var n=t(1);function o(){}var i={},a=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function u(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,t!==o&&p(this,t)}function l(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(t,e,r){n((function(){var n;try{n=e(r)}catch(e){return i.reject(t,e)}n===t?i.reject(t,new TypeError("Cannot resolve promise with itself")):i.resolve(t,n)}))}function d(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var r=!1;function n(e){r||(r=!0,i.reject(t,e))}function o(e){r||(r=!0,i.resolve(t,e))}var a=h((function(){e(o,n)}));"error"===a.status&&n(a.value)}function h(t,e){var r={};try{r.value=t(e),r.status="success"}catch(t){r.status="error",r.value=t}return r}e.exports=u,u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===a)return this;var r=new this.constructor(o);return this.state!==c?f(r,this.state===s?t:e,this.outcome):this.queue.push(new l(r,t,e)),r},l.prototype.callFulfilled=function(t){i.resolve(this.promise,t)},l.prototype.otherCallFulfilled=function(t){f(this.promise,this.onFulfilled,t)},l.prototype.callRejected=function(t){i.reject(this.promise,t)},l.prototype.otherCallRejected=function(t){f(this.promise,this.onRejected,t)},i.resolve=function(t,e){var r=h(d,e);if("error"===r.status)return i.reject(t,r.value);var n=r.value;if(n)p(t,n);else{t.state=s,t.outcome=e;for(var o=-1,a=t.queue.length;++o<a;)t.queue[o].callFulfilled(e)}return t},i.reject=function(t,e){t.state=a,t.outcome=e;for(var r=-1,n=t.queue.length;++r<n;)t.queue[r].callRejected(e);return t},u.resolve=function(t){return t instanceof this?t:i.resolve(new this(o),t)},u.reject=function(t){var e=new this(o);return i.reject(e,t)},u.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var a=new Array(r),s=0,c=-1,u=new this(o);++c<r;)l(t[c],c);return u;function l(t,o){e.resolve(t).then((function(t){a[o]=t,++s!==r||n||(n=!0,i.resolve(u,a))}),(function(t){n||(n=!0,i.reject(u,t))}))}},u.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var a,s=-1,c=new this(o);++s<r;)a=t[s],e.resolve(a).then((function(t){n||(n=!0,i.resolve(c,t))}),(function(t){n||(n=!0,i.reject(c,t))}));return c}},{1:1}],3:[function(t,r,n){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();function i(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(o){if("TypeError"!==o.name)throw o;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<t.length;n+=1)r.append(t[n]);return r.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var a=Promise;function s(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function c(t,e,r){"function"==typeof e&&t.then(e),"function"==typeof r&&t.catch(r)}function u(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function l(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f=void 0,d={},p=Object.prototype.toString;function h(t){return"boolean"==typeof f?a.resolve(f):function(t){return new a((function(e){var r=t.transaction("local-forage-detect-blob-support","readwrite"),n=i([""]);r.objectStore("local-forage-detect-blob-support").put(n,"key"),r.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},r.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);e(r||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))}(t).then((function(t){return f=t}))}function g(t){var e=d[t.name],r={};r.promise=new a((function(t,e){r.resolve=t,r.reject=e})),e.deferredOperations.push(r),e.dbReady?e.dbReady=e.dbReady.then((function(){return r.promise})):e.dbReady=r.promise}function m(t){var e=d[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function y(t,e){var r=d[t.name].deferredOperations.pop();if(r)return r.reject(e),r.promise}function v(t,e){return new a((function(r,n){if(d[t.name]=d[t.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},t.db){if(!e)return r(t.db);g(t),t.db.close()}var i=[t.name];e&&i.push(t.version);var a=o.open.apply(o,i);e&&(a.onupgradeneeded=function(e){var r=a.result;try{r.createObjectStore(t.storeName),e.oldVersion<=1&&r.createObjectStore("local-forage-detect-blob-support")}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),a.onerror=function(t){t.preventDefault(),n(a.error)},a.onsuccess=function(){r(a.result),m(t)}}))}function b(t){return v(t,!1)}function w(t){return v(t,!0)}function x(t,e){if(!t.db)return!0;var r=!t.db.objectStoreNames.contains(t.storeName),n=t.version<t.db.version,o=t.version>t.db.version;if(n&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),o||r){if(r){var i=t.db.version+1;i>t.version&&(t.version=i)}return!0}return!1}function S(t){return i([function(t){for(var e=t.length,r=new ArrayBuffer(e),n=new Uint8Array(r),o=0;o<e;o++)n[o]=t.charCodeAt(o);return r}(atob(t.data))],{type:t.type})}function _(t){return t&&t.__local_forage_encoded_blob}function k(t){var e=this,r=e._initReady().then((function(){var t=d[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return c(r,t,t),r}function T(t,e,r,n){void 0===n&&(n=1);try{var o=t.db.transaction(t.storeName,e);r(null,o)}catch(o){if(n>0&&(!t.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return a.resolve().then((function(){if(!t.db||"NotFoundError"===o.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),w(t)})).then((function(){return function(t){g(t);for(var e=d[t.name],r=e.forages,n=0;n<r.length;n++){var o=r[n];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return t.db=null,b(t).then((function(e){return t.db=e,x(t)?w(t):e})).then((function(n){t.db=e.db=n;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=n})).catch((function(e){throw y(t,e),e}))}(t).then((function(){T(t,e,r,n-1)}))})).catch(r);r(o)}}var j={_driver:"asyncStorage",_initStorage:function(t){var e=this,r={db:null};if(t)for(var n in t)r[n]=t[n];var o=d[r.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},d[r.name]=o),o.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=k);var i=[];function s(){return a.resolve()}for(var c=0;c<o.forages.length;c++){var u=o.forages[c];u!==e&&i.push(u._initReady().catch(s))}var l=o.forages.slice(0);return a.all(i).then((function(){return r.db=o.db,b(r)})).then((function(t){return r.db=t,x(r,e._defaultConfig.version)?w(r):t})).then((function(t){r.db=o.db=t,e._dbInfo=r;for(var n=0;n<l.length;n++){var i=l[n];i!==e&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}}))},_support:function(){try{if(!o||!o.open)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(t,e){var r=this,n=new a((function(e,n){r.ready().then((function(){T(r._dbInfo,"readonly",(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var r=a.result;if(r){var n=r.value;_(n)&&(n=S(n));var o=t(n,r.key,s++);void 0!==o?e(o):r.continue()}else e()},a.onerror=function(){n(a.error)}}catch(t){n(t)}}))})).catch(n)}));return s(n,e),n},getItem:function(t,e){var r=this;t=u(t);var n=new a((function(e,n){r.ready().then((function(){T(r._dbInfo,"readonly",(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).get(t);a.onsuccess=function(){var t=a.result;void 0===t&&(t=null),_(t)&&(t=S(t)),e(t)},a.onerror=function(){n(a.error)}}catch(t){n(t)}}))})).catch(n)}));return s(n,e),n},setItem:function(t,e,r){var n=this;t=u(t);var o=new a((function(r,o){var i;n.ready().then((function(){return i=n._dbInfo,"[object Blob]"===p.call(e)?h(i.db).then((function(t){return t?e:(r=e,new a((function(t,e){var n=new FileReader;n.onerror=e,n.onloadend=function(e){var n=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:n,type:r.type})},n.readAsBinaryString(r)})));var r})):e})).then((function(e){T(n._dbInfo,"readwrite",(function(i,a){if(i)return o(i);try{var s=a.objectStore(n._dbInfo.storeName);null===e&&(e=void 0);var c=s.put(e,t);a.oncomplete=function(){void 0===e&&(e=null),r(e)},a.onabort=a.onerror=function(){var t=c.error?c.error:c.transaction.error;o(t)}}catch(t){o(t)}}))})).catch(o)}));return s(o,r),o},removeItem:function(t,e){var r=this;t=u(t);var n=new a((function(e,n){r.ready().then((function(){T(r._dbInfo,"readwrite",(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).delete(t);i.oncomplete=function(){e()},i.onerror=function(){n(a.error)},i.onabort=function(){var t=a.error?a.error:a.transaction.error;n(t)}}catch(t){n(t)}}))})).catch(n)}));return s(n,e),n},clear:function(t){var e=this,r=new a((function(t,r){e.ready().then((function(){T(e._dbInfo,"readwrite",(function(n,o){if(n)return r(n);try{var i=o.objectStore(e._dbInfo.storeName).clear();o.oncomplete=function(){t()},o.onabort=o.onerror=function(){var t=i.error?i.error:i.transaction.error;r(t)}}catch(t){r(t)}}))})).catch(r)}));return s(r,t),r},length:function(t){var e=this,r=new a((function(t,r){e.ready().then((function(){T(e._dbInfo,"readonly",(function(n,o){if(n)return r(n);try{var i=o.objectStore(e._dbInfo.storeName).count();i.onsuccess=function(){t(i.result)},i.onerror=function(){r(i.error)}}catch(t){r(t)}}))})).catch(r)}));return s(r,t),r},key:function(t,e){var r=this,n=new a((function(e,n){t<0?e(null):r.ready().then((function(){T(r._dbInfo,"readonly",(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName),s=!1,c=a.openKeyCursor();c.onsuccess=function(){var r=c.result;r?0===t||s?e(r.key):(s=!0,r.advance(t)):e(null)},c.onerror=function(){n(c.error)}}catch(t){n(t)}}))})).catch(n)}));return s(n,e),n},keys:function(t){var e=this,r=new a((function(t,r){e.ready().then((function(){T(e._dbInfo,"readonly",(function(n,o){if(n)return r(n);try{var i=o.objectStore(e._dbInfo.storeName).openKeyCursor(),a=[];i.onsuccess=function(){var e=i.result;e?(a.push(e.key),e.continue()):t(a)},i.onerror=function(){r(i.error)}}catch(t){r(t)}}))})).catch(r)}));return s(r,t),r},dropInstance:function(t,e){e=l.apply(this,arguments);var r=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||r.name,t.storeName=t.storeName||r.storeName);var n,i=this;if(t.name){var c=t.name===r.name&&i._dbInfo.db,u=c?a.resolve(i._dbInfo.db):b(t).then((function(e){var r=d[t.name],n=r.forages;r.db=e;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=e;return e}));n=t.storeName?u.then((function(e){if(e.objectStoreNames.contains(t.storeName)){var r=e.version+1;g(t);var n=d[t.name],i=n.forages;e.close();for(var s=0;s<i.length;s++){var c=i[s];c._dbInfo.db=null,c._dbInfo.version=r}return new a((function(e,n){var i=o.open(t.name,r);i.onerror=function(t){i.result.close(),n(t)},i.onupgradeneeded=function(){i.result.deleteObjectStore(t.storeName)},i.onsuccess=function(){var t=i.result;t.close(),e(t)}})).then((function(t){n.db=t;for(var e=0;e<i.length;e++){var r=i[e];r._dbInfo.db=t,m(r._dbInfo)}})).catch((function(e){throw(y(t,e)||a.resolve()).catch((function(){})),e}))}})):u.then((function(e){g(t);var r=d[t.name],n=r.forages;e.close();for(var i=0;i<n.length;i++)n[i]._dbInfo.db=null;return new a((function(e,r){var n=o.deleteDatabase(t.name);n.onerror=n.onblocked=function(t){var e=n.result;e&&e.close(),r(t)},n.onsuccess=function(){var t=n.result;t&&t.close(),e(t)}})).then((function(t){r.db=t;for(var e=0;e<n.length;e++)m(n[e]._dbInfo)})).catch((function(e){throw(y(t,e)||a.resolve()).catch((function(){})),e}))}))}else n=a.reject("Invalid arguments");return s(n,e),n}},I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O=/^~~local_forage_type~([^~]+)~/,E="__lfsc__:".length,L=E+"arbf".length,A=Object.prototype.toString;function R(t){var e,r,n,o,i,a=.75*t.length,s=t.length,c=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),l=new Uint8Array(u);for(e=0;e<s;e+=4)r=I.indexOf(t[e]),n=I.indexOf(t[e+1]),o=I.indexOf(t[e+2]),i=I.indexOf(t[e+3]),l[c++]=r<<2|n>>4,l[c++]=(15&n)<<4|o>>2,l[c++]=(3&o)<<6|63&i;return u}function C(t){var e,r=new Uint8Array(t),n="";for(e=0;e<r.length;e+=3)n+=I[r[e]>>2],n+=I[(3&r[e])<<4|r[e+1]>>4],n+=I[(15&r[e+1])<<2|r[e+2]>>6],n+=I[63&r[e+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var P={serialize:function(t,e){var r="";if(t&&(r=A.call(t)),t&&("[object ArrayBuffer]"===r||t.buffer&&"[object ArrayBuffer]"===A.call(t.buffer))){var n,o="__lfsc__:";t instanceof ArrayBuffer?(n=t,o+="arbf"):(n=t.buffer,"[object Int8Array]"===r?o+="si08":"[object Uint8Array]"===r?o+="ui08":"[object Uint8ClampedArray]"===r?o+="uic8":"[object Int16Array]"===r?o+="si16":"[object Uint16Array]"===r?o+="ur16":"[object Int32Array]"===r?o+="si32":"[object Uint32Array]"===r?o+="ui32":"[object Float32Array]"===r?o+="fl32":"[object Float64Array]"===r?o+="fl64":e(new Error("Failed to get type for BinaryArray"))),e(o+C(n))}else if("[object Blob]"===r){var i=new FileReader;i.onload=function(){var r="~~local_forage_type~"+t.type+"~"+C(this.result);e("__lfsc__:blob"+r)},i.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(r){console.error("Couldn't convert value into a JSON string: ",t),e(null,r)}},deserialize:function(t){if("__lfsc__:"!==t.substring(0,E))return JSON.parse(t);var e,r=t.substring(L),n=t.substring(E,L);if("blob"===n&&O.test(r)){var o=r.match(O);e=o[1],r=r.substring(o[0].length)}var a=R(r);switch(n){case"arbf":return a;case"blob":return i([a],{type:e});case"si08":return new Int8Array(a);case"ui08":return new Uint8Array(a);case"uic8":return new Uint8ClampedArray(a);case"si16":return new Int16Array(a);case"ur16":return new Uint16Array(a);case"si32":return new Int32Array(a);case"ui32":return new Uint32Array(a);case"fl32":return new Float32Array(a);case"fl64":return new Float64Array(a);default:throw new Error("Unkown type: "+n)}},stringToBuffer:R,bufferToString:C};function M(t,e,r,n){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function U(t,e,r,n,o,i){t.executeSql(r,n,o,(function(t,a){a.code===a.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],(function(t,s){s.rows.length?i(t,a):M(t,e,(function(){t.executeSql(r,n,o,i)}),i)}),i):i(t,a)}),i)}function N(t,e,r,n){var o=this;t=u(t);var i=new a((function(i,a){o.ready().then((function(){void 0===e&&(e=null);var s=e,c=o._dbInfo;c.serializer.serialize(e,(function(e,u){u?a(u):c.db.transaction((function(r){U(r,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){i(s)}),(function(t,e){a(e)}))}),(function(e){if(e.code===e.QUOTA_ERR){if(n>0)return void i(N.apply(o,[t,s,r,n-1]));a(e)}}))}))})).catch(a)}));return s(i,r),i}function B(t){return new a((function(e,r){t.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(r,n){for(var o=[],i=0;i<n.rows.length;i++)o.push(n.rows.item(i).name);e({db:t,storeNames:o})}),(function(t,e){r(e)}))}),(function(t){r(t)}))}))}var D={_driver:"webSQLStorage",_initStorage:function(t){var e=this,r={db:null};if(t)for(var n in t)r[n]="string"!=typeof t[n]?t[n].toString():t[n];var o=new a((function(t,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(t){return n(t)}r.db.transaction((function(o){M(o,r,(function(){e._dbInfo=r,t()}),(function(t,e){n(e)}))}),n)}));return r.serializer=P,o},_support:"function"==typeof openDatabase,iterate:function(t,e){var r=this,n=new a((function(e,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){U(r,o,"SELECT * FROM "+o.storeName,[],(function(r,n){for(var i=n.rows,a=i.length,s=0;s<a;s++){var c=i.item(s),u=c.value;if(u&&(u=o.serializer.deserialize(u)),void 0!==(u=t(u,c.key,s+1)))return void e(u)}e()}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,e),n},getItem:function(t,e){var r=this;t=u(t);var n=new a((function(e,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){U(r,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=o.serializer.deserialize(n)),e(n)}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,e),n},setItem:function(t,e,r){return N.apply(this,[t,e,r,1])},removeItem:function(t,e){var r=this;t=u(t);var n=new a((function(e,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){U(r,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,e),n},clear:function(t){var e=this,r=new a((function(t,r){e.ready().then((function(){var n=e._dbInfo;n.db.transaction((function(e){U(e,n,"DELETE FROM "+n.storeName,[],(function(){t()}),(function(t,e){r(e)}))}))})).catch(r)}));return s(r,t),r},length:function(t){var e=this,r=new a((function(t,r){e.ready().then((function(){var n=e._dbInfo;n.db.transaction((function(e){U(e,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(e,r){var n=r.rows.item(0).c;t(n)}),(function(t,e){r(e)}))}))})).catch(r)}));return s(r,t),r},key:function(t,e){var r=this,n=new a((function(e,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){U(r,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,r){var n=r.rows.length?r.rows.item(0).key:null;e(n)}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,e),n},keys:function(t){var e=this,r=new a((function(t,r){e.ready().then((function(){var n=e._dbInfo;n.db.transaction((function(e){U(e,n,"SELECT key FROM "+n.storeName,[],(function(e,r){for(var n=[],o=0;o<r.rows.length;o++)n.push(r.rows.item(o).key);t(n)}),(function(t,e){r(e)}))}))})).catch(r)}));return s(r,t),r},dropInstance:function(t,e){e=l.apply(this,arguments);var r=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||r.name,t.storeName=t.storeName||r.storeName);var n,o=this;return s(n=t.name?new a((function(e){var n;n=t.name===r.name?o._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:n,storeNames:[t.storeName]}):e(B(n))})).then((function(t){return new a((function(e,r){t.db.transaction((function(n){function o(t){return new a((function(e,r){n.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){e()}),(function(t,e){r(e)}))}))}for(var i=[],s=0,c=t.storeNames.length;s<c;s++)i.push(o(t.storeNames[s]));a.all(i).then((function(){e()})).catch((function(t){r(t)}))}),(function(t){r(t)}))}))})):a.reject("Invalid arguments"),e),n}};function q(t,e){var r=t.name+"/";return t.storeName!==e.storeName&&(r+=t.storeName+"/"),r}function F(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(t){return!0}}()||localStorage.length>0}var $={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var r in t)e[r]=t[r];return e.keyPrefix=q(t,this._defaultConfig),F()?(this._dbInfo=e,e.serializer=P,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(t,e){var r=this,n=r.ready().then((function(){for(var e=r._dbInfo,n=e.keyPrefix,o=n.length,i=localStorage.length,a=1,s=0;s<i;s++){var c=localStorage.key(s);if(0===c.indexOf(n)){var u=localStorage.getItem(c);if(u&&(u=e.serializer.deserialize(u)),void 0!==(u=t(u,c.substring(o),a++)))return u}}}));return s(n,e),n},getItem:function(t,e){var r=this;t=u(t);var n=r.ready().then((function(){var e=r._dbInfo,n=localStorage.getItem(e.keyPrefix+t);return n&&(n=e.serializer.deserialize(n)),n}));return s(n,e),n},setItem:function(t,e,r){var n=this;t=u(t);var o=n.ready().then((function(){void 0===e&&(e=null);var r=e;return new a((function(o,i){var a=n._dbInfo;a.serializer.serialize(e,(function(e,n){if(n)i(n);else try{localStorage.setItem(a.keyPrefix+t,e),o(r)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||i(t),i(t)}}))}))}));return s(o,r),o},removeItem:function(t,e){var r=this;t=u(t);var n=r.ready().then((function(){var e=r._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return s(n,e),n},clear:function(t){var e=this,r=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(t)&&localStorage.removeItem(n)}}));return s(r,t),r},length:function(t){var e=this.keys().then((function(t){return t.length}));return s(e,t),e},key:function(t,e){var r=this,n=r.ready().then((function(){var e,n=r._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(n.keyPrefix.length)),e}));return s(n,e),n},keys:function(t){var e=this,r=e.ready().then((function(){for(var t=e._dbInfo,r=localStorage.length,n=[],o=0;o<r;o++){var i=localStorage.key(o);0===i.indexOf(t.keyPrefix)&&n.push(i.substring(t.keyPrefix.length))}return n}));return s(r,t),r},dropInstance:function(t,e){if(e=l.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var r=this.config();t.name=t.name||r.name,t.storeName=t.storeName||r.storeName}var n,o=this;return s(n=t.name?new a((function(e){t.storeName?e(q(t,o._defaultConfig)):e(t.name+"/")})).then((function(t){for(var e=localStorage.length-1;e>=0;e--){var r=localStorage.key(e);0===r.indexOf(t)&&localStorage.removeItem(r)}})):a.reject("Invalid arguments"),e),n}},W=function(t,e){for(var r,n,o=t.length,i=0;i<o;){if((r=t[i])===(n=e)||"number"==typeof r&&"number"==typeof n&&isNaN(r)&&isNaN(n))return!0;i++}return!1},z=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},H={},V={},G={INDEXEDDB:j,WEBSQL:D,LOCALSTORAGE:$},K=[G.INDEXEDDB._driver,G.WEBSQL._driver,G.LOCALSTORAGE._driver],J=["dropInstance"],Y=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(J),X={description:"",driver:K.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Z(t,e){t[e]=function(){var r=arguments;return t.ready().then((function(){return t[e].apply(t,r)}))}}function Q(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var r in e)e.hasOwnProperty(r)&&(z(e[r])?arguments[0][r]=e[r].slice():arguments[0][r]=e[r])}return arguments[0]}var tt=new(function(){function t(e){for(var r in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),G)if(G.hasOwnProperty(r)){var n=G[r],o=n._driver;this[r]=o,H[o]||this.defineDriver(n)}this._defaultConfig=Q({},X),this._config=Q({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":n(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,r){var n=new a((function(e,r){try{var n=t._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void r(o);for(var i=Y.concat("_initStorage"),c=0,u=i.length;c<u;c++){var l=i[c];if((!W(J,l)||t[l])&&"function"!=typeof t[l])return void r(o)}!function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),r=a.reject(e);return s(r,arguments[arguments.length-1]),r}},r=0,n=J.length;r<n;r++){var o=J[r];t[o]||(t[o]=e(o))}}();var f=function(r){H[n]&&console.info("Redefining LocalForage driver: "+n),H[n]=t,V[n]=r,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(f,r):f(!!t._support):f(!0)}catch(t){r(t)}}));return c(n,e,r),n},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,r){var n=H[t]?a.resolve(H[t]):a.reject(new Error("Driver not found."));return c(n,e,r),n},t.prototype.getSerializer=function(t){var e=a.resolve(P);return c(e,t),e},t.prototype.ready=function(t){var e=this,r=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return c(r,t,t),r},t.prototype.setDriver=function(t,e,r){var n=this;z(t)||(t=[t]);var o=this._getSupportedDrivers(t);function i(){n._config.driver=n.driver()}function s(t){return n._extend(t),i(),n._ready=n._initStorage(n._config),n._ready}var u=null!==this._driverSet?this._driverSet.catch((function(){return a.resolve()})):a.resolve();return this._driverSet=u.then((function(){var t=o[0];return n._dbInfo=null,n._ready=null,n.getDriver(t).then((function(t){n._driver=t._driver,i(),n._wrapLibraryMethodsWithReady(),n._initDriver=function(t){return function(){var e=0;return function r(){for(;e<t.length;){var o=t[e];return e++,n._dbInfo=null,n._ready=null,n.getDriver(o).then(s).catch(r)}i();var c=new Error("No available storage method found.");return n._driverSet=a.reject(c),n._driverSet}()}}(o)}))})).catch((function(){i();var t=new Error("No available storage method found.");return n._driverSet=a.reject(t),n._driverSet})),c(this._driverSet,e,r),this._driverSet},t.prototype.supports=function(t){return!!V[t]},t.prototype._extend=function(t){Q(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],r=0,n=t.length;r<n;r++){var o=t[r];this.supports(o)&&e.push(o)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=Y.length;t<e;t++)Z(this,Y[t])},t.prototype.createInstance=function(e){return new t(e)},t}());e.exports=tt},{3:3}]},{},[4])(4)}).call(this,r(64))},function(t,e,r){"use strict";r.d(e,"i",(function(){return n})),r.d(e,"d",(function(){return o})),r.d(e,"h",(function(){return I})),r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return a})),r.d(e,"g",(function(){return s})),r.d(e,"e",(function(){return u})),r.d(e,"f",(function(){return Dt})),r.d(e,"c",(function(){return c}));var n={};r.r(n),r.d(n,"getLocalCity",(function(){return d})),r.d(n,"getForecastWeather",(function(){return p})),r.d(n,"getCityList",(function(){return h}));var o={};r.r(o),r.d(o,"getSearchSuggest",(function(){return w})),r.d(o,"getEnginesList",(function(){return x}));var i={};r.r(i),r.d(i,"getIcon",(function(){return M})),r.d(i,"getUrlInfoWithPermission",(function(){return B})),r.d(i,"getUrlIcon",(function(){return $})),r.d(i,"getFetchiconUrls",(function(){return W})),r.d(i,"getLogoList",(function(){return z})),r.d(i,"getRedirectTargets",(function(){return H}));var a={};r.r(a),r.d(a,"getUnreadEmails",(function(){return G}));var s={};r.r(s),r.d(s,"register",(function(){return X})),r.d(s,"login",(function(){return Z})),r.d(s,"updateProfile",(function(){return Q})),r.d(s,"getUserProfile",(function(){return tt})),r.d(s,"uploadAvatar",(function(){return et})),r.d(s,"modifyPassword",(function(){return rt})),r.d(s,"forgetPassword",(function(){return nt})),r.d(s,"resetPassword",(function(){return ot})),r.d(s,"getEmailCode",(function(){return it})),r.d(s,"getRegisterCode",(function(){return at})),r.d(s,"inspceCode",(function(){return st})),r.d(s,"checkTokenIsExpired",(function(){return ct})),r.d(s,"deleteAccount",(function(){return ut})),r.d(s,"loginWithUid",(function(){return lt})),r.d(s,"v1BasicLogin",(function(){return ft})),r.d(s,"getMobileUid",(function(){return dt})),r.d(s,"getMobileloginUrl",(function(){return pt})),r.d(s,"checkMobileloginUrl",(function(){return ht})),r.d(s,"sendPhoneCode",(function(){return gt})),r.d(s,"sendEmailCode",(function(){return mt})),r.d(s,"bindEmail",(function(){return yt})),r.d(s,"bindPhoneNumber",(function(){return vt})),r.d(s,"unbindEmail",(function(){return bt})),r.d(s,"unbindPhoneNumber",(function(){return wt})),r.d(s,"verifyPhoneVCode",(function(){return xt})),r.d(s,"ThirdLoginType",(function(){return St})),r.d(s,"bindThird",(function(){return _t})),r.d(s,"unbindThird",(function(){return kt})),r.d(s,"getAreaCodeList",(function(){return Tt})),r.d(s,"verifyPassword",(function(){return jt})),r.d(s,"geVerifyTokenImg",(function(){return It}));var c={};r.r(c),r.d(c,"getRepairConcat",(function(){return Ot})),r.d(c,"postErrorCollect",(function(){return Et})),r.d(c,"sendLog",(function(){return Lt}));var u={};r.r(u),r.d(u,"getSyncList",(function(){return Pt})),r.d(u,"getSyncDetail",(function(){return Mt})),r.d(u,"autoBackup",(function(){return Ut})),r.d(u,"manualBackup",(function(){return Nt})),r.d(u,"getV2DataFromV1",(function(){return Bt}));r(8);var l=r(0),f=r(3);const d=async()=>{try{const t=await f.a.get(l.z+"/city/locate",{lang:l.C.lang},{timeout:1e4});if(t&&t.city)return{data:t.city}}catch(t){return{error:t}}},p=async t=>{try{return{data:(await f.a.get(l.z+"/weather/forecast",{lang:l.C.lang,cid:t},{timeout:1e4})).forecast}}catch(t){return{error:t}}},h=async t=>{try{return{data:await f.a.get(l.z+"/city/list",{lang:l.C.lang,searchkey:t},{timeout:1e4})}}catch(t){return{error:t}}};r(21);var g=r(15),m=r(87),y=r.n(m),v=r(251),b=r.n(v);const w=async t=>l.C.isZh?l.h||l.s?_(t):T(t):l.h||l.s?k(t):j(t),x=async t=>{let e=l.q?6e5:6e4;t||(e=0);try{if(!g.a.requestFirefoxThrottle("/search/list",e,!0))return{error:"request throttle error"};const r=await f.a.get(l.x+"/search/list",{lang:l.C.lang,platform:l.C.platform,platformVersion:l.C.platformVersion,edition:l.e,maybe360:l.H,version:t||""+Date.now()});if(0===r.code){const t=r.data.map(t=>{const e={};return e.name=t.name,e.uuid=t.seId,e.logo=t.logo,e.desc=t.desc,e.types=t.types,e.hide=t.hide,e});return g.a.requestFirefoxThrottle("/search/list",!0,!0),{data:{list:t,hash:y()(JSON.stringify(t)),meta:r.meta}}}if(2005===r.code)return g.a.requestFirefoxThrottle("/search/list",!0,!0),{error:r};throw r}catch(t){return{error:t}}},S=g.a.getLastReqValue(f.a.jsonp),_=async t=>{var e;try{const r=await S(l.b+"/su?ie=utf-8&p=3",{wd:t},{adapter:b.a,callbackParamName:"cb"});return{data:(null===(e=null==r?void 0:r.s)||void 0===e?void 0:e.map(t=>({text:t})))||[]}}catch(t){return{error:t}}},k=async t=>{var e;try{const r=await S(l.g+"/complete/search?client=chrome",{q:t},{adapter:b.a,callbackParamName:"jsonp"});return{data:(null==r?void 0:r.length)&&(null===(e=r[1])||void 0===e?void 0:e.length)?r[1].map(t=>({text:t})):[]}}catch(t){return{error:t}}},T=async t=>{try{const e=await f.a.get(l.b+"/su?p=3&ie=UTF-8&cb=",{wd:t},{_single:!0,_delay:0}),r=/s:(\[[\w\W]*\])/.exec(e),n=JSON.parse(r[1]);return{data:n.map(t=>({text:t}))}}catch(t){return{error:t}}},j=async t=>{try{const e=await f.a.get(l.g+"/complete/search?client=chrome",{q:t},{_single:!0,_delay:200});return{data:e[2].map((t,r)=>(t||(t=e[1][r]),{text:t}))}}catch(t){return{error:t}}};var I=r(117),O=r(6),E=r.n(O),L=r(99),A=r.n(L),R=r(36),C=r.n(R);r(41),r(266),r(11),r(13),r(62);const P=l.C.lang,M=async({page:t=0,type:e,keyword:r,source:n}={})=>{try{const o=await f.a.get(l.w+"/get-icons",{lang:P,page:t,type:e,source:n,keyword:r,version:l.l?l.y:""},{_single:!0,_delay:200});if(o.success)return o.icons.forEach(t=>{if("infinity"===t.source)switch("infinity://wallpaper"===t.url&&(t.name="wallpaper_library"),t.url){case"infinity://wallpaper":case"infinity://weather":case"infinity://todos":case"infinity://notes":case"infinity://history":case"infinity://bookmarks":case"infinity://settings":t.name=i18n(t.name),t.description=i18n(t.description);break;case"infinity://extension":t.name=i18n(t.name),t.description=i18n(t.description,l.C.vendor)}t._footer=t.description||i18n("no_description")}),{data:o};throw o}catch(t){return{error:t}}},U=async t=>{try{const e=await f.a.get(l.x+"/icon/title",{url:t},{_single:!0,_delay:0,timeout:3e3});if(0===e.code)return{data:{name:e.data.title}};throw e}catch(t){return{error:t}}},N=/<title[^>]*>\s*(.*)\s*<\/title>/,B=t=>window.__INFINITY__.hasAllUrlPermission?new E.a(async e=>{let r=0;U(t).then(t=>{r+=1,t.error&&2!==r||e(t)}),(async t=>{try{const e=await f.a.get(t,{},{_single:"getUrlInfoFromFE",timeout:3e3,responseType:"text",_responseAll:!0}),r=e.data;if(r&&e.status>=200&&e.status<300){const t=r.indexOf("<title");if(t>0){const e=r.slice(t,t+200),n=N.exec(e),o=null==n?void 0:n[1];if(o)return{data:{name:o}}}}return{error:"error"}}catch(t){return{error:t}}})(t).then(t=>{r+=1,t.error&&2!==r||e(t)})}):new E.a(async e=>{e(await U(t))}),D=(t,e)=>{if(0===e.length)return e;const r=new Map,n=[];return t.forEach((t,e)=>{r.set(t,e)}),e.forEach(t=>{const e=r.get(t);n[e]=t}),n.filter(t=>!!t)},q=t=>new E.a(e=>{const r=()=>{const e=D(t,i),r=D(t,a),n=D(t,s);return e.concat(r,n)},n=t.length;let o=0;const i=[],a=[],s=[];t.forEach(t=>{const c=new Image;c.onload=function(){o+=1;const{width:c,height:u}=this,l=Math.max(c,u),f=Math.min(c,u);l/f<5?f>50&&l>100?i.push(t):f>50||l>100?a.push(t):s.push(t):s.push(t),o===n&&e(r())},c.onerror=()=>{o+=1,o===n&&e(r())},c.src=t}),setTimeout(()=>{e(r())},3e3)}),F=/\.(ico|png|jpg|jpeg|svg|webp)$/,$=async t=>{var e;try{const r=await f.a.get(t,{},{_single:"getUrlIcon",_delay:100,timeout:3e3,responseType:"text",_responseAll:!0}),n=r.data;if(n&&r.status>=200&&r.status<300){const o=(null===(e=r.request)||void 0===e?void 0:e.responseURL)||t;let i=((t,e)=>{const r=[];return e.replace(/<link [^>]*href=['"]([^'"]+)[^>]*/gi,(t,e)=>{r.push(e)}),A()(r).call(r,(e,r)=>{if(r&&F.test(r)){const n=new C.a(r,t);e.push(n.href)}return e},[])})(o,n);if(i.length<6){const t=((t,e)=>{const r=[];return e.replace(/<img [^>]*src=['"]([^'"]+)[^>]*/gi,(t,e)=>{r.push(e)}),A()(r).call(r,(e,r)=>{if(r&&F.test(r)){const n=new C.a(r,t);e.push(n.href)}return e},[])})(o,n);i=i.concat(t)}i.length>4&&(i.length=4);let a=await q(i);return a=Array.from(new Set(a)),a.length>2&&(a.length=2),{data:a}}return{error:""}}catch(t){return{error:t}}},W=async t=>{try{const{host:e}=new C.a(t),r=await f.a.get(l.x+"/icon/get_icon_urls",{host:e});return 0!==r.code?{error:r}:{data:r.data.map(t=>t.url)}}catch(t){return{error:t}}},z=async t=>{try{const{host:e}=new C.a(t);if(!e.includes("."))return{data:[]};const r=await f.a.get(l.x+"/icon/get_logo_list",{host:e,limit:2},{_single:!0,_delay:100});return 0!==r.code?{error:r}:{data:r.data.map(t=>t.src)}}catch(t){return{error:t}}},H=async t=>{var e;let r=l.q?36e5:6e4;t||(r=0);try{if(!g.a.requestFirefoxThrottle("/icon/rt",r,!0))return{error:"request throttle error"};const n=await f.a.post(l.x+"/icon/rt",{version:t||""+Date.now()});return 0===n.code&&g.a.requestFirefoxThrottle("/icon/rt",!0,!0),0===n.code&&n.data?{data:{list:n.data,version:null===(e=n.meta)||void 0===e?void 0:e.version}}:{error:n}}catch(t){return{error:t}}};function V(t){return t?t.textContent:null}function G(t){return new E.a((e,r)=>{const n=new XMLHttpRequest;n.onreadystatechange=function(){var t,o;if(4==n.readyState)if(n.responseXML){const r=n.responseXML;let i=V(r.querySelector("title"));if(i)try{i=/(\w+)@(\w+\.\w+)/.exec(i)[0]}catch(t){}const a=parseInt(V(r.querySelector("fullcount")),10),s=r.querySelectorAll("entry"),c=[];let u=-1;for(let e=0,r=s.length;e<r;e++){const r=s[e],n={id:V(r.querySelector("id")),issued:V(r.querySelector("issued")),title:V(r.querySelector("title")),summary:V(r.querySelector("summary")),link:(t=r.querySelector("link"),o="href",t?t.getAttribute(o):null),authorName:V(r.querySelector("author name")),authorEmail:V(r.querySelector("author email"))};n.issued&&(n.issued=new Date(n.issued).valueOf(),u=Math.max(u,n.issued)),c.push(n)}e({account:i,lastIssuedTime:u,count:a,emails:c})}else r()},n.onerror=r,n.open("GET",function(t){return l.f+"/mail/feed/atom?zx="+encodeURIComponent(t)}(t),!0),n.send(null)})}var K=r(89),J=r.n(K),Y=r(9);const X=async({email:t,password:e,repeatPassword:r,code:n})=>{const o={email:J()(t).call(t),password:y()(e),repeatPassword:y()(r),code:J()(n).call(n)};try{return await f.a.post(l.x+"/user/register",o)}catch(t){return t}},Z=async({email:t,password:e,phone_number:r})=>{const n={email:t?J()(t).call(t):void 0,phone_number:r?J()(r).call(r):void 0,password:y()(e)};try{return await f.a.post(l.x+"/user/login",n)}catch(t){return t}};async function Q(t){const{data:e}=await Y.l.read(),r=e.userInfo.uid;try{return await f.a.post(l.x+"/user/update_profile/"+r,t,{_auth:!0})}catch(t){throw new Error(t.message)}}async function tt(){try{return await f.a.get(l.x+"/user/get_user_profile",{},{_auth:!0,_proxy:!0})}catch(t){return t}}async function et(t){const e=new FormData;e.append("file",t);try{const t=await f.a.post(l.x+"/upload/avatar",e,{_auth:!0,headers:{"Content-Type":"multipart/form-data"}});if(0===(null==t?void 0:t.code))return t;throw new Error(i18n("upload_avatar_failure"))}catch(t){throw new Error(t)}}async function rt({originPassword:t,newPassword:e}){const{data:r}=await Y.l.read(),n=r.userInfo.uid,{token:o}=r;if(!o)throw new Error(i18n("unknown_mistake"));const i={originPassword:y()(t),newPassword:y()(e)};try{return await f.a.post(l.x+"/user/modify_password/"+n,i,{_auth:!0})}catch(t){return t}}async function nt(t){try{const e=await f.a.post(l.x+"/user/forget_password",t);return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function ot({password:t,repeatPassword:e,email:r,code:n,phone_number:o}){const i={password:y()(t),repeatPassword:y()(e),email:r?J()(r).call(r):void 0,code:J()(n).call(n),phone_number:o?J()(o).call(o):void 0};try{return await f.a.post(l.x+"/user/reset_password",i)}catch(t){return t}}async function it(t){try{const e=await f.a.post(`${l.x}/get_code2?lang=${l.C.lang}`,t,{withCredentials:!0});return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function at(t){try{return await f.a.post(`${l.x}/get_register_code2?lang=${l.C.lang}`,t,{withCredentials:!0})}catch(t){return t}}async function st(t){try{return await f.a.post(l.x+"/inspce_code",t)}catch(t){return t}}async function ct(){try{return await f.a.get(l.x+"/check_token",{},{_auth:!0})}catch(t){return t}}async function ut(){const{data:t}=await Y.l.read(),e=t.userInfo.uid;try{return await f.a.post(l.x+"/user/delete/"+e,{},{_auth:!0})}catch(t){return t}}const lt=async t=>{try{return await f.a.post(l.x+"/user/login_uid",t,{timeout:1e4})}catch(t){return t}},ft=async t=>{try{return await f.a.post(l.x+"/user/v1_basic_login",t,{timeout:1e4})}catch(t){return t}},dt=async(t,e)=>{try{return await f.a.get(`${l.x}/user/user_hash?uid=${t}&secret=${e}`)}catch(t){return t}},pt=async()=>{try{const t=await f.a.get(l.x+"/login_code/mobile_code",{},{_auth:!0});return 0===t.code?{data:t.data}:{error:t}}catch(t){return{error:t}}},ht=async(t,e)=>{try{const r=await f.a.post(l.x+"/login_code/check",{code:t,type:e},{_auth:!0});return 0===r.code?{data:r.data}:{error:r}}catch(t){return{error:t}}};async function gt(t){try{const e=await f.a.post(l.x+"/phone/send_code",t,{withCredentials:!0});return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function mt(t){try{const e=await f.a.post(l.x+"/get_email_bind_code",t,{_auth:!0,withCredentials:!0});return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function yt(t){try{const e=await f.a.post(l.x+"/bind/email",t,{_auth:!0});return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function vt(t){try{const e=await f.a.post(l.x+"/bind/phone",t,{_auth:!0});return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function bt(){try{const t=await f.a.post(l.x+"/unbind/email",{},{_auth:!0});return 0===t.code?{data:t.data}:{error:t}}catch(t){return{error:t}}}async function wt(){try{const t=await f.a.post(l.x+"/unbind/phone",{},{_auth:!0});return 0===t.code?{data:t.data}:{error:t}}catch(t){return{error:t}}}async function xt(t,e){try{const r=await f.a.post(l.x+"/phone/verify_code",{phone_number:t,code:e});return 0===r.code?{data:r.data}:{error:r}}catch(t){return{error:t}}}var St;async function _t(t,e){try{const r=await f.a.post(`${l.x}/bind/${t}`,{access_code:e},{_auth:!0});return 0===r.code?{data:r.data}:{error:r}}catch(t){return{error:t}}}async function kt(t){try{const e=await f.a.post(`${l.x}/unbind/${t}`,{},{_auth:!0});return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function Tt(){try{const t=await(await f.a.get(l.x+"/phone/area_list"));return 0===t.code?{data:t.data}:{error:t}}catch(t){return{error:t}}}async function jt(t){try{const e=await f.a.post(l.x+"/user/verify_password",{password:y()(t)},{_auth:!0});return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function It(){try{const t=await f.a.get(l.x+"/verify/get_token_img");return 0===t.code?{data:t.data}:{error:t}}catch(t){return{error:t}}}!function(t){t.weibo="weibo",t.facebook="facebook",t.google="google",t.wechat="wechat",t.qq="qq"}(St||(St={}));const Ot=async()=>{try{const t=await f.a.get(l.x+"/get_concat_info");if(0===t.code)return{data:t.data};throw t}catch(t){return{error:t}}},Et=async(t,e)=>{try{const{response:r,stack:n,config:o}=e;let i=r||o;i&&(i=JSON.stringify(i,(t,e)=>{if(e instanceof FormData){const t={};for(const[r,n]of e)t[r]=n;return t}if(e instanceof File){return{lastModified:e.lastModified,name:e.name,size:e.size,type:e.type}}return e}));let{data:a,error:s}=await Y.l.read();if(!s&&a){const t=["mobileuid","avatar","refreshToken","secret","gender","name"];a=JSON.stringify(a,(e,r)=>{if(!t.includes(e))return r})}const c=await f.a.post(l.x+"/collect",{type:t,user:a,stack:n,info:i,env:Object.assign({},l.C)});if(0===c.code)return{data:c.data};throw c}catch(t){return{error:t}}},Lt=async t=>{await f.a.get(t,void 0,{_proxy:!0,_proxyIgnoreRes:!0})},At=t=>{const e=JSON.stringify(t),r=(new TextEncoder).encode(e);return new Blob([r],{type:"application/json;charset=utf-8"})},Rt=t=>{const e={};return t.forEach(t=>{const{platform:r}=t;e[r]?e[r].push(t):e[r]=[t]}),e},Ct=t=>{const{_id:e,_platform:r="pc"}=t;return{id:e,time:g.a.fmtTime(Number(e)),platform:r}},Pt=async()=>{try{const t=await f.a.get(l.x+"/sync/list",void 0,{_auth:!0,_proxy:!0});if(0!==t.code)return{error:t};const e={};return e.auto=t.meta.auto.map(Ct),e.manual=Rt(t.meta.manual.map(Ct)),{data:e}}catch(t){return{error:t}}},Mt=async(t,e,r="all")=>{try{const n=await f.a.get(l.x+"/sync/download_url",{id:t,type:e,keys:r},{_auth:!0});if(0!==n.code)return{error:n};const o=n.data;let i={};const a=await E.a.all(o.map(e=>f.a.get(e.url+"&timestampid="+("latest"===t?Date.now():t),{},{timeout:18e4})));return o.forEach((t,r)=>{const n=t.fileKey;"manual"===e?i=Object.assign(Object.assign({},i),a[r]):"auto"===e&&(i[n]=a[r])}),{data:i}}catch(t){return Et("getSyncDetail",t),{error:t}}},Ut=async(t,e="")=>{const r=Object.keys(t).join(",");try{const n=await f.a.get(l.x+"/sync/token",{type:"auto",keys:r},{_auth:!0});if(0!==n.code||!n.data.length)return{error:n};const o=n.data;await E.a.all(o.map(e=>{const{url:r,key:n,token:o,host:i}=e,a=new FormData;return a.append("token",o),a.append("key",r),a.append("file",At(t[n])),f.a.post(i,a,{headers:{"Content-Type":"multipart/form-data"},timeout:18e4})})),localStorage.setItem("pre-sync-id",o[0].timestamp+"");const i=await f.a.post(l.x+"/sync/done",{type:"auto",websocketkeys:e,keys:r,record_time:o[0].timestamp},{_auth:!0});return 0!==i.code?{error:i}:{data:i.meta.map(Ct)}}catch(t){return Et("autoBackup",t),{error:t}}},Nt=async t=>{try{const e=await f.a.get(l.x+"/sync/token",{type:"manual",keys:"data"},{_auth:!0});if(0!==e.code||!e.data.length)return{error:e};const{token:r,url:n,timestamp:o,host:i}=e.data[0],a=new FormData;a.append("token",r),a.append("key",n),a.append("file",At(t)),await f.a.post(i,a,{headers:{"Content-Type":"multipart/form-data"},timeout:18e4});const s=await f.a.post(l.x+"/sync/done",{type:"manual",keys:"data",record_time:o},{_auth:!0});return 0!==s.code?{error:s}:{data:Rt(s.meta.map(Ct))}}catch(t){return Et("manualBackup",t),{error:t}}},Bt=t=>"pro"===t?async function(){try{const{data:{userInfo:t}}=await Y.l.read(),{uid:e,secret:r}=t,n=await f.a.get(l.w+"/user/recovery-pro",{uid:e,secret:r},{timeout:2e5});if(n.success)return{data:n.data};throw n}catch(t){return Et("getProV1Data",t),{error:t}}}():"basic"===t?async function(){try{const t=await f.a.get(l.x+"/sync/recover_basic",{},{_auth:!0,timeout:2e5});return 0!==t.code?{error:t}:{data:t.data}}catch(t){return Et("getBasicV1Data",t),{error:t}}}():void 0;var Dt=r(272)},,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return c}));var n=r(29);const o=/^http[s]?:\/\//;function i(t){return o.test(t)}const a=(t,e)=>{const r="https://infinityicon.infinitynewtab.com/assets/images/"+t;return!0===e?s(r):!1===e?r:/\.(png|jpg|jpeg)$/.test(t)?s(r):r};function s(t){return i(t)?t.includes("?")?t:n.e?t+"?imageView2/0/q/100":t+"?imageView2/0/format/webp/q/100":t}function c(t){return i(t)?t.includes("?")?t:n.e?t+"?imageMogr2/thumbnail/240x/blur/1x0/quality/100|imageslim":t+"?imageMogr2/thumbnail/240x/format/webp/blur/1x0/quality/100|imageslim":t}},function(t,e,r){var n=r(20),o=r(202),i=r(42),a=r(203),s=r(206),c=r(296),u=o("wks"),l=n.Symbol,f=c?l:l&&l.withoutSetter||a;t.exports=function(t){return i(u,t)&&(s||"string"==typeof u[t])||(s&&i(l,t)?u[t]=l[t]:u[t]=f("Symbol."+t)),u[t]}},function(t,e,r){"use strict";r.d(e,"c",(function(){return n})),r.d(e,"d",(function(){return o})),r.d(e,"e",(function(){return i})),r.d(e,"f",(function(){return a})),r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return c}));r(21);const n="store-wallpaper-cache",o="infinity-image-base64",i=navigator.userAgent.toLowerCase().match(/version\/([\d.]+).*safari/),a="format/webp/",s="https://infinitypro-img.infinitynewtab.com/findaphoto/bigLink/default.png",c=`${s}?imageView2/2/w/${screen.width}/${i?"":a}interlace/1`},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},,function(t,e,r){"use strict";var n=r(216),o=Object.prototype.toString;function i(t){return"[object Array]"===o.call(t)}function a(t){return void 0===t}function s(t){return null!==t&&"object"==typeof t}function c(t){return"[object Function]"===o.call(t)}function u(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),i(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}t.exports={isArray:i,isArrayBuffer:function(t){return"[object ArrayBuffer]"===o.call(t)},isBuffer:function(t){return null!==t&&!a(t)&&null!==t.constructor&&!a(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:s,isUndefined:a,isDate:function(t){return"[object Date]"===o.call(t)},isFile:function(t){return"[object File]"===o.call(t)},isBlob:function(t){return"[object Blob]"===o.call(t)},isFunction:c,isStream:function(t){return s(t)&&c(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:u,merge:function t(){var e={};function r(r,n){"object"==typeof e[n]&&"object"==typeof r?e[n]=t(e[n],r):e[n]=r}for(var n=0,o=arguments.length;n<o;n++)u(arguments[n],r);return e},deepMerge:function t(){var e={};function r(r,n){"object"==typeof e[n]&&"object"==typeof r?e[n]=t(e[n],r):e[n]="object"==typeof r?t({},r):r}for(var n=0,o=arguments.length;n<o;n++)u(arguments[n],r);return e},extend:function(t,e,r){return u(e,(function(e,o){t[o]=r&&"function"==typeof e?n(e,r):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,r){"use strict";var n=r(20),o=r(198).f,i=r(200),a=r(106),s=r(108),c=r(57),u=r(42),l=function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e};t.exports=function(t,e){var r,f,d,p,h,g,m,y,v=t.target,b=t.global,w=t.stat,x=t.proto,S=b?n:w?n[v]:(n[v]||{}).prototype,_=b?a:a[v]||(a[v]={}),k=_.prototype;for(d in e)r=!i(b?d:v+(w?".":"#")+d,t.forced)&&S&&u(S,d),h=_[d],r&&(g=t.noTargetGet?(y=o(S,d))&&y.value:S[d]),p=r&&g?g:e[d],r&&typeof h==typeof p||(m=t.bind&&r?s(p,n):t.wrap&&r?l(p):x&&"function"==typeof p?s(Function.call,p):p,(t.sham||p&&p.sham||h&&h.sham)&&c(m,"sham",!0),_[d]=m,x&&(u(a,f=v+"Prototype")||c(a,f,{}),a[f][d]=p,t.real&&k&&!k[d]&&c(k,d,p)))}},,,function(t,e,r){t.exports=r(335)},,,function(t,e,r){var n=r(63);t.exports=function(t){if(!n(t))throw TypeError(String(t)+" is not an object");return t}},,function(t,e,r){var n=r(5),o=r(101),i=r(275),a=r(17);for(var s in o){var c=n[s],u=c&&c.prototype;if(u&&u.forEach!==i)try{a(u,"forEach",i)}catch(t){u.forEach=i}}},function(t,e,r){var n=r(96),o={}.hasOwnProperty;t.exports=Object.hasOwn||function(t,e){return o.call(n(t),e)}},,,,,,,,,,,,,,,function(t,e,r){var n=r(65),o=r(107),i=r(92);t.exports=n?function(t,e,r){return o.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return o})),r.d(e,"d",(function(){return i})),r.d(e,"c",(function(){return a}));r(21);const n=r(0).s?"serviceworker":"background";let o=!1;"background"===n?o="undefined"==typeof ServiceWorkerGlobalScope&&chrome.extension.getBackgroundPage()===window:"serviceworker"===n&&(o="undefined"!=typeof ServiceWorkerGlobalScope);const i={timeout:0,taskId:""},a=()=>(""+Date.now()/1e3/1e5).split(".")[1].substr(0,8)+(""+Math.random()).split(".")[1].substr(0,8).padEnd(8,"0")},,,,function(t,e,r){"use strict";var n=r(280),o=r(10),i=r(14),a=r(44),s=r(60),c=r(43),u=r(281),l=r(283),f=r(284),d=r(7)("replace"),p=Math.max,h=Math.min,g="$0"==="a".replace(/./,"$0"),m=!!/./[d]&&""===/./[d]("a","$0");n("replace",(function(t,e,r){var n=m?"$":"$0";return[function(t,r){var n=c(this),o=null==t?void 0:t[d];return void 0!==o?o.call(t,n,r):e.call(String(n),t,r)},function(t,o){if("string"==typeof o&&-1===o.indexOf(n)&&-1===o.indexOf("$<")){var c=r(e,this,t,o);if(c.done)return c.value}var d=i(this),g=String(t),m="function"==typeof o;m||(o=String(o));var y=d.global;if(y){var v=d.unicode;d.lastIndex=0}for(var b=[];;){var w=f(d,g);if(null===w)break;if(b.push(w),!y)break;""===String(w[0])&&(d.lastIndex=u(g,a(d.lastIndex),v))}for(var x,S="",_=0,k=0;k<b.length;k++){w=b[k];for(var T=String(w[0]),j=p(h(s(w.index),g.length),0),I=[],O=1;O<w.length;O++)I.push(void 0===(x=w[O])?x:String(x));var E=w.groups;if(m){var L=[T].concat(I,j,g);void 0!==E&&L.push(E);var A=String(o.apply(void 0,L))}else A=l(T,g,j,I,E,o);j>=_&&(S+=g.slice(_,j)+A,_=j+T.length)}return S+g.slice(_)}]}),!!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!g||m)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},,function(t,e,r){var n=r(30);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},,,,,,,,,function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r(6),o=r.n(n),i=(r(11),r(13),r(0));const a={};const s=new class{constructor(){this.request=(t,e)=>((i.n||i.k||i.h)&&e&&e.includes("chrome://favicon/")&&(e=Array.from(new Set(e))).splice(e.findIndex(t=>"chrome://favicon/"===t),1),new o.a((r,n)=>{if(i.s)return void n();let o="";if(i.n){if(o=t.join(",")+(null==e?void 0:e.join(",")),a[o])return void n(new Error("repeat"));a[o]=!0}chrome.permissions.request({permissions:t,origins:e},t=>{i.n&&a[o]&&delete a[o],chrome.runtime.lastError?n(chrome.runtime.lastError):t?r(!0):n(new Error("REJECT"))})})),this.has=(t,e)=>((i.n||i.k||i.h)&&e&&e.includes("chrome://favicon/")&&(e=Array.from(new Set(e))).splice(e.findIndex(t=>"chrome://favicon/"===t),1),new o.a(r=>{i.s?r(!1):chrome.permissions.contains({permissions:t,origins:e},t=>{r(t)})}))}}},function(t,e,r){var n=r(106),o=r(20),i=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?i(n[t])||i(o[t]):n[t]&&n[t][e]||o[t]&&o[t][e]}},function(t,e,r){t.exports=r(314)},,,,,,,,,,,,function(t,e,r){t.exports=r(362)},function(t,e){t.exports=!0},function(t,e){t.exports={}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,r){var n=r(57);t.exports=function(t,e,r,o){o&&o.enumerable?t[e]=r:n(t,e,r)}},function(t,e,r){"use strict";r.r(e),r.d(e,"iMessage",(function(){return f})),r.d(e,"message",(function(){return d}));r(11),r(13);var n=r(392),o=r(1),i=r(383),a=r(472),s=r.n(a),c=r(473),u=r.n(c),l=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};let f=class extends o.a{constructor(){super(...arguments),this.content="",this.type="error"}render(){const t={"infinity-message":!0,"position-top":"top"===this.type};return o.e`
      <div class=${Object(i.a)(t)}>
        ${this.renderImg()}
        <span>${this.content}</span>
      </div>
    `}renderImg(){return"error"===this.type?o.e`<img .src=${s.a} />`:"warn"===this.type?o.e`<img .src=${u.a} />`:void 0}};f.styles=o.b`
    :host {
      box-sizing: border-box;
      display: flex;
      position: fixed;
      min-width: 330px;
      padding: 0 20px;
      height: 60px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255, 255, 255, 1);
      box-shadow: 0px 6px 48px 0px rgba(0, 0, 0, 0.24);
      border-radius: 6px;
      z-index: 99999999999;
    }
    :host([type='top']) {
      width: 100%;
      margin: 0;
      left: 0;
      top: var(--top-bar-height);
      height: auto;
      padding: 5px;
      border-radius: 0;
      background: rgba(95, 92, 92, 0.6);
      color: #fff;
      transform: none;
      transition: all 300ms;
      opacity: 0;
      pointer-events: none;
    }
    :host(.anim[type='top']) {
      opacity: 1;
    }

    .infinity-message {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
    }
    img {
      width: 20px;
      height: 20px;
      margin-right: 8px;
    }
  `,l([Object(o.g)({type:String})],f.prototype,"content",void 0),l([Object(o.g)({type:String})],f.prototype,"type",void 0),f=l([Object(o.c)("i-message")],f);const d={newInstance:function(t,e=2,r,n){let o;if(document.querySelector("i-message"))return void clearInterval(o);const i=document.createElement("i-message");return i.setAttribute("content",t),i.setAttribute("type",r),document.body.appendChild(i),0!==e&&(o=setTimeout(()=>{document.body.removeChild(i),n&&n()},1e3*e)),i},error:function(t,e,r){n.default.error(t,e),r&&setTimeout(r,e)},success:function(t,e,r){n.default.success(t,e),r&&setTimeout(r,e)},top:function(t,e,r){const n=this.newInstance(t,e,"top",r);setTimeout(()=>null==n?void 0:n.classList.add("anim"))},warn:function(t,e,r){this.newInstance(t,e,"warn",r)}}},,function(t,e,r){var n=r(116);t.exports=function(t){return Object(n(t))}},function(t,e,r){var n=r(176),o=r(163),i=r(28)("toStringTag"),a="Arguments"==o(function(){return arguments}());t.exports=n?o:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?r:a?o(e):"Object"==(n=o(e))&&"function"==typeof e.callee?"Arguments":n}},function(t,e,r){var n,o,i,a=r(305),s=r(20),c=r(63),u=r(57),l=r(42),f=r(172),d=r(171),p=r(175),h=s.WeakMap;if(a||f.state){var g=f.state||(f.state=new h),m=g.get,y=g.has,v=g.set;n=function(t,e){if(y.call(g,t))throw new TypeError("Object already initialized");return e.facade=t,v.call(g,t,e),e},o=function(t){return m.call(g,t)||{}},i=function(t){return y.call(g,t)}}else{var b=d("state");p[b]=!0,n=function(t,e){if(l(t,b))throw new TypeError("Object already initialized");return e.facade=t,u(t,b,e),e},o=function(t){return l(t,b)?t[b]:{}},i=function(t){return l(t,b)}}t.exports={set:n,get:o,has:i,enforce:function(t){return i(t)?o(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!c(e)||(r=o(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}}},function(t,e,r){t.exports=r(358)},,,,,,function(t,e,r){"use strict";var n=r(74),o=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n})),this.resolve=n(e),this.reject=n(r)};t.exports.f=function(t){return new o(t)}},function(t,e){t.exports={}},function(t,e,r){var n=r(65),o=r(199),i=r(39),a=r(177),s=Object.defineProperty;e.f=n?s:function(t,e,r){if(i(t),e=a(e,!0),i(r),o)try{return s(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(74);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,r){var n=r(176),o=r(107).f,i=r(57),a=r(42),s=r(299),c=r(28)("toStringTag");t.exports=function(t,e,r,u){if(t){var l=r?t:t.prototype;a(l,c)||o(l,c,{configurable:!0,value:e}),u&&!n&&i(l,"toString",s)}}},,,function(t,e,r){var n=r(174),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},,function(t,e,r){t.exports=r(285)},function(t,e,r){var n=r(163),o=r(20);t.exports="process"==n(o.process)},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,r){"use strict";r.r(e),r.d(e,"imgConfig",(function(){return c})),r.d(e,"getRandomWallpaper",(function(){return u})),r.d(e,"getBingWallpaper",(function(){return l})),r.d(e,"getWallpapers",(function(){return f})),r.d(e,"getWallpaperListByType",(function(){return d})),r.d(e,"likeWallpaper",(function(){return p})),r.d(e,"collectionWallpaper",(function(){return h})),r.d(e,"addCustomColor",(function(){return g})),r.d(e,"setCustomColorItems",(function(){return m})),r.d(e,"getCustomColor",(function(){return y})),r.d(e,"removeCustomColor",(function(){return v})),r.d(e,"uploadWallpaper",(function(){return b})),r.d(e,"getWallpapersById",(function(){return w})),r.d(e,"createWallpaperLibrary",(function(){return x})),r.d(e,"getUserWallpaperLibrary",(function(){return S})),r.d(e,"hasWallpaperLibrary",(function(){return _})),r.d(e,"getLikedWallpaper",(function(){return k})),r.d(e,"getCollectionWallpaper",(function(){return T})),r.d(e,"getWallpaperLibraryItems",(function(){return j})),r.d(e,"getUserWallpaperLibraryItemsById",(function(){return I})),r.d(e,"removeWallpaperLibraryItem",(function(){return O})),r.d(e,"removeWallpaperLibrary",(function(){return E})),r.d(e,"addImagesToLibrary",(function(){return L})),r.d(e,"renameWallpaperLibrary",(function(){return A})),r.d(e,"getNextWallpaper",(function(){return R})),r.d(e,"convertURL",(function(){return C}));r(8),r(41);var n=r(0),o=r(3),i=r(29);const a=Math.floor(screen.width*window.devicePixelRatio),s=Math.floor(203*window.devicePixelRatio),c={smallWidth:s>3840?3840:s,normalWidth:a>3840?3840:a,format:i.e?"":i.f},u=async()=>{try{const t=await o.a.get(n.w+"/random-wallpaper",{_:(new Date).getTime()});if(!t.success)throw t;const{src:e,_id:r,source:i}=t.data[0],{url:a,rawUrl:s}=C(e.rawSrc);return{data:{url:a,rawUrl:s,id:r,source:i}}}catch(t){return{error:t}}},l=async()=>{try{const t=await o.a.get(n.x+"/get_bing_wallpaper",null,{_single:"getBingWallpaper"});if(t.error)throw t.error;const{data:e}=t,{content:r,url:i,rawUrl:a}=C(e.src.rawSrc);return e.thumbnail=r,e.url=i,e.rawUrl=a,t}catch(t){return{error:t}}},f=async t=>{const{source:e}=t;t.source="all"===e?"":e;try{const e=await o.a.get(n.w+"/get-wallpaper",t,{_single:"getWallpapers"}),{data:r}=e;return r.forEach(t=>{const{content:e,url:r,rawUrl:n}=C(t.src.rawSrc);t.thumbnail=e,t.url=r,t.rawUrl=n}),{result:e}}catch(t){return{error:t}}};async function d(t){"1"===t.order?t.order="like":"2"===t.order&&(t.order="_id");try{const e=await o.a.get(n.x+"/get_wallpaper_list",Object.assign({client:"pc"},t),{_single:"getWallpaperListByType"});if(0!==e.code)throw new Error(e.message);const{data:r}=e;return r.list.forEach(t=>{const{content:e,url:r,rawUrl:n}=C(t.src.rawSrc);t.thumbnail=e,t.url=r,t.rawUrl=n}),r.data=r.list,r.success=1,{result:r}}catch(t){return{error:t}}}const p=async(t,e)=>{try{const r=await o.a.post(n.x+"/like_wallpaper",{id:t,state:e},{_auth:!0});if(0!==r.code)throw r;return r}catch(t){return{error:t}}},h=async(t,e)=>{try{const r=await o.a.post(n.x+"/collection_wallpaper",{id:t,state:e},{_auth:!0});if(0!==r.code)throw r;return r}catch(t){return{error:t}}},g=async t=>{try{const e=await o.a.post(n.x+"/add_custom_color",Object.assign(Object.assign({},t),{newVer:!0}),{_auth:!0});if(0!==e.code)throw e;return e}catch(t){return{error:t}}},m=async t=>{try{const e=await o.a.post(n.x+"/set_custom_color_items",t,{_auth:!0});if(0!==e.code)throw e;return e}catch(t){return{error:t}}},y=async()=>{try{const t=await o.a.get(n.x+"/get_custom_color",null,{_auth:!0});if(0!==t.code)throw t;return t}catch(t){return{error:t}}},v=async t=>{try{const e=await o.a.post(n.x+"/remove_custom_color",{id:t,newVer:!0},{_auth:!0});if(0!==e.code)throw e;return e}catch(t){return{error:t}}},b=async t=>{try{const e=await o.a.post(n.x+"/upload_wallpaper",t,{headers:{"Content-Type":"multipart/form-data"}});if(0!==e.code)throw e;return{data:e.data}}catch(t){return{error:t}}},w=async t=>{try{const e=await o.a.get(n.x+"/get_wallpapers_by_id",{id:t});if(0!==e.code)throw e;const{data:r}=e;return r.forEach(t=>{const{content:e,url:r,rawUrl:n}=C(t.src.rawSrc);t.thumbnail=e,t.url=r,t.rawUrl=n}),{data:r}}catch(t){return{error:t}}},x=async({libraryName:t,libraryId:e,wallpapers:r})=>{try{return await o.a.post(n.x+"/create_wallpaper_library",{libraryName:t,libraryId:e,wallpapers:r},{_auth:!0})}catch(t){return{error:t}}},S=async()=>await o.a.get(n.x+"/get_user_wallpaper_library",null,{_auth:!0}),_=async t=>{try{return await o.a.get(n.x+"/has_wallpaper_library",{libraryId:t},{_auth:!0,_proxy:!0})}catch(t){return{error:t}}},k=async()=>{try{return await o.a.get(n.x+"/get_liked_wallpaper",null,{_auth:!0})}catch(t){return{error:t}}},T=async()=>{try{return await o.a.get(n.x+"/get_collection_wallpaper",null,{_auth:!0})}catch(t){return{error:t}}},j=async t=>{const e=await o.a.get(n.x+"/get_user_wallpaper_library_items",{libraryId:t});e.data.map(t=>{const{content:e,url:r,rawUrl:n}=C(t.url);return t.content=e,t.url=r,t.rawUrl=n,t});const{data:r}=e;return e.data={items:r,count:r.length},e.data},I=async t=>{try{const e=await o.a.get(n.x+"/get_user_wallpaper_library_items_by_id",{libraryItemsId:t}),{data:r}=e;return e.data={items:r,count:r.length},e.data}catch(t){return{error:t}}},O=async(t,e,r)=>{try{return await o.a.post(n.x+"/remove_wallpaper_library_item",{libraryId:t,libraryItemId:e,ext:r},{_auth:!0})}catch(t){return{error:t}}},E=async t=>{try{return await o.a.post(n.x+"/remove_wallpaper_library",{libraryId:t},{_auth:!0})}catch(t){return{error:t}}},L=async(t,e)=>{try{return await o.a.post(n.x+"/add_images_to_library",{libraryId:t,wallpapers:e},{_auth:!0})}catch(t){return{error:t}}},A=async(t,e)=>{try{return await o.a.post(n.x+"/rename_wallpaper_library",{libraryId:t,libraryName:e},{_auth:!0})}catch(t){return{error:t}}},R=async(t,e,r="library")=>{const i={source:t,type:r};e&&(i._id=e);const a=await o.a.get(n.x+"/get_next_wallpaper",i,{_single:"getNextWallpaper"});if(0!==a.code)throw new Error;const{data:s}=a,{content:c,url:u,rawUrl:l}=C(s.rawUrl);return s.thumbnail=c,s.url=u,s.rawUrl=l,a},C=t=>({rawUrl:t,url:`${t}?imageView2/2/w/${c.normalWidth}/${c.format}interlace/1`,content:`${t}?imageView2/2/w/${c.smallWidth}/${c.format}interlace/1`})},function(t,e,r){var n=r(106);t.exports=function(t){return n[t+"Prototype"]}},,function(t,e,r){"use strict";r.d(e,"c",(function(){return a})),r.d(e,"a",(function(){return s})),r.d(e,"d",(function(){return c})),r.d(e,"b",(function(){return u}));var n=r(6),o=r.n(n),i=(r(11),r(237),r(21),r(62),r(0));function a(t){return function(e){const r=new Uint8Array((e||40)/2);return window.crypto.getRandomValues(r),t+(new Date).getTime().toString(32)+function(t){let e="";const r="abcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<t;n++)e+=r.charAt(Math.floor(Math.random()*r.length));return e}(18)}()}function s(t,e=i.C.lang){const r=this,n=/(\d{1,4})\D+(\d{1,2})\D+(\d{1,4})/;let o,a,s;return n.test(t)?(t.replace(n,(t,n,i,c)=>{4===n.length?(o=n,a=i,s=c):r.isFirstDate(e)?(s=n,a=i,o=c):(s=i,a=n,o=c),"th"===e&&(o=Number(o)-543)}),new Date(`${o}/${a}/${s}`)):null}function c(t){return t.slice(0,1).toUpperCase()+t.slice(1)}function u(t,e,r){return new o.a((n,o)=>{const i=new Image(e,r);i.onload=()=>n(i),i.onerror=o,i.crossOrigin="anonymous",i.src=t})}},function(t,e,r){"use strict";r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return i}));var n=r(164);const o={notice:{gmail:!1,gmailVoice:!1,gmailNumber:!1,todoNumber:!0},link:{icon:!!r(0).s,search:!0,bookmark:!1,history:!1},view:{topBookmark:!1,topUseful:!1,windmill:!0,pagin:!1,hideInfinityAI:!1,isShowHomepageBtn:!0,isHideIcp:!1,scaleSide:1,scaleMain:1},layout:{row:3,col:6,rowGap:.4,colGap:.3,custom:!0,customItem:[3,6]},animation:{easing:"linear"},icon:{miniMode:!1,shadow:!1,startAnimation:!1,opacity:1,radius:.5,scale:.6,isHideIconName:!1},search:{hide:!1,searchSuggest:!0,keepSearchInput:!1,hideCategory:!1,hideButton:!0,shadow:!0,scale:.75,radius:n.j,opacity:1},font:{shadow:!0,size:13,color:"rgb(221, 221, 221)"}},i=function(t,e){let r=null;switch(t+"*"+e){case"2*4":case"2*5":r={iconScale:.5,colGap:.3,rowGap:.2,searchScale:.82};break;case"2*6":r={iconScale:.6,colGap:.3,rowGap:.3,searchScale:.9};break;case"2*7":r={iconScale:.7,colGap:.3,rowGap:.3,searchScale:.9};break;case"3*3":r={iconScale:.7,colGap:.24,rowGap:.2,searchScale:.82}}return r}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){var n=r(179),o=r(116);t.exports=function(t){return n(o(t))}},function(t,e,r){var n=r(39),o=r(231),i=r(112),a=r(108),s=r(157),c=r(232),u=function(t,e){this.stopped=t,this.result=e};t.exports=function(t,e,r){var l,f,d,p,h,g,m,y=r&&r.that,v=!(!r||!r.AS_ENTRIES),b=!(!r||!r.IS_ITERATOR),w=!(!r||!r.INTERRUPTED),x=a(e,y,1+v+w),S=function(t){return l&&c(l),new u(!0,t)},_=function(t){return v?(n(t),w?x(t[0],t[1],S):x(t[0],t[1])):w?x(t,S):x(t)};if(b)l=t;else{if("function"!=typeof(f=s(t)))throw TypeError("Target is not iterable");if(o(f)){for(d=0,p=i(t.length);p>d;d++)if((h=_(t[d]))&&h instanceof u)return h;return new u(!1)}l=f.call(t)}for(g=l.next;!(m=g.call(l)).done;){try{h=_(m.value)}catch(t){throw c(l),t}if("object"==typeof h&&h&&h instanceof u)return h}return new u(!1)}},function(t,e,r){var n=r(76);t.exports=n("navigator","userAgent")||""},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e,r){var n=r(97),o=r(91),i=r(28)("iterator");t.exports=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[n(t)]}},,,,function(t,e,r){"use strict";r.r(e),r.d(e,"slave",(function(){return s}));r(8),r(11),r(13),r(41);var n=r(6),o=r.n(n),i=r(273),a=r(58);const s=new class{constructor(){if(this.channel=null,this.initResolve=[],this.initReject=[],this.messageScheduler=new i.a,this.initChannel=()=>{"serviceworker"===a.b?this.initServiceworker():"background"===a.b&&this.initBackground()},this.awaitChannel=()=>new o.a(async(t,e)=>{"serviceworker"===a.b?this.channel?(await this.channel.active,await this.channel.controlling,t(null)):(this.initResolve.push(t),this.initReject.push(e)):"background"===a.b&&t(null)}),this.initServiceworker=async()=>{try{const{createWorkBox:t}=await r.e(12).then(r.bind(null,566)),e=await t();if(!e)return;e.addEventListener("message",t=>{const{type:e,payload:r={}}=t.data;"master:bordcast-message"===e&&this.messageScheduler.execTask(r.type,r.payload)}),await e.active,await e.controlling,this.channel=e,this.initResolve.forEach(t=>{t()}),this.channel.postTask=this.channel.messageSW}catch(t){console.log("slave初始化错误：",t),this.initReject.forEach(t=>{t()})}},this.initBackground=()=>{this.channel={postTask:t=>new o.a((e,r)=>{chrome.runtime.sendMessage(t,t=>{chrome.runtime.lastError&&r(chrome.runtime.lastError),e(t)})})},chrome.runtime.onMessage.addListener(({type:t,payload:e,ignoreId:r})=>{"master:bordcast-message"===t?chrome.tabs.getCurrent(t=>{r!==t.id&&this.messageScheduler.execTask(e.type,e.payload)}):"slave:bordcast-message"===t&&this.messageScheduler.execTask(e.data.type,e.data.payload)})},a.a)throw new Error("it's not page");this.initChannel()}postTask(t,e,r){return new o.a(async(n,o)=>{let i=!1;await this.awaitChannel();const s=Object.assign(Object.assign(Object.assign({},a.d),{taskId:Object(a.c)()}),r);s.timeout&&setTimeout(()=>{i||n({error:"timeout"})},s.timeout);try{const r=await this.channel.postTask({type:t,payload:Object.assign({data:e},s)});i=!0,n(r)}catch(t){n({error:t})}})}listenMessage(t,e){this.messageScheduler.listenTask(t,e)}sendMessage(t,e=""){this.postTask("slave:bordcast-message",{type:t,payload:e})}}},function(t,e,r){var n,o,i=r(20),a=r(155),s=i.process,c=s&&s.versions,u=c&&c.v8;u?o=(n=u.split("."))[0]<4?1:n[0]+n[1]:a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=n[1]),t.exports=o&&+o},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e,r){"use strict";r.d(e,"j",(function(){return o})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return a})),r.d(e,"d",(function(){return s})),r.d(e,"i",(function(){return c})),r.d(e,"h",(function(){return u})),r.d(e,"f",(function(){return l})),r.d(e,"e",(function(){return f})),r.d(e,"b",(function(){return d})),r.d(e,"g",(function(){return p}));var n=r(0);const o=.5;function i(t){return`https://chrome.google.com/webstore/detail/infinity-new-tab-producti/${t}/reviews?utm_source=infinity-rate`}const a="https://addons.mozilla.org/"+n.C.lang+"/firefox/addon/infinity-new-tab-firefox/";function s(t){return"https://microsoftedge.microsoft.com/addons/detail/infinity-new-tab-produc/"+t}const c="privacy_data_uninstall_title",u="privacy_data_uninstall_confirm",l=!0,f=()=>{},d=()=>{n.C.isZh?chrome.runtime.setUninstallURL("https://hello.wetab.link/"):chrome.runtime.setUninstallURL("https://uninstall.infinitynewtab.com/?from="+n.c)},p="https://infinityicon.infinitynewtab.com/assets/logo-basic.png"},,,function(t,e,r){"use strict";var n=r(153),o=r(308),i=r(91),a=r(98),s=r(214),c=a.set,u=a.getterFor("Array Iterator");t.exports=s(Array,"Array",(function(t,e){c(this,{type:"Array Iterator",target:n(t),index:0,kind:e})}),(function(){var t=u(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},function(t,e,r){"use strict";var n,o,i=r(224),a=r(225),s=r(66),c=r(68),u=r(40).get,l=r(226),f=r(227),d=RegExp.prototype.exec,p=s("native-string-replace",String.prototype.replace),h=d,g=(n=/a/,o=/b*/g,d.call(n,"a"),d.call(o,"a"),0!==n.lastIndex||0!==o.lastIndex),m=a.UNSUPPORTED_Y||a.BROKEN_CARET,y=void 0!==/()??/.exec("")[1];(g||y||m||l||f)&&(h=function(t){var e,r,n,o,a,s,l,f=this,v=u(f),b=v.raw;if(b)return b.lastIndex=f.lastIndex,e=h.call(b,t),f.lastIndex=b.lastIndex,e;var w=v.groups,x=m&&f.sticky,S=i.call(f),_=f.source,k=0,T=t;if(x&&(-1===(S=S.replace("y","")).indexOf("g")&&(S+="g"),T=String(t).slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==t[f.lastIndex-1])&&(_="(?: "+_+")",T=" "+T,k++),r=new RegExp("^(?:"+_+")",S)),y&&(r=new RegExp("^"+_+"$(?!\\s)",S)),g&&(n=f.lastIndex),o=d.call(x?r:f,T),x?o?(o.input=o.input.slice(k),o[0]=o[0].slice(k),o.index=f.lastIndex,f.lastIndex+=o[0].length):f.lastIndex=0:g&&o&&(f.lastIndex=f.global?o.index+o[0].length:n),y&&o&&o.length>1&&p.call(o[0],r,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(o[a]=void 0)})),o&&w)for(o.groups=s=c(null),a=0;a<w.length;a++)s[(l=w[a])[0]]=o[l[1]];return o}),t.exports=h},function(t,e,r){var n=r(20),o=r(63),i=n.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e,r){var n=r(42),o=r(96),i=r(171),a=r(291),s=i("IE_PROTO"),c=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=o(t),n(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?c:null}},function(t,e,r){var n=r(202),o=r(203),i=n("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,e,r){var n=r(20),o=r(290),i=n["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i},function(t,e,r){var n=r(39),o=r(292);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),e=r instanceof Array}catch(t){}return function(r,i){return n(r),o(i),e?t.call(r,i):r.__proto__=i,r}}():void 0)},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e){t.exports={}},function(t,e,r){var n={};n[r(28)("toStringTag")]="z",t.exports="[object z]"===String(n)},function(t,e,r){var n=r(63);t.exports=function(t,e){if(!n(t))return t;var r,o;if(e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;if("function"==typeof(r=t.valueOf)&&!n(o=r.call(t)))return o;if(!e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){var n,o=r(39),i=r(229),a=r(204),s=r(175),c=r(205),u=r(169),l=r(171),f=l("IE_PROTO"),d=function(){},p=function(t){return"<script>"+t+"<\/script>"},h=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;h=n?function(t){t.write(p("")),t.close();var e=t.parentWindow.Object;return t=null,e}(n):((e=u("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F);for(var r=a.length;r--;)delete h.prototype[a[r]];return h()};s[f]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(d.prototype=o(t),r=new d,d.prototype=null,r[f]=t):r=h(),void 0===e?r:i(r,e)}},function(t,e,r){var n=r(30),o=r(163),i="".split;t.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?i.call(t,""):Object(t)}:Object},function(t,e){t.exports=function(t,e,r){if(!(t instanceof e))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return t}},,function(t,e,r){var n=r(39),o=r(74),i=r(28)("species");t.exports=function(t,e){var r,a=n(t).constructor;return void 0===a||null==(r=n(a)[i])?e:o(r)}},function(t,e,r){r(167);var n=r(309),o=r(20),i=r(97),a=r(57),s=r(91),c=r(28)("toStringTag");for(var u in n){var l=o[u],f=l&&l.prototype;f&&i(f)!==c&&a(f,c,u),s[u]=s.Array}},function(t,e,r){var n=r(174),o=r(116),i=function(t){return function(e,r){var i,a,s=String(o(e)),c=n(r),u=s.length;return c<0||c>=u?t?"":void 0:(i=s.charCodeAt(c))<55296||i>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?t?s.charAt(c):i:t?s.slice(c,c+2):a-56320+(i-55296<<10)+65536}};t.exports={codeAt:i(!1),charAt:i(!0)}},function(t,e,r){"use strict";var n=r(215).IteratorPrototype,o=r(178),i=r(92),a=r(109),s=r(91),c=function(){return this};t.exports=function(t,e,r){var u=e+" Iterator";return t.prototype=o(n,{next:i(1,r)}),a(t,u,!1,!0),s[u]=c,t}},function(t,e,r){"use strict";r.d(e,"c",(function(){return c})),r.d(e,"d",(function(){return u})),r.d(e,"b",(function(){return l})),r.d(e,"e",(function(){return f})),r.d(e,"a",(function(){return d}));var n=r(6),o=r.n(n),i=(r(8),r(11),r(13),r(0)),a=r(22),s=r.n(a);function c(t,e){if(i.l){if(t=window.chrome.runtime.getURL(t),null==e?void 0:e.isNewTab)return window.chrome.tabs.create({url:t});window.chrome.tabs.getCurrent(e=>window.chrome.tabs.update(e.id,{url:t},()=>{chrome.runtime.lastError&&t&&(t.startsWith("http")?window.open(t,"_self"):window.chrome.tabs.create({url:t}))}))}else{if(null==e?void 0:e.isNewTab)return window.open(t);window.open(t,"_self")}}async function u(){if(i.l){const{slave:t}=await r.e(40).then(r.bind(null,161));window.chrome.tabs.getCurrent(e=>{t.sendMessage("tabs-reload"),setTimeout(()=>{window.chrome.tabs.remove(e.id)},16)})}else setTimeout(()=>{c("/")},16)}async function l(t,e){try{if(e){return await s.a.getItem(t)}{const e=localStorage.getItem(t);if(e)return"string"==typeof e?JSON.parse(e):e}}catch(t){throw new Error(t)}}async function f(t,e,r){r?await s.a.setItem(t,e):localStorage.setItem(t,JSON.stringify(e))}async function d(){const t=await new o.a(t=>chrome.bookmarks.getTree(t));if(i.n){const e=t[0].children.findIndex(t=>"unfiled_____"===t.id),r=t[0].children.findIndex(t=>"toolbar_____"===t.id);if(-1!==e&&-1!==r)if(e>r){const[n]=t[0].children.splice(e,1),[o]=t[0].children.splice(r,1);t[0].children.unshift(o,n)}else{const[n]=t[0].children.splice(r,1),[o]=t[0].children.splice(e,1);t[0].children.unshift(n,o)}}return t}},,,,,,,,,,,function(t,e,r){r(33)({global:!0},{globalThis:r(20)})},function(t,e,r){var n=r(65),o=r(228),i=r(92),a=r(153),s=r(177),c=r(42),u=r(199),l=Object.getOwnPropertyDescriptor;e.f=n?l:function(t,e){if(t=a(t),e=s(e,!0),u)try{return l(t,e)}catch(t){}if(c(t,e))return i(!o.f.call(t,e),t[e])}},function(t,e,r){var n=r(65),o=r(30),i=r(169);t.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(t,e,r){var n=r(30),o=/#|\.prototype\./,i=function(t,e){var r=s[a(t)];return r==u||r!=c&&("function"==typeof e?n(e):!!e)},a=i.normalize=function(t){return String(t).replace(o,".").toLowerCase()},s=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";t.exports=i},function(t,e,r){"use strict";var n=r(33),o=r(170),i=r(173),a=r(178),s=r(57),c=r(92),u=r(154),l=function(t,e){var r=this;if(!(r instanceof l))return new l(t,e);i&&(r=i(new Error(void 0),o(r))),void 0!==e&&s(r,"message",String(e));var n=[];return u(t,n.push,{that:n}),s(r,"errors",n),r};l.prototype=a(Error.prototype,{constructor:c(5,l),message:c(5,""),name:c(5,"AggregateError")}),n({global:!0},{AggregateError:l})},function(t,e,r){var n=r(90),o=r(172);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.15.2",mode:n?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++r+n).toString(36)}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,r){var n=r(76);t.exports=n("document","documentElement")},function(t,e,r){var n=r(162),o=r(30);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},function(t,e,r){var n=r(20);t.exports=n.Promise},function(t,e,r){var n=r(172),o=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(t){return o.call(t)}),t.exports=n.inspectSource},function(t,e,r){var n,o,i,a=r(20),s=r(30),c=r(108),u=r(205),l=r(169),f=r(210),d=r(115),p=a.location,h=a.setImmediate,g=a.clearImmediate,m=a.process,y=a.MessageChannel,v=a.Dispatch,b=0,w={},x=function(t){if(w.hasOwnProperty(t)){var e=w[t];delete w[t],e()}},S=function(t){return function(){x(t)}},_=function(t){x(t.data)},k=function(t){a.postMessage(t+"",p.protocol+"//"+p.host)};h&&g||(h=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return w[++b]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},n(b),b},g=function(t){delete w[t]},d?n=function(t){m.nextTick(S(t))}:v&&v.now?n=function(t){v.now(S(t))}:y&&!f?(i=(o=new y).port2,o.port1.onmessage=_,n=c(i.postMessage,i,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&p&&"file:"!==p.protocol&&!s(k)?(n=k,a.addEventListener("message",_,!1)):n="onreadystatechange"in l("script")?function(t){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),x(t)}}:function(t){setTimeout(S(t),0)}),t.exports={set:h,clear:g}},function(t,e,r){var n=r(155);t.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(n)},function(t,e,r){var n=r(39),o=r(63),i=r(105);t.exports=function(t,e){if(n(t),o(e)&&e.constructor===t)return e;var r=i.f(t);return(0,r.resolve)(e),r.promise}},function(t,e,r){"use strict";var n=r(33),o=r(74),i=r(105),a=r(156),s=r(154);n({target:"Promise",stat:!0},{allSettled:function(t){var e=this,r=i.f(e),n=r.resolve,c=r.reject,u=a((function(){var r=o(e.resolve),i=[],a=0,c=1;s(t,(function(t){var o=a++,s=!1;i.push(void 0),c++,r.call(e,t).then((function(t){s||(s=!0,i[o]={status:"fulfilled",value:t},--c||n(i))}),(function(t){s||(s=!0,i[o]={status:"rejected",reason:t},--c||n(i))}))})),--c||n(i)}));return u.error&&c(u.value),r.promise}})},function(t,e,r){"use strict";var n=r(33),o=r(74),i=r(76),a=r(105),s=r(156),c=r(154);n({target:"Promise",stat:!0},{any:function(t){var e=this,r=a.f(e),n=r.resolve,u=r.reject,l=s((function(){var r=o(e.resolve),a=[],s=0,l=1,f=!1;c(t,(function(t){var o=s++,c=!1;a.push(void 0),l++,r.call(e,t).then((function(t){c||f||(f=!0,n(t))}),(function(t){c||f||(c=!0,a[o]=t,--l||u(new(i("AggregateError"))(a,"No one promise resolved")))}))})),--l||u(new(i("AggregateError"))(a,"No one promise resolved"))}));return l.error&&u(l.value),r.promise}})},function(t,e,r){"use strict";var n=r(33),o=r(185),i=r(170),a=r(173),s=r(109),c=r(57),u=r(93),l=r(28),f=r(90),d=r(91),p=r(215),h=p.IteratorPrototype,g=p.BUGGY_SAFARI_ITERATORS,m=l("iterator"),y=function(){return this};t.exports=function(t,e,r,l,p,v,b){o(r,e,l);var w,x,S,_=function(t){if(t===p&&O)return O;if(!g&&t in j)return j[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},k=e+" Iterator",T=!1,j=t.prototype,I=j[m]||j["@@iterator"]||p&&j[p],O=!g&&I||_(p),E="Array"==e&&j.entries||I;if(E&&(w=i(E.call(new t)),h!==Object.prototype&&w.next&&(f||i(w)===h||(a?a(w,h):"function"!=typeof w[m]&&c(w,m,y)),s(w,k,!0,!0),f&&(d[k]=y))),"values"==p&&I&&"values"!==I.name&&(T=!0,O=function(){return I.call(this)}),f&&!b||j[m]===O||c(j,m,O),d[e]=O,p)if(x={values:_("values"),keys:v?O:_("keys"),entries:_("entries")},b)for(S in x)(g||T||!(S in j))&&u(j,S,x[S]);else n({target:e,proto:!0,forced:g||T},x);return x}},function(t,e,r){"use strict";var n,o,i,a=r(30),s=r(170),c=r(57),u=r(42),l=r(28),f=r(90),d=l("iterator"),p=!1;[].keys&&("next"in(i=[].keys())?(o=s(s(i)))!==Object.prototype&&(n=o):p=!0);var h=null==n||a((function(){var t={};return n[d].call(t)!==t}));h&&(n={}),f&&!h||u(n,d)||c(n,d,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:p}},function(t,e,r){"use strict";t.exports=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}}},function(t,e,r){"use strict";var n=r(32);function o(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,r){if(!e)return t;var i;if(r)i=r(e);else if(n.isURLSearchParams(e))i=e.toString();else{var a=[];n.forEach(e,(function(t,e){null!=t&&(n.isArray(t)?e+="[]":t=[t],n.forEach(t,(function(t){n.isDate(t)?t=t.toISOString():n.isObject(t)&&(t=JSON.stringify(t)),a.push(o(e)+"="+o(t))})))})),i=a.join("&")}if(i){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+i}return t}},function(t,e,r){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,r){"use strict";(function(e){var n=r(32),o=r(319),i={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!n.isUndefined(t)&&n.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s,c={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==e&&"[object process]"===Object.prototype.toString.call(e))&&(s=r(220)),s),transformRequest:[function(t,e){return o(e,"Accept"),o(e,"Content-Type"),n.isFormData(t)||n.isArrayBuffer(t)||n.isBuffer(t)||n.isStream(t)||n.isFile(t)||n.isBlob(t)?t:n.isArrayBufferView(t)?t.buffer:n.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):n.isObject(t)?(a(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],(function(t){c.headers[t]={}})),n.forEach(["post","put","patch"],(function(t){c.headers[t]=n.merge(i)})),t.exports=c}).call(this,r(265))},function(t,e,r){"use strict";var n=r(32),o=r(320),i=r(217),a=r(322),s=r(325),c=r(326),u=r(221);t.exports=function(t){return new Promise((function(e,l){var f=t.data,d=t.headers;n.isFormData(f)&&delete d["Content-Type"];var p=new XMLHttpRequest;if(t.auth){var h=t.auth.username||"",g=t.auth.password||"";d.Authorization="Basic "+btoa(h+":"+g)}var m=a(t.baseURL,t.url);if(p.open(t.method.toUpperCase(),i(m,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in p?s(p.getAllResponseHeaders()):null,n={data:t.responseType&&"text"!==t.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:t,request:p};o(e,l,n),p=null}},p.onabort=function(){p&&(l(u("Request aborted",t,"ECONNABORTED",p)),p=null)},p.onerror=function(){l(u("Network Error",t,null,p)),p=null},p.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),l(u(e,t,"ECONNABORTED",p)),p=null},n.isStandardBrowserEnv()){var y=r(327),v=(t.withCredentials||c(m))&&t.xsrfCookieName?y.read(t.xsrfCookieName):void 0;v&&(d[t.xsrfHeaderName]=v)}if("setRequestHeader"in p&&n.forEach(d,(function(t,e){void 0===f&&"content-type"===e.toLowerCase()?delete d[e]:p.setRequestHeader(e,t)})),n.isUndefined(t.withCredentials)||(p.withCredentials=!!t.withCredentials),t.responseType)try{p.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){p&&(p.abort(),l(t),p=null)})),void 0===f&&(f=null),p.send(f)}))}},function(t,e,r){"use strict";var n=r(321);t.exports=function(t,e,r,o,i){var a=new Error(t);return n(a,e,r,o,i)}},function(t,e,r){"use strict";var n=r(32);t.exports=function(t,e){e=e||{};var r={},o=["url","method","params","data"],i=["headers","auth","proxy"],a=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];n.forEach(o,(function(t){void 0!==e[t]&&(r[t]=e[t])})),n.forEach(i,(function(o){n.isObject(e[o])?r[o]=n.deepMerge(t[o],e[o]):void 0!==e[o]?r[o]=e[o]:n.isObject(t[o])?r[o]=n.deepMerge(t[o]):void 0!==t[o]&&(r[o]=t[o])})),n.forEach(a,(function(n){void 0!==e[n]?r[n]=e[n]:void 0!==t[n]&&(r[n]=t[n])}));var s=o.concat(i).concat(a),c=Object.keys(e).filter((function(t){return-1===s.indexOf(t)}));return n.forEach(c,(function(n){void 0!==e[n]?r[n]=e[n]:void 0!==t[n]&&(r[n]=t[n])})),r}},function(t,e,r){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},function(t,e,r){"use strict";var n=r(14);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,r){var n=r(10),o=function(t,e){return RegExp(t,e)};e.UNSUPPORTED_Y=n((function(){var t=o("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=n((function(){var t=o("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},function(t,e,r){var n=r(10);t.exports=n((function(){var t=RegExp(".","string".charAt(0));return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},function(t,e,r){var n=r(10);t.exports=n((function(){var t=RegExp("(?<a>b)","string".charAt(5));return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},function(t,e,r){"use strict";var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!n.call({1:2},1);e.f=i?function(t){var e=o(this,t);return!!e&&e.enumerable}:n},function(t,e,r){var n=r(65),o=r(107),i=r(39),a=r(230);t.exports=n?Object.defineProperties:function(t,e){i(t);for(var r,n=a(e),s=n.length,c=0;s>c;)o.f(t,r=n[c++],e[r]);return t}},function(t,e,r){var n=r(293),o=r(204);t.exports=Object.keys||function(t){return n(t,o)}},function(t,e,r){var n=r(28),o=r(91),i=n("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||a[i]===t)}},function(t,e,r){var n=r(39);t.exports=function(t){var e=t.return;if(void 0!==e)return n(e.call(t)).value}},function(t,e,r){var n=r(93);t.exports=function(t,e,r){for(var o in e)r&&r.unsafe&&t[o]?t[o]=e[o]:n(t,o,e[o],r);return t}},function(t,e,r){"use strict";var n=r(184).charAt,o=r(98),i=r(214),a=o.set,s=o.getterFor("String Iterator");i(String,"String",(function(t){a(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=s(this),r=e.string,o=e.index;return o>=r.length?{value:void 0,done:!0}:(t=n(r,o),e.index+=t.length,{value:t,done:!1})}))},function(t,e,r){"use strict";r(167);var n=r(33),o=r(76),i=r(236),a=r(93),s=r(233),c=r(109),u=r(185),l=r(98),f=r(180),d=r(42),p=r(108),h=r(97),g=r(39),m=r(63),y=r(178),v=r(92),b=r(345),w=r(157),x=r(28),S=o("fetch"),_=o("Headers"),k=x("iterator"),T=l.set,j=l.getterFor("URLSearchParams"),I=l.getterFor("URLSearchParamsIterator"),O=/\+/g,E=Array(4),L=function(t){return E[t-1]||(E[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},A=function(t){try{return decodeURIComponent(t)}catch(e){return t}},R=function(t){var e=t.replace(O," "),r=4;try{return decodeURIComponent(e)}catch(t){for(;r;)e=e.replace(L(r--),A);return e}},C=/[!'()~]|%20/g,P={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},M=function(t){return P[t]},U=function(t){return encodeURIComponent(t).replace(C,M)},N=function(t,e){if(e)for(var r,n,o=e.split("&"),i=0;i<o.length;)(r=o[i++]).length&&(n=r.split("="),t.push({key:R(n.shift()),value:R(n.join("="))}))},B=function(t){this.entries.length=0,N(this.entries,t)},D=function(t,e){if(t<e)throw TypeError("Not enough arguments")},q=u((function(t,e){T(this,{type:"URLSearchParamsIterator",iterator:b(j(t).entries),kind:e})}),"Iterator",(function(){var t=I(this),e=t.kind,r=t.iterator.next(),n=r.value;return r.done||(r.value="keys"===e?n.key:"values"===e?n.value:[n.key,n.value]),r})),F=function(){f(this,F,"URLSearchParams");var t,e,r,n,o,i,a,s,c,u=arguments.length>0?arguments[0]:void 0,l=this,p=[];if(T(l,{type:"URLSearchParams",entries:p,updateURL:function(){},updateSearchParams:B}),void 0!==u)if(m(u))if("function"==typeof(t=w(u)))for(r=(e=t.call(u)).next;!(n=r.call(e)).done;){if((a=(i=(o=b(g(n.value))).next).call(o)).done||(s=i.call(o)).done||!i.call(o).done)throw TypeError("Expected sequence with length 2");p.push({key:a.value+"",value:s.value+""})}else for(c in u)d(u,c)&&p.push({key:c,value:u[c]+""});else N(p,"string"==typeof u?"?"===u.charAt(0)?u.slice(1):u:u+"")},$=F.prototype;s($,{append:function(t,e){D(arguments.length,2);var r=j(this);r.entries.push({key:t+"",value:e+""}),r.updateURL()},delete:function(t){D(arguments.length,1);for(var e=j(this),r=e.entries,n=t+"",o=0;o<r.length;)r[o].key===n?r.splice(o,1):o++;e.updateURL()},get:function(t){D(arguments.length,1);for(var e=j(this).entries,r=t+"",n=0;n<e.length;n++)if(e[n].key===r)return e[n].value;return null},getAll:function(t){D(arguments.length,1);for(var e=j(this).entries,r=t+"",n=[],o=0;o<e.length;o++)e[o].key===r&&n.push(e[o].value);return n},has:function(t){D(arguments.length,1);for(var e=j(this).entries,r=t+"",n=0;n<e.length;)if(e[n++].key===r)return!0;return!1},set:function(t,e){D(arguments.length,1);for(var r,n=j(this),o=n.entries,i=!1,a=t+"",s=e+"",c=0;c<o.length;c++)(r=o[c]).key===a&&(i?o.splice(c--,1):(i=!0,r.value=s));i||o.push({key:a,value:s}),n.updateURL()},sort:function(){var t,e,r,n=j(this),o=n.entries,i=o.slice();for(o.length=0,r=0;r<i.length;r++){for(t=i[r],e=0;e<r;e++)if(o[e].key>t.key){o.splice(e,0,t);break}e===r&&o.push(t)}n.updateURL()},forEach:function(t){for(var e,r=j(this).entries,n=p(t,arguments.length>1?arguments[1]:void 0,3),o=0;o<r.length;)n((e=r[o++]).value,e.key,this)},keys:function(){return new q(this,"keys")},values:function(){return new q(this,"values")},entries:function(){return new q(this,"entries")}},{enumerable:!0}),a($,k,$.entries),a($,"toString",(function(){for(var t,e=j(this).entries,r=[],n=0;n<e.length;)t=e[n++],r.push(U(t.key)+"="+U(t.value));return r.join("&")}),{enumerable:!0}),c(F,"URLSearchParams"),n({global:!0,forced:!i},{URLSearchParams:F}),i||"function"!=typeof S||"function"!=typeof _||n({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,r,n,o=[t];return arguments.length>1&&(m(e=arguments[1])&&(r=e.body,"URLSearchParams"===h(r)&&((n=e.headers?new _(e.headers):new _).has("content-type")||n.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=y(e,{body:v(0,String(r)),headers:v(0,n)}))),o.push(e)),S.apply(this,o)}}),t.exports={URLSearchParams:F,getState:j}},function(t,e,r){var n=r(30),o=r(28),i=r(90),a=o("iterator");t.exports=!n((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,r="";return t.pathname="c%20d",e.forEach((function(t,n){e.delete("b"),r+=n+t})),i&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))},function(t,e,r){"use strict";var n=r(347),o=r(5),i=r(10),a=r(31),s=r(44),c=r(349),u=r(350),l=r(351),f=r(71),d=r(352),p=n.aTypedArray,h=n.exportTypedArrayMethod,g=o.Uint16Array,m=g&&g.prototype.sort,y=!!m&&!i((function(){var t=new g(2);t.sort(null),t.sort({})})),v=!!m&&!i((function(){if(f)return f<74;if(u)return u<67;if(l)return!0;if(d)return d<602;var t,e,r=new g(516),n=Array(516);for(t=0;t<516;t++)e=t%4,r[t]=515-t,n[t]=t-2*e+3;for(r.sort((function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(r[t]!==n[t])return!0}));h("sort",(function(t){if(void 0!==t&&a(t),v)return m.call(this,t);p(this);var e,r=s(this.length),n=Array(r);for(e=0;e<r;e++)n[e]=this[e];for(n=c(this,function(t){return function(e,r){return void 0!==t?+t(e,r)||0:r!=r?-1:e!=e?1:0===e&&0===r?1/e>0&&1/r<0?1:-1:e>r}}(t)),e=0;e<r;e++)this[e]=n[e];return this}),!v||y)},function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(t,e,r){t.exports=r(331)},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return p}));r(274),r(21),r(62),r(355);var n=r(242),o=r.n(n),i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,a=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,s=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function c(t){return(t||"").toString().replace(s,"")}var u=[["#","hash"],["?","query"],function(t){return t.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],l={hash:1,query:1};function f(e){var r,n=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},o={},a=typeof(e=e||n);if("blob:"===e.protocol)o=new p(unescape(e.pathname),{});else if("string"===a)for(r in o=new p(e,{}),l)delete o[r];else if("object"===a){for(r in e)r in l||(o[r]=e[r]);void 0===o.slashes&&(o.slashes=i.test(e.href))}return o}function d(t){t=c(t);var e=a.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function p(t,e){t=c(t);var r,n,i,a,s,l,p=u.slice(),h=this,g=0;for(e=f(e),r=!(n=d(t||"")).protocol&&!n.slashes,h.slashes=n.slashes||r&&e.slashes,h.protocol=n.protocol||e.protocol||"",t=n.rest,n.slashes||(p[3]=[/(.*)/,"pathname"]);g<p.length;g++)"function"!=typeof(a=p[g])?(i=a[0],l=a[1],i!=i?h[l]=t:"string"==typeof i?~(s=t.indexOf(i))&&("number"==typeof a[2]?(h[l]=t.slice(0,s),t=t.slice(s+a[2])):(h[l]=t.slice(s),t=t.slice(0,s))):(s=i.exec(t))&&(h[l]=s[1],t=t.slice(0,s.index)),h[l]=h[l]||r&&a[3]&&e[l]||"",a[4]&&(h[l]=h[l].toLowerCase())):t=a(t);r&&e.slashes&&"/"!==h.pathname.charAt(0)&&(""!==h.pathname||""!==e.pathname)&&(h.pathname=function(t,e){if(""===t)return e;for(var r=(e||"/").split("/").slice(0,-1).concat(t.split("/")),n=r.length,o=r[n-1],i=!1,a=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),a++):a&&(0===n&&(i=!0),r.splice(n,1),a--);return i&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}(h.pathname,e.pathname)),o()(h.port,h.protocol)||(h.host=h.hostname,h.port=""),h.username=h.password="",h.auth&&(a=h.auth.split(":"),h.username=a[0]||"",h.password=a[1]||""),h.origin=h.protocol&&h.host&&"file:"!==h.protocol?h.protocol+"//"+h.host:"null",h.href=h.toString()}p.prototype={toString:function(){var t,e=this,r=e.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var n=r+(e.slashes?"//":"");return e.username&&(n+=e.username,e.password&&(n+=":"+e.password),n+="@"),n+=e.host+e.pathname,(t=e.query)&&(n+="?"!==t.charAt(0)?"?"+t:t),e.hash&&(n+=e.hash),n}},p.extractProtocol=d,p.location=f,p.trimLeft=c}).call(this,r(64))},function(t,e,r){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},,,,,,,,function(t,e,r){"use strict";var n=r(30);t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){throw 1},1)}))}},,,,,,,,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return u}));r(11),r(13),r(8),r(41);var n=r(4),o=r(161),i=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};const a={},s=new Set;class c{constructor(){this.firstSync=!1,this.syncTabTime=0,this._lockRollback=!1,this.isRollbackFromStorage=!1,this.backupFileKey="",this.backupValueKeys=[],this.rollbackFromStorage=()=>null,this.stopToStorageReaction=()=>{},this.stopAutoBackupReaction=()=>{},this.convertBackupEquals=t=>t}async initSyncStore(t,e,r={},i=20){const s=t.key;if(a[s])throw new Error("storage key 重复");a[s]=this,0!==e.length&&(this.rollbackFromStorage=async()=>{let o=!1;const a=Object.create(null);Object.keys(r).forEach(t=>{e.includes(t)&&(a[t]=r[t])});try{const{data:r,error:n}=await t.read();if(n)throw n;const i=r?Object.keys(r):[];r&&i.forEach(t=>{e.includes(t)&&(a[t]=r[t])}),this.firstSync||r&&!e.some(t=>!i.includes(t))||(o=!0)}catch(t){console.error("storageSync",t)}this.isRollbackFromStorage=!0,this.stopToStorageReaction(),this.stopAutoBackupReaction(),Object(n.i)(()=>{for(const t in a)this[t]=a[t];this.firstSync||(this.firstSync=!0)}),this.restartAutoBackupReaction(),this.stopToStorageReaction=Object(n.h)(()=>{const t={};return e.forEach(e=>{t[e]=Object(n.j)(this[e])}),t},e=>{this.isRollbackFromStorage=!1,t.create(e).then(()=>{Object(n.i)(()=>{this.syncTabTime=Date.now()})})},{equals:n.d.structural,delay:i,fireImmediately:o})},await this.rollbackFromStorage(),Object(n.h)(()=>this.syncTabTime,t=>{t&&o.slave.sendMessage("tabs-sync",s)},{delay:60}))}restartAutoBackupReaction(t=!1){this.stopAutoBackupReaction(),this.stopAutoBackupReaction=Object(n.h)(()=>{const t={};return this.backupValueKeys.forEach(e=>{t[e]=Object(n.j)(this[e])}),t},t=>{(async(t,e)=>{try{const{syncStore:n}=await Promise.all([r.e(7),r.e(8)]).then(r.bind(null,565));n.pushAutoBackupPipe({[t]:e})}catch(t){}})(this.backupFileKey,t).catch()},{fireImmediately:t,equals:(t,e)=>{const r=this.convertBackupEquals(t),o=this.convertBackupEquals(e);return n.d.structural(r,o)},delay:40})}initAutoBackup(t,e){if(s.has(t))throw new Error("file key 重复");s.add(t),0!==e.length&&(this.backupFileKey=t,this.backupValueKeys=[...e])}async getBackupData(){const t={};return this.backupValueKeys.forEach(e=>{t[e]=Object(n.j)(this[e])}),t}}i([n.g],c.prototype,"firstSync",void 0),i([n.g],c.prototype,"syncTabTime",void 0),i([n.b],c.prototype,"initSyncStore",null);const u=t=>{const e=a[t];(null==e?void 0:e._lockRollback)||e.rollbackFromStorage()}},,function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));r(8),r(11),r(13),r(41);var n=r(0),o=r(476),i=r(36),a=r.n(i),s=r(3);const c=Object(n.G)()?"pc":"mobile";var u=r(23);const l=new class{constructor(){this.ga=null,this.localKey="analytics-status-time",this.gap=432e5,this.getPermission=async()=>{let t=!0;if(n.n)try{const{privacyStore:e}=await Promise.all([r.e(7),r.e(8),r.e(39)]).then(r.bind(null,572));1!==e.collectData&&(t=!1)}catch(e){t=!1}return t},this.trySendStatus=t=>{const e=localStorage.getItem(this.localKey);e?(Date.now()-Number(e)>this.gap||Number(e)>Date.now())&&this.sendStatus(t):this.sendStatus(t)},this.sendPageView=async t=>{if(!await this.getPermission())return;const e=this.ga.getPageviewUrl(t);u.c.sendLog(e)},this.sendEvent=async(t,e=!1)=>{await this.getPermission()&&Object.keys(t).forEach(r=>{const n=t[r];if("object"==typeof n)Object.keys(n).forEach(t=>{const o=n[t],i=this.ga.getEventUrl({category:r,action:t,label:String(o),nonInteraction:e});u.c.sendLog(i)});else{const t=this.ga.getEventUrl({category:r,action:String(n),nonInteraction:e});u.c.sendLog(t)}})},this.sendBaidu=async t=>{await this.getPermission()&&(async(t="")=>{const e=n.C.runtimePlatform,r=c+"-"+e;if(null==t?void 0:t.includes("baidu.com")){const e=new a.a(t).searchParams.get("tn"),o=`https://manage-api.infinitytab.com/analysis-manager/send/60efd763a741942ac60374e1?label=${n.B.baiduLabel}&action=${e}&event=${r}`;n.s?navigator.sendBeacon(o):s.a.post(o,null,{_proxy:!0})}})(t)},this.ga=new o.a({trackingId:n.B.trackingId})}async sendStatus(t){try{this.sendEvent(t,!0),localStorage.setItem(this.localKey,""+Date.now())}catch(t){}}}},function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var c,u=[],l=!1,f=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&p())}function p(){if(!l){var t=s(d);l=!0;for(var e=u.length;e;){for(c=u,u=[];++f<e;)c&&c[f].run();f=-1,e=u.length}c=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new h(t,e)),1!==u.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},,function(t,e,r){var n=r(74),o=r(96),i=r(179),a=r(112),s=function(t){return function(e,r,s,c){n(r);var u=o(e),l=i(u),f=a(u.length),d=t?f-1:0,p=t?-1:1;if(s<2)for(;;){if(d in l){c=l[d],d+=p;break}if(d+=p,t?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;t?d>=0:f>d;d+=p)d in l&&(c=r(c,l[d],d,u));return c}};t.exports={left:s(!1),right:s(!0)}},function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n=t=>{const e=o(t),r=i(t,e);return{searchWidth:e.width,searchHeight:e.height,searchMarginTop:e.marginTop,searchMarginBottom:e.marginBottom,searchRatio:e.searchRatio,iconBoxWidth:r.boxWidth,iconBoxHeight:r.boxHeight,iconOneHeight:r.iconOneHeight,iconWidth:r.width,miniIconPadding:r.miniIconPadding,iconRatio:r.iconRatio,iconsMargin:r.iconsMargin}},o=t=>{const{searchScale:e,innerHeight:r,innerWidth:n,miniMode:o,topBookmark:i,topUseful:a,mainRatio:s}=t;let c=0;a&&(c+=36),i&&(c+=36);const u=r-c,l=n-.2*n;let f=n,d=9*f/16;d>u&&(d=u,f=16*d/9);const p=f*(.575-.1818*Math.max(Math.min(720,f-1200),0)/720),h={width:p*e,height:d*(.0963-.0296*Math.max(Math.min(405,d-675),0)/405)*e};h.width>l&&(h.height=l/h.width*h.height,h.width=l);const g={width:h.width*s,height:h.height*s};let m=null;m=o?-.3:-.06;const y=h.width/p*s,v=Math.floor(m*u*y)+"px",b=Math.floor(.775*g.height)+"px";return{width:Math.floor(g.width)+"px",height:Math.floor(g.height)+"px",searchRatio:Number((g.width/625).toFixed(2)),marginTop:v,marginBottom:b,appContentWidth:l,appContentHeight:u,searcherSizeWithRatio:h}},i=(t,e)=>{const{row:r,col:n,rowGap:o,colGap:i,iconScale:a,innerWidth:s,mainRatio:c,fontSize:u}=t;let l=s;l<1200?l=1200:l>1920&&(l=1920);const{appContentHeight:f,appContentWidth:d,searcherSizeWithRatio:p}=e,h=d,g=.8*f-2.451*p.height,m=1+.5*(1920-l)/720,y=h/n,v=g/r,b=Math.min(Math.min(y,v)*a*m,y,v),w=(g-r*b)/r*o/2,x=n*(b+2*((h-n*b)/n*i/2));let S=Math.min(Math.ceil(x*c),s);let _=r*(b+2*w)*c;const k=b*c,T=1.3*Math.max(u*c,12)+.9*k*.08,j=1.2*(25+T);S<n*j&&(S=n*j),_<r*j&&(_=r*j);let I=.9*k-T-1;I<25&&(I=25);const O=.1*s*c;return{width:Math.floor(I)+"px",miniIconPadding:Math.floor(I/7+4)+"px",boxWidth:Math.ceil(S)+"px",boxHeight:Math.floor(_)+"px",iconOneHeight:Math.floor(_/r)+"px",iconRatio:Number((I/106).toFixed(2)),iconsMargin:Math.floor(O)+"px"}}},,,,function(t,e,r){"use strict";r.r(e),r.d(e,"uploadFile",(function(){return s}));r(8);var n=r(0),o=r(3);const i=["infinity-notes-img","custom-wallpaper-library"],a={},s=async(t,e,r)=>{let s;try{if(a[r]&&a[r].endTime>Date.now())s=a[r];else{let t=null;if(t=i.includes(r)?await o.a.get(n.x+"/upload/public_private_token",{type:r},{_auth:!0}):await o.a.get(n.x+"/upload/token",{type:r}),0!==t.code||!t.data.token)return{error:t};s=t.data,s.endTime=Date.now()+1e3*(s.expires-600),a[r]=s}const{token:c,prefix:u}=s,l=new FormData;l.append("token",c),l.append("key",u+e),l.append("file",t,e);const{key:f,url:d}=await o.a.post(s.host,l,{timeout:18e4,headers:{"Content-Type":"multipart/form-data"}});return{data:{url:d,key:f}}}catch(t){return{error:t}}}},function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r(11),r(13);class n{constructor(){this._events=new Map}listenTask(t,e){if("function"!=typeof e)return;this._events.has(t)||this._events.set(t,new Set);this._events.get(t).add(e)}execTask(t,e,...r){if(this._events.has(t)){const n=this._events.get(t);for(const t of n)t(e,...r)}}}},function(t,e,r){var n=r(18),o=r(5),i=r(70),a=r(353),s=r(17),c=r(19).f,u=r(102).f,l=r(354),f=r(224),d=r(225),p=r(24),h=r(10),g=r(12),m=r(40).enforce,y=r(103),v=r(7),b=r(226),w=r(227),x=v("match"),S=o.RegExp,_=S.prototype,k=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,T=/a/g,j=/a/g,I=new S(T)!==T,O=d.UNSUPPORTED_Y,E=n&&(!I||O||b||w||h((function(){return j[x]=!1,S(T)!=T||S(j)==j||"/a/i"!=S(T,"i")})));if(i("RegExp",E)){for(var L=function(t,e){var r,n,o,i,c,u,d=this instanceof L,p=l(t),h=void 0===e,y=[],v=t;if(!d&&p&&h&&t.constructor===L)return t;if((p||t instanceof L)&&(t=t.source,h&&(e="flags"in v?v.flags:f.call(v))),t=void 0===t?"":String(t),e=void 0===e?"":String(e),v=t,b&&"dotAll"in T&&(n=!!e&&e.indexOf("s")>-1)&&(e=e.replace(/s/g,"")),r=e,O&&"sticky"in T&&(o=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,"")),w&&(t=(i=function(t){for(var e,r=t.length,n=0,o="",i=[],a={},s=!1,c=!1,u=0,l="";n<=r;n++){if("\\"===(e=t.charAt(n)))e+=t.charAt(++n);else if("]"===e)s=!1;else if(!s)switch(!0){case"["===e:s=!0;break;case"("===e:k.test(t.slice(n+1))&&(n+=2,c=!0),o+=e,u++;continue;case">"===e&&c:if(""===l||g(a,l))throw new SyntaxError("Invalid capture group name");a[l]=!0,i.push([l,u]),c=!1,l="";continue}c?l+=e:o+=e}return[o,i]}(t))[0],y=i[1]),c=a(S(t,e),d?this:_,L),(n||o||y.length)&&(u=m(c),n&&(u.dotAll=!0,u.raw=L(function(t){for(var e,r=t.length,n=0,o="",i=!1;n<=r;n++)"\\"!==(e=t.charAt(n))?i||"."!==e?("["===e?i=!0:"]"===e&&(i=!1),o+=e):o+="[\\s\\S]":o+=e+t.charAt(++n);return o}(t),r)),o&&(u.sticky=!0),y.length&&(u.groups=y)),t!==v)try{s(c,"source",""===v?"(?:)":v)}catch(t){}return c},A=function(t){t in L||c(L,t,{configurable:!0,get:function(){return S[t]},set:function(e){S[t]=e}})},R=u(S),C=0;R.length>C;)A(R[C++]);_.constructor=L,L.prototype=_,p(o,"RegExp",L)}y("RegExp")},function(t,e,r){"use strict";var n=r(276).forEach,o=r(279)("forEach");t.exports=o?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,e,r){var n=r(67),o=r(100),i=r(59),a=r(44),s=r(277),c=[].push,u=function(t){var e=1==t,r=2==t,u=3==t,l=4==t,f=6==t,d=7==t,p=5==t||f;return function(h,g,m,y){for(var v,b,w=i(h),x=o(w),S=n(g,m,3),_=a(x.length),k=0,T=y||s,j=e?T(h,_):r||d?T(h,0):void 0;_>k;k++)if((p||k in x)&&(b=S(v=x[k],k,w),t))if(e)j[k]=b;else if(b)switch(t){case 3:return!0;case 5:return v;case 6:return k;case 2:c.call(j,v)}else switch(t){case 4:return!1;case 7:c.call(j,v)}return f?-1:u||l?l:j}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},function(t,e,r){var n=r(16),o=r(278),i=r(7)("species");t.exports=function(t,e){var r;return o(t)&&("function"!=typeof(r=t.constructor)||r!==Array&&!o(r.prototype)?n(r)&&null===(r=r[i])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===e?0:e)}},function(t,e,r){var n=r(34);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){"use strict";var n=r(10);t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){throw 1},1)}))}},function(t,e,r){"use strict";r(21);var n=r(24),o=r(168),i=r(10),a=r(7),s=r(17),c=a("species"),u=RegExp.prototype;t.exports=function(t,e,r,l){var f=a(t),d=!i((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),p=d&&!i((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[c]=function(){return r},r.flags="",r[f]=/./[f]),r.exec=function(){return e=!0,null},r[f](""),!e}));if(!d||!p||r){var h=/./[f],g=e(f,""[t],(function(t,e,r,n,i){var a=e.exec;return a===o||a===u.exec?d&&!i?{done:!0,value:h.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}));n(String.prototype,t,g[0]),n(u,f,g[1])}l&&s(u[f],"sham",!0)}},function(t,e,r){"use strict";var n=r(282).charAt;t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},function(t,e,r){var n=r(60),o=r(43),i=function(t){return function(e,r){var i,a,s=String(o(e)),c=n(r),u=s.length;return c<0||c>=u?t?"":void 0:(i=s.charCodeAt(c))<55296||i>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?t?s.charAt(c):i:t?s.slice(c,c+2):a-56320+(i-55296<<10)+65536}};t.exports={codeAt:i(!1),charAt:i(!0)}},function(t,e,r){var n=r(59),o=Math.floor,i="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,r,c,u,l){var f=r+t.length,d=c.length,p=s;return void 0!==u&&(u=n(u),p=a),i.call(l,p,(function(n,i){var a;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(f);case"<":a=u[i.slice(1,-1)];break;default:var s=+i;if(0===s)return n;if(s>d){var l=o(s/10);return 0===l?n:l<=d?void 0===c[l-1]?i.charAt(1):c[l-1]+i.charAt(1):n}a=c[s-1]}return void 0===a?"":a}))}},function(t,e,r){var n=r(34),o=r(168);t.exports=function(t,e){var r=t.exec;if("function"==typeof r){var i=r.call(t,e);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(t))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},function(t,e,r){r(286);var n=r(287);t.exports=n},function(t,e,r){r(197)},function(t,e,r){r(197),t.exports=r(20)},function(t,e,r){var n=r(289);r(310),r(311),r(312),r(313),t.exports=n},function(t,e,r){r(201),r(297),r(298),r(212),r(213),r(307),r(234),r(183);var n=r(106);t.exports=n.Promise},function(t,e,r){var n=r(20),o=r(57);t.exports=function(t,e){try{o(n,t,e)}catch(r){n[t]=e}return e}},function(t,e,r){var n=r(30);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,r){var n=r(63);t.exports=function(t){if(!n(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e,r){var n=r(42),o=r(153),i=r(294).indexOf,a=r(175);t.exports=function(t,e){var r,s=o(t),c=0,u=[];for(r in s)!n(a,r)&&n(s,r)&&u.push(r);for(;e.length>c;)n(s,r=e[c++])&&(~i(u,r)||u.push(r));return u}},function(t,e,r){var n=r(153),o=r(112),i=r(295),a=function(t){return function(e,r,a){var s,c=n(e),u=o(c.length),l=i(a,u);if(t&&r!=r){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===r)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e,r){var n=r(174),o=Math.max,i=Math.min;t.exports=function(t,e){var r=n(t);return r<0?o(r+e,0):i(r,e)}},function(t,e,r){var n=r(206);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e){},function(t,e,r){"use strict";var n,o,i,a,s=r(33),c=r(90),u=r(20),l=r(76),f=r(207),d=r(93),p=r(233),h=r(173),g=r(109),m=r(300),y=r(63),v=r(74),b=r(180),w=r(208),x=r(154),S=r(301),_=r(182),k=r(209).set,T=r(302),j=r(211),I=r(304),O=r(105),E=r(156),L=r(98),A=r(200),R=r(28),C=r(306),P=r(115),M=r(162),U=R("species"),N="Promise",B=L.get,D=L.set,q=L.getterFor(N),F=f&&f.prototype,$=f,W=F,z=u.TypeError,H=u.document,V=u.process,G=O.f,K=G,J=!!(H&&H.createEvent&&u.dispatchEvent),Y="function"==typeof PromiseRejectionEvent,X=!1,Z=A(N,(function(){var t=w($),e=t!==String($);if(!e&&66===M)return!0;if(c&&!W.finally)return!0;if(M>=51&&/native code/.test(t))return!1;var r=new $((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};return(r.constructor={})[U]=n,!(X=r.then((function(){}))instanceof n)||!e&&C&&!Y})),Q=Z||!S((function(t){$.all(t).catch((function(){}))})),tt=function(t){var e;return!(!y(t)||"function"!=typeof(e=t.then))&&e},et=function(t,e){if(!t.notified){t.notified=!0;var r=t.reactions;T((function(){for(var n=t.value,o=1==t.state,i=0;r.length>i;){var a,s,c,u=r[i++],l=o?u.ok:u.fail,f=u.resolve,d=u.reject,p=u.domain;try{l?(o||(2===t.rejection&&it(t),t.rejection=1),!0===l?a=n:(p&&p.enter(),a=l(n),p&&(p.exit(),c=!0)),a===u.promise?d(z("Promise-chain cycle")):(s=tt(a))?s.call(a,f,d):f(a)):d(n)}catch(t){p&&!c&&p.exit(),d(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&nt(t)}))}},rt=function(t,e,r){var n,o;J?((n=H.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),u.dispatchEvent(n)):n={promise:e,reason:r},!Y&&(o=u["on"+t])?o(n):"unhandledrejection"===t&&I("Unhandled promise rejection",r)},nt=function(t){k.call(u,(function(){var e,r=t.facade,n=t.value;if(ot(t)&&(e=E((function(){P?V.emit("unhandledRejection",n,r):rt("unhandledrejection",r,n)})),t.rejection=P||ot(t)?2:1,e.error))throw e.value}))},ot=function(t){return 1!==t.rejection&&!t.parent},it=function(t){k.call(u,(function(){var e=t.facade;P?V.emit("rejectionHandled",e):rt("rejectionhandled",e,t.value)}))},at=function(t,e,r){return function(n){t(e,n,r)}},st=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,et(t,!0))},ct=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw z("Promise can't be resolved itself");var n=tt(e);n?T((function(){var r={done:!1};try{n.call(e,at(ct,r,t),at(st,r,t))}catch(e){st(r,e,t)}})):(t.value=e,t.state=1,et(t,!1))}catch(e){st({done:!1},e,t)}}};if(Z&&(W=($=function(t){b(this,$,N),v(t),n.call(this);var e=B(this);try{t(at(ct,e),at(st,e))}catch(t){st(e,t)}}).prototype,(n=function(t){D(this,{type:N,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(W,{then:function(t,e){var r=q(this),n=G(_(this,$));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=P?V.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&et(r,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new n,e=B(t);this.promise=t,this.resolve=at(ct,e),this.reject=at(st,e)},O.f=G=function(t){return t===$||t===i?new o(t):K(t)},!c&&"function"==typeof f&&F!==Object.prototype)){a=F.then,X||(d(F,"then",(function(t,e){var r=this;return new $((function(t,e){a.call(r,t,e)})).then(t,e)}),{unsafe:!0}),d(F,"catch",W.catch,{unsafe:!0}));try{delete F.constructor}catch(t){}h&&h(F,W)}s({global:!0,wrap:!0,forced:Z},{Promise:$}),g($,N,!1,!0),m(N),i=l(N),s({target:N,stat:!0,forced:Z},{reject:function(t){var e=G(this);return e.reject.call(void 0,t),e.promise}}),s({target:N,stat:!0,forced:c||Z},{resolve:function(t){return j(c&&this===i?$:this,t)}}),s({target:N,stat:!0,forced:Q},{all:function(t){var e=this,r=G(e),n=r.resolve,o=r.reject,i=E((function(){var r=v(e.resolve),i=[],a=0,s=1;x(t,(function(t){var c=a++,u=!1;i.push(void 0),s++,r.call(e,t).then((function(t){u||(u=!0,i[c]=t,--s||n(i))}),o)})),--s||n(i)}));return i.error&&o(i.value),r.promise},race:function(t){var e=this,r=G(e),n=r.reject,o=E((function(){var o=v(e.resolve);x(t,(function(t){o.call(e,t).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}})},function(t,e,r){"use strict";var n=r(176),o=r(97);t.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},function(t,e,r){"use strict";var n=r(76),o=r(107),i=r(28),a=r(65),s=i("species");t.exports=function(t){var e=n(t),r=o.f;a&&e&&!e[s]&&r(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,r){var n=r(28)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},t(i)}catch(t){}return r}},function(t,e,r){var n,o,i,a,s,c,u,l,f=r(20),d=r(198).f,p=r(209).set,h=r(210),g=r(303),m=r(115),y=f.MutationObserver||f.WebKitMutationObserver,v=f.document,b=f.process,w=f.Promise,x=d(f,"queueMicrotask"),S=x&&x.value;S||(n=function(){var t,e;for(m&&(t=b.domain)&&t.exit();o;){e=o.fn,o=o.next;try{e()}catch(t){throw o?a():i=void 0,t}}i=void 0,t&&t.enter()},h||m||g||!y||!v?w&&w.resolve?((u=w.resolve(void 0)).constructor=w,l=u.then,a=function(){l.call(u,n)}):a=m?function(){b.nextTick(n)}:function(){p.call(f,n)}:(s=!0,c=v.createTextNode(""),new y(n).observe(c,{characterData:!0}),a=function(){c.data=s=!s})),t.exports=S||function(t){var e={fn:t,next:void 0};i&&(i.next=e),o||(o=e,a()),i=e}},function(t,e,r){var n=r(155);t.exports=/web0s(?!.*chrome)/i.test(n)},function(t,e,r){var n=r(20);t.exports=function(t,e){var r=n.console;r&&r.error&&(1===arguments.length?r.error(t):r.error(t,e))}},function(t,e,r){var n=r(20),o=r(208),i=n.WeakMap;t.exports="function"==typeof i&&/native code/.test(o(i))},function(t,e){t.exports="object"==typeof window},function(t,e,r){"use strict";var n=r(33),o=r(90),i=r(207),a=r(30),s=r(76),c=r(182),u=r(211),l=r(93);if(n({target:"Promise",proto:!0,real:!0,forced:!!i&&a((function(){i.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=c(this,s("Promise")),r="function"==typeof t;return this.then(r?function(r){return u(e,t()).then((function(){return r}))}:t,r?function(r){return u(e,t()).then((function(){throw r}))}:t)}}),!o&&"function"==typeof i){var f=s("Promise").prototype.finally;i.prototype.finally!==f&&l(i.prototype,"finally",f,{unsafe:!0})}},function(t,e){t.exports=function(){}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,r){r(201)},function(t,e,r){r(212)},function(t,e,r){"use strict";var n=r(33),o=r(105),i=r(156);n({target:"Promise",stat:!0},{try:function(t){var e=o.f(this),r=i(t);return(r.error?e.reject:e.resolve)(r.value),e.promise}})},function(t,e,r){r(213)},function(t,e,r){"use strict";var n=r(32),o=r(216),i=r(315),a=r(222);function s(t){var e=new i(t),r=o(i.prototype.request,e);return n.extend(r,i.prototype,e),n.extend(r,e),r}var c=s(r(219));c.Axios=i,c.create=function(t){return s(a(c.defaults,t))},c.Cancel=r(223),c.CancelToken=r(328),c.isCancel=r(218),c.all=function(t){return Promise.all(t)},c.spread=r(329),t.exports=c,t.exports.default=c},function(t,e,r){"use strict";var n=r(32),o=r(217),i=r(316),a=r(317),s=r(222);function c(t){this.defaults=t,this.interceptors={request:new i,response:new i}}c.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[a,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)r=r.then(e.shift(),e.shift());return r},c.prototype.getUri=function(t){return t=s(this.defaults,t),o(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(t){c.prototype[t]=function(e,r){return this.request(n.merge(r||{},{method:t,url:e}))}})),n.forEach(["post","put","patch"],(function(t){c.prototype[t]=function(e,r,o){return this.request(n.merge(o||{},{method:t,url:e,data:r}))}})),t.exports=c},function(t,e,r){"use strict";var n=r(32);function o(){this.handlers=[]}o.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},o.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},o.prototype.forEach=function(t){n.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=o},function(t,e,r){"use strict";var n=r(32),o=r(318),i=r(218),a=r(219);function s(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return s(t),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=n.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||a.adapter)(t).then((function(e){return s(t),e.data=o(e.data,e.headers,t.transformResponse),e}),(function(e){return i(e)||(s(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,r){"use strict";var n=r(32);t.exports=function(t,e,r){return n.forEach(r,(function(r){t=r(t,e)})),t}},function(t,e,r){"use strict";var n=r(32);t.exports=function(t,e){n.forEach(t,(function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])}))}},function(t,e,r){"use strict";var n=r(221);t.exports=function(t,e,r){var o=r.config.validateStatus;!o||o(r.status)?t(r):e(n("Request failed with status code "+r.status,r.config,null,r.request,r))}},function(t,e,r){"use strict";t.exports=function(t,e,r,n,o){return t.config=e,r&&(t.code=r),t.request=n,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},function(t,e,r){"use strict";var n=r(323),o=r(324);t.exports=function(t,e){return t&&!n(e)?o(t,e):e}},function(t,e,r){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,r){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,r){"use strict";var n=r(32),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,r,i,a={};return t?(n.forEach(t.split("\n"),(function(t){if(i=t.indexOf(":"),e=n.trim(t.substr(0,i)).toLowerCase(),r=n.trim(t.substr(i+1)),e){if(a[e]&&o.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([r]):a[e]?a[e]+", "+r:r}})),a):a}},function(t,e,r){"use strict";var n=r(32);t.exports=n.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(t){var n=t;return e&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=o(window.location.href),function(e){var r=n.isString(e)?o(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0}},function(t,e,r){"use strict";var n=r(32);t.exports=n.isStandardBrowserEnv()?{write:function(t,e,r,o,i,a){var s=[];s.push(t+"="+encodeURIComponent(e)),n.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),n.isString(o)&&s.push("path="+o),n.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,r){"use strict";var n=r(223);function o(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var r=this;t((function(t){r.reason||(r.reason=new n(t),e(r.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var t;return{token:new o((function(e){t=e})),cancel:t}},t.exports=o},function(t,e,r){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,r){"use strict";var n;r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return o})),function(t){t.openAiModal="master:openIframeAi",t.authToken="master:authToken",t.needLogin="slave:needLogin",t.openLogin="slave:openLogin",t.closeAiModal="slave:closeIframeAi",t.logout="master:logout"}(n||(n={}));const o=new class{constructor(){this.postIframeMessage=t=>{this.$chatai&&this.$chatai.contentWindow.postMessage(t,"*")},this.updateIframe=t=>{this.$chatai=t}}}},function(t,e,r){var n=r(332);t.exports=n},function(t,e,r){r(183);var n=r(333),o=r(97),i=Array.prototype,a={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.values;return t===i||t instanceof Array&&e===i.values||a.hasOwnProperty(o(t))?n:e}},function(t,e,r){var n=r(334);t.exports=n},function(t,e,r){r(167);var n=r(118);t.exports=n("Array").values},function(t,e,r){var n=r(336);t.exports=n},function(t,e,r){var n=r(337);t.exports=n},function(t,e,r){r(338),r(346),r(235);var n=r(106);t.exports=n.URL},function(t,e,r){"use strict";r(234);var n,o=r(33),i=r(65),a=r(236),s=r(20),c=r(229),u=r(93),l=r(180),f=r(42),d=r(339),p=r(341),h=r(184).codeAt,g=r(344),m=r(109),y=r(235),v=r(98),b=s.URL,w=y.URLSearchParams,x=y.getState,S=v.set,_=v.getterFor("URL"),k=Math.floor,T=Math.pow,j=/[A-Za-z]/,I=/[\d+-.A-Za-z]/,O=/\d/,E=/^0x/i,L=/^[0-7]+$/,A=/^\d+$/,R=/^[\dA-Fa-f]+$/,C=/[\0\t\n\r #%/:<>?@[\\\]^|]/,P=/[\0\t\n\r #/:<>?@[\\\]^|]/,M=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,U=/[\t\n\r]/g,N=function(t,e){var r,n,o;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return"Invalid host";if(!(r=D(e.slice(1,-1))))return"Invalid host";t.host=r}else if(G(t)){if(e=g(e),C.test(e))return"Invalid host";if(null===(r=B(e)))return"Invalid host";t.host=r}else{if(P.test(e))return"Invalid host";for(r="",n=p(e),o=0;o<n.length;o++)r+=H(n[o],F);t.host=r}},B=function(t){var e,r,n,o,i,a,s,c=t.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(e=c.length)>4)return t;for(r=[],n=0;n<e;n++){if(""==(o=c[n]))return t;if(i=10,o.length>1&&"0"==o.charAt(0)&&(i=E.test(o)?16:8,o=o.slice(8==i?1:2)),""===o)a=0;else{if(!(10==i?A:8==i?L:R).test(o))return t;a=parseInt(o,i)}r.push(a)}for(n=0;n<e;n++)if(a=r[n],n==e-1){if(a>=T(256,5-e))return null}else if(a>255)return null;for(s=r.pop(),n=0;n<r.length;n++)s+=r[n]*T(256,3-n);return s},D=function(t){var e,r,n,o,i,a,s,c=[0,0,0,0,0,0,0,0],u=0,l=null,f=0,d=function(){return t.charAt(f)};if(":"==d()){if(":"!=t.charAt(1))return;f+=2,l=++u}for(;d();){if(8==u)return;if(":"!=d()){for(e=r=0;r<4&&R.test(d());)e=16*e+parseInt(d(),16),f++,r++;if("."==d()){if(0==r)return;if(f-=r,u>6)return;for(n=0;d();){if(o=null,n>0){if(!("."==d()&&n<4))return;f++}if(!O.test(d()))return;for(;O.test(d());){if(i=parseInt(d(),10),null===o)o=i;else{if(0==o)return;o=10*o+i}if(o>255)return;f++}c[u]=256*c[u]+o,2!=++n&&4!=n||u++}if(4!=n)return;break}if(":"==d()){if(f++,!d())return}else if(d())return;c[u++]=e}else{if(null!==l)return;f++,l=++u}}if(null!==l)for(a=u-l,u=7;0!=u&&a>0;)s=c[u],c[u--]=c[l+a-1],c[l+--a]=s;else if(8!=u)return;return c},q=function(t){var e,r,n,o;if("number"==typeof t){for(e=[],r=0;r<4;r++)e.unshift(t%256),t=k(t/256);return e.join(".")}if("object"==typeof t){for(e="",n=function(t){for(var e=null,r=1,n=null,o=0,i=0;i<8;i++)0!==t[i]?(o>r&&(e=n,r=o),n=null,o=0):(null===n&&(n=i),++o);return o>r&&(e=n,r=o),e}(t),r=0;r<8;r++)o&&0===t[r]||(o&&(o=!1),n===r?(e+=r?":":"::",o=!0):(e+=t[r].toString(16),r<7&&(e+=":")));return"["+e+"]"}return t},F={},$=d({},F,{" ":1,'"':1,"<":1,">":1,"`":1}),W=d({},$,{"#":1,"?":1,"{":1,"}":1}),z=d({},W,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),H=function(t,e){var r=h(t,0);return r>32&&r<127&&!f(e,t)?t:encodeURIComponent(t)},V={ftp:21,file:null,http:80,https:443,ws:80,wss:443},G=function(t){return f(V,t.scheme)},K=function(t){return""!=t.username||""!=t.password},J=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},Y=function(t,e){var r;return 2==t.length&&j.test(t.charAt(0))&&(":"==(r=t.charAt(1))||!e&&"|"==r)},X=function(t){var e;return t.length>1&&Y(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},Z=function(t){var e=t.path,r=e.length;!r||"file"==t.scheme&&1==r&&Y(e[0],!0)||e.pop()},Q=function(t){return"."===t||"%2e"===t.toLowerCase()},tt={},et={},rt={},nt={},ot={},it={},at={},st={},ct={},ut={},lt={},ft={},dt={},pt={},ht={},gt={},mt={},yt={},vt={},bt={},wt={},xt=function(t,e,r,o){var i,a,s,c,u,l=r||tt,d=0,h="",g=!1,m=!1,y=!1;for(r||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(M,"")),e=e.replace(U,""),i=p(e);d<=i.length;){switch(a=i[d],l){case tt:if(!a||!j.test(a)){if(r)return"Invalid scheme";l=rt;continue}h+=a.toLowerCase(),l=et;break;case et:if(a&&(I.test(a)||"+"==a||"-"==a||"."==a))h+=a.toLowerCase();else{if(":"!=a){if(r)return"Invalid scheme";h="",l=rt,d=0;continue}if(r&&(G(t)!=f(V,h)||"file"==h&&(K(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=h,r)return void(G(t)&&V[t.scheme]==t.port&&(t.port=null));h="","file"==t.scheme?l=pt:G(t)&&o&&o.scheme==t.scheme?l=nt:G(t)?l=st:"/"==i[d+1]?(l=ot,d++):(t.cannotBeABaseURL=!0,t.path.push(""),l=vt)}break;case rt:if(!o||o.cannotBeABaseURL&&"#"!=a)return"Invalid scheme";if(o.cannotBeABaseURL&&"#"==a){t.scheme=o.scheme,t.path=o.path.slice(),t.query=o.query,t.fragment="",t.cannotBeABaseURL=!0,l=wt;break}l="file"==o.scheme?pt:it;continue;case nt:if("/"!=a||"/"!=i[d+1]){l=it;continue}l=ct,d++;break;case ot:if("/"==a){l=ut;break}l=yt;continue;case it:if(t.scheme=o.scheme,a==n)t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.query=o.query;else if("/"==a||"\\"==a&&G(t))l=at;else if("?"==a)t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.query="",l=bt;else{if("#"!=a){t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.path.pop(),l=yt;continue}t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.query=o.query,t.fragment="",l=wt}break;case at:if(!G(t)||"/"!=a&&"\\"!=a){if("/"!=a){t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,l=yt;continue}l=ut}else l=ct;break;case st:if(l=ct,"/"!=a||"/"!=h.charAt(d+1))continue;d++;break;case ct:if("/"!=a&&"\\"!=a){l=ut;continue}break;case ut:if("@"==a){g&&(h="%40"+h),g=!0,s=p(h);for(var v=0;v<s.length;v++){var b=s[v];if(":"!=b||y){var w=H(b,z);y?t.password+=w:t.username+=w}else y=!0}h=""}else if(a==n||"/"==a||"?"==a||"#"==a||"\\"==a&&G(t)){if(g&&""==h)return"Invalid authority";d-=p(h).length+1,h="",l=lt}else h+=a;break;case lt:case ft:if(r&&"file"==t.scheme){l=gt;continue}if(":"!=a||m){if(a==n||"/"==a||"?"==a||"#"==a||"\\"==a&&G(t)){if(G(t)&&""==h)return"Invalid host";if(r&&""==h&&(K(t)||null!==t.port))return;if(c=N(t,h))return c;if(h="",l=mt,r)return;continue}"["==a?m=!0:"]"==a&&(m=!1),h+=a}else{if(""==h)return"Invalid host";if(c=N(t,h))return c;if(h="",l=dt,r==ft)return}break;case dt:if(!O.test(a)){if(a==n||"/"==a||"?"==a||"#"==a||"\\"==a&&G(t)||r){if(""!=h){var x=parseInt(h,10);if(x>65535)return"Invalid port";t.port=G(t)&&x===V[t.scheme]?null:x,h=""}if(r)return;l=mt;continue}return"Invalid port"}h+=a;break;case pt:if(t.scheme="file","/"==a||"\\"==a)l=ht;else{if(!o||"file"!=o.scheme){l=yt;continue}if(a==n)t.host=o.host,t.path=o.path.slice(),t.query=o.query;else if("?"==a)t.host=o.host,t.path=o.path.slice(),t.query="",l=bt;else{if("#"!=a){X(i.slice(d).join(""))||(t.host=o.host,t.path=o.path.slice(),Z(t)),l=yt;continue}t.host=o.host,t.path=o.path.slice(),t.query=o.query,t.fragment="",l=wt}}break;case ht:if("/"==a||"\\"==a){l=gt;break}o&&"file"==o.scheme&&!X(i.slice(d).join(""))&&(Y(o.path[0],!0)?t.path.push(o.path[0]):t.host=o.host),l=yt;continue;case gt:if(a==n||"/"==a||"\\"==a||"?"==a||"#"==a){if(!r&&Y(h))l=yt;else if(""==h){if(t.host="",r)return;l=mt}else{if(c=N(t,h))return c;if("localhost"==t.host&&(t.host=""),r)return;h="",l=mt}continue}h+=a;break;case mt:if(G(t)){if(l=yt,"/"!=a&&"\\"!=a)continue}else if(r||"?"!=a)if(r||"#"!=a){if(a!=n&&(l=yt,"/"!=a))continue}else t.fragment="",l=wt;else t.query="",l=bt;break;case yt:if(a==n||"/"==a||"\\"==a&&G(t)||!r&&("?"==a||"#"==a)){if(".."===(u=(u=h).toLowerCase())||"%2e."===u||".%2e"===u||"%2e%2e"===u?(Z(t),"/"==a||"\\"==a&&G(t)||t.path.push("")):Q(h)?"/"==a||"\\"==a&&G(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&Y(h)&&(t.host&&(t.host=""),h=h.charAt(0)+":"),t.path.push(h)),h="","file"==t.scheme&&(a==n||"?"==a||"#"==a))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==a?(t.query="",l=bt):"#"==a&&(t.fragment="",l=wt)}else h+=H(a,W);break;case vt:"?"==a?(t.query="",l=bt):"#"==a?(t.fragment="",l=wt):a!=n&&(t.path[0]+=H(a,F));break;case bt:r||"#"!=a?a!=n&&("'"==a&&G(t)?t.query+="%27":t.query+="#"==a?"%23":H(a,F)):(t.fragment="",l=wt);break;case wt:a!=n&&(t.fragment+=H(a,$))}d++}},St=function(t){var e,r,n=l(this,St,"URL"),o=arguments.length>1?arguments[1]:void 0,a=String(t),s=S(n,{type:"URL"});if(void 0!==o)if(o instanceof St)e=_(o);else if(r=xt(e={},String(o)))throw TypeError(r);if(r=xt(s,a,null,e))throw TypeError(r);var c=s.searchParams=new w,u=x(c);u.updateSearchParams(s.query),u.updateURL=function(){s.query=String(c)||null},i||(n.href=kt.call(n),n.origin=Tt.call(n),n.protocol=jt.call(n),n.username=It.call(n),n.password=Ot.call(n),n.host=Et.call(n),n.hostname=Lt.call(n),n.port=At.call(n),n.pathname=Rt.call(n),n.search=Ct.call(n),n.searchParams=Pt.call(n),n.hash=Mt.call(n))},_t=St.prototype,kt=function(){var t=_(this),e=t.scheme,r=t.username,n=t.password,o=t.host,i=t.port,a=t.path,s=t.query,c=t.fragment,u=e+":";return null!==o?(u+="//",K(t)&&(u+=r+(n?":"+n:"")+"@"),u+=q(o),null!==i&&(u+=":"+i)):"file"==e&&(u+="//"),u+=t.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},Tt=function(){var t=_(this),e=t.scheme,r=t.port;if("blob"==e)try{return new St(e.path[0]).origin}catch(t){return"null"}return"file"!=e&&G(t)?e+"://"+q(t.host)+(null!==r?":"+r:""):"null"},jt=function(){return _(this).scheme+":"},It=function(){return _(this).username},Ot=function(){return _(this).password},Et=function(){var t=_(this),e=t.host,r=t.port;return null===e?"":null===r?q(e):q(e)+":"+r},Lt=function(){var t=_(this).host;return null===t?"":q(t)},At=function(){var t=_(this).port;return null===t?"":String(t)},Rt=function(){var t=_(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Ct=function(){var t=_(this).query;return t?"?"+t:""},Pt=function(){return _(this).searchParams},Mt=function(){var t=_(this).fragment;return t?"#"+t:""},Ut=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(i&&c(_t,{href:Ut(kt,(function(t){var e=_(this),r=String(t),n=xt(e,r);if(n)throw TypeError(n);x(e.searchParams).updateSearchParams(e.query)})),origin:Ut(Tt),protocol:Ut(jt,(function(t){var e=_(this);xt(e,String(t)+":",tt)})),username:Ut(It,(function(t){var e=_(this),r=p(String(t));if(!J(e)){e.username="";for(var n=0;n<r.length;n++)e.username+=H(r[n],z)}})),password:Ut(Ot,(function(t){var e=_(this),r=p(String(t));if(!J(e)){e.password="";for(var n=0;n<r.length;n++)e.password+=H(r[n],z)}})),host:Ut(Et,(function(t){var e=_(this);e.cannotBeABaseURL||xt(e,String(t),lt)})),hostname:Ut(Lt,(function(t){var e=_(this);e.cannotBeABaseURL||xt(e,String(t),ft)})),port:Ut(At,(function(t){var e=_(this);J(e)||(""==(t=String(t))?e.port=null:xt(e,t,dt))})),pathname:Ut(Rt,(function(t){var e=_(this);e.cannotBeABaseURL||(e.path=[],xt(e,t+"",mt))})),search:Ut(Ct,(function(t){var e=_(this);""==(t=String(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",xt(e,t,bt)),x(e.searchParams).updateSearchParams(e.query)})),searchParams:Ut(Pt),hash:Ut(Mt,(function(t){var e=_(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",xt(e,t,wt)):e.fragment=null}))}),u(_t,"toJSON",(function(){return kt.call(this)}),{enumerable:!0}),u(_t,"toString",(function(){return kt.call(this)}),{enumerable:!0}),b){var Nt=b.createObjectURL,Bt=b.revokeObjectURL;Nt&&u(St,"createObjectURL",(function(t){return Nt.apply(b,arguments)})),Bt&&u(St,"revokeObjectURL",(function(t){return Bt.apply(b,arguments)}))}m(St,"URL"),o({global:!0,forced:!a,sham:!i},{URL:St})},function(t,e,r){"use strict";var n=r(65),o=r(30),i=r(230),a=r(340),s=r(228),c=r(96),u=r(179),l=Object.assign,f=Object.defineProperty;t.exports=!l||o((function(){if(n&&1!==l({b:1},l(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol();return t[r]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=l({},t)[r]||"abcdefghijklmnopqrst"!=i(l({},e)).join("")}))?function(t,e){for(var r=c(t),o=arguments.length,l=1,f=a.f,d=s.f;o>l;)for(var p,h=u(arguments[l++]),g=f?i(h).concat(f(h)):i(h),m=g.length,y=0;m>y;)p=g[y++],n&&!d.call(h,p)||(r[p]=h[p]);return r}:l},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){"use strict";var n=r(108),o=r(96),i=r(342),a=r(231),s=r(112),c=r(343),u=r(157);t.exports=function(t){var e,r,l,f,d,p,h=o(t),g="function"==typeof this?this:Array,m=arguments.length,y=m>1?arguments[1]:void 0,v=void 0!==y,b=u(h),w=0;if(v&&(y=n(y,m>2?arguments[2]:void 0,2)),null==b||g==Array&&a(b))for(r=new g(e=s(h.length));e>w;w++)p=v?y(h[w],w):h[w],c(r,w,p);else for(d=(f=b.call(h)).next,r=new g;!(l=d.call(f)).done;w++)p=v?i(f,y,[l.value,w],!0):l.value,c(r,w,p);return r.length=w,r}},function(t,e,r){var n=r(39),o=r(232);t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(e){throw o(t),e}}},function(t,e,r){"use strict";var n=r(177),o=r(107),i=r(92);t.exports=function(t,e,r){var a=n(e);a in t?o.f(t,a,i(0,r)):t[a]=r}},function(t,e,r){"use strict";var n=/[^\0-\u007E]/,o=/[.\u3002\uFF0E\uFF61]/g,i="Overflow: input needs wider integers to process",a=Math.floor,s=String.fromCharCode,c=function(t){return t+22+75*(t<26)},u=function(t,e,r){var n=0;for(t=r?a(t/700):t>>1,t+=a(t/e);t>455;n+=36)t=a(t/35);return a(n+36*t/(t+38))},l=function(t){var e,r,n=[],o=(t=function(t){for(var e=[],r=0,n=t.length;r<n;){var o=t.charCodeAt(r++);if(o>=55296&&o<=56319&&r<n){var i=t.charCodeAt(r++);56320==(64512&i)?e.push(((1023&o)<<10)+(1023&i)+65536):(e.push(o),r--)}else e.push(o)}return e}(t)).length,l=128,f=0,d=72;for(e=0;e<t.length;e++)(r=t[e])<128&&n.push(s(r));var p=n.length,h=p;for(p&&n.push("-");h<o;){var g=2147483647;for(e=0;e<t.length;e++)(r=t[e])>=l&&r<g&&(g=r);var m=h+1;if(g-l>a((2147483647-f)/m))throw RangeError(i);for(f+=(g-l)*m,l=g,e=0;e<t.length;e++){if((r=t[e])<l&&++f>2147483647)throw RangeError(i);if(r==l){for(var y=f,v=36;;v+=36){var b=v<=d?1:v>=d+26?26:v-d;if(y<b)break;var w=y-b,x=36-b;n.push(s(c(b+w%x))),y=a(w/x)}n.push(s(c(y))),d=u(f,m,h==p),f=0,++h}}++f,++l}return n.join("")};t.exports=function(t){var e,r,i=[],a=t.toLowerCase().replace(o,".").split(".");for(e=0;e<a.length;e++)r=a[e],i.push(n.test(r)?"xn--"+l(r):r);return i.join(".")}},function(t,e,r){var n=r(39),o=r(157);t.exports=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return n(e.call(t))}},function(t,e){},function(t,e,r){"use strict";var n,o=r(348),i=r(18),a=r(5),s=r(16),c=r(12),u=r(104),l=r(17),f=r(24),d=r(19).f,p=r(72),h=r(61),g=r(7),m=r(69),y=a.Int8Array,v=y&&y.prototype,b=a.Uint8ClampedArray,w=b&&b.prototype,x=y&&p(y),S=v&&p(v),_=Object.prototype,k=_.isPrototypeOf,T=g("toStringTag"),j=m("TYPED_ARRAY_TAG"),I=o&&!!h&&"Opera"!==u(a.opera),O=!1,E={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},L={BigInt64Array:8,BigUint64Array:8},A=function(t){if(!s(t))return!1;var e=u(t);return c(E,e)||c(L,e)};for(n in E)a[n]||(I=!1);if((!I||"function"!=typeof x||x===Function.prototype)&&(x=function(){throw TypeError("Incorrect invocation")},I))for(n in E)a[n]&&h(a[n],x);if((!I||!S||S===_)&&(S=x.prototype,I))for(n in E)a[n]&&h(a[n].prototype,S);if(I&&p(w)!==S&&h(w,S),i&&!c(S,T))for(n in O=!0,d(S,T,{get:function(){return s(this)?this[j]:void 0}}),E)a[n]&&l(a[n],j,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:I,TYPED_ARRAY_TAG:O&&j,aTypedArray:function(t){if(A(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(h){if(k.call(x,t))return t}else for(var e in E)if(c(E,n)){var r=a[e];if(r&&(t===r||k.call(r,t)))return t}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r){if(i){if(r)for(var n in E){var o=a[n];if(o&&c(o.prototype,t))try{delete o.prototype[t]}catch(t){}}S[t]&&!r||f(S,t,r?e:I&&v[t]||e)}},exportTypedArrayStaticMethod:function(t,e,r){var n,o;if(i){if(h){if(r)for(n in E)if((o=a[n])&&c(o,t))try{delete o[t]}catch(t){}if(x[t]&&!r)return;try{return f(x,t,r?e:I&&x[t]||e)}catch(t){}}for(n in E)!(o=a[n])||o[t]&&!r||f(o,t,e)}},isView:function(t){if(!s(t))return!1;var e=u(t);return"DataView"===e||c(E,e)||c(L,e)},isTypedArray:A,TypedArray:x,TypedArrayPrototype:S}},function(t,e){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(t,e){var r=Math.floor,n=function(t,e){var a=t.length,s=r(a/2);return a<8?o(t,e):i(n(t.slice(0,s),e),n(t.slice(s),e),e)},o=function(t,e){for(var r,n,o=t.length,i=1;i<o;){for(n=i,r=t[i];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==i++&&(t[n]=r)}return t},i=function(t,e,r){for(var n=t.length,o=e.length,i=0,a=0,s=[];i<n||a<o;)i<n&&a<o?s.push(r(t[i],e[a])<=0?t[i++]:e[a++]):s.push(i<n?t[i++]:e[a++]);return s};t.exports=n},function(t,e,r){var n=r(35).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},function(t,e,r){var n=r(35);t.exports=/MSIE|Trident/.test(n)},function(t,e,r){var n=r(35).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},function(t,e,r){var n=r(16),o=r(61);t.exports=function(t,e,r){var i,a;return o&&"function"==typeof(i=e.constructor)&&i!==r&&n(a=i.prototype)&&a!==r.prototype&&o(t,a),t}},function(t,e,r){var n=r(16),o=r(34),i=r(7)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},function(t,e,r){"use strict";var n=r(45),o=r(356).start,i=r(357)("trimStart"),a=i?function(){return o(this)}:"".trimStart;n({target:"String",proto:!0,forced:i},{trimStart:a,trimLeft:a})},function(t,e,r){var n=r(43),o="["+r(238)+"]",i=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),s=function(t){return function(e){var r=String(n(e));return 1&t&&(r=r.replace(i,"")),2&t&&(r=r.replace(a,"")),r}};t.exports={start:s(1),end:s(2),trim:s(3)}},function(t,e,r){var n=r(10),o=r(238);t.exports=function(t){return n((function(){return!!o[t]()||"​᠎"!="​᠎"[t]()||o[t].name!==t}))}},function(t,e,r){var n=r(359);t.exports=n},function(t,e,r){var n=r(360),o=Array.prototype;t.exports=function(t){var e=t.reduce;return t===o||t instanceof Array&&e===o.reduce?n:e}},function(t,e,r){r(361);var n=r(118);t.exports=n("Array").reduce},function(t,e,r){"use strict";var n=r(33),o=r(267).left,i=r(250),a=r(162),s=r(115);n({target:"Array",proto:!0,forced:!i("reduce")||!s&&a>79&&a<83},{reduce:function(t){return o(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(t,e,r){var n=r(363);t.exports=n},function(t,e,r){var n=r(364),o=String.prototype;t.exports=function(t){var e=t.trim;return"string"==typeof t||t===o||t instanceof String&&e===o.trim?n:e}},function(t,e,r){r(365);var n=r(118);t.exports=n("String").trim},function(t,e,r){"use strict";var n=r(33),o=r(366).trim;n({target:"String",proto:!0,forced:r(367)("trim")},{trim:function(){return o(this)}})},function(t,e,r){var n=r(116),o="["+r(239)+"]",i=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),s=function(t){return function(e){var r=String(n(e));return 1&t&&(r=r.replace(i,"")),2&t&&(r=r.replace(a,"")),r}};t.exports={start:s(1),end:s(2),trim:s(3)}},function(t,e,r){var n=r(30),o=r(239);t.exports=function(t){return n((function(){return!!o[t]()||"​᠎"!="​᠎"[t]()||o[t].name!==t}))}},,,,,,,,,,,,,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return g}));var n=r(89),o=r.n(n),i=(r(11),r(13),r(8),r(4)),a=r(395),s=r.n(a),c=r(262),u=r(15),l=r(9),f=r(161),d=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};const p=[{text:i18n("todo_welcome"),todoId:"todo-id1dtkk87it2iepal6dv4hr2uig0c",time:Date.now(),updatetime:0,done:!1}];class h extends c.a{constructor(){super(...arguments),this.todoList=p,this.currenetState="done",this.listLength=localStorage.getItem("todo-length")||0}toggleState(t){this.currenetState=t}get needNotificationPermission(){return this.todoList.some(t=>!!t.dueDate)}diffRemote(t){const e=t=>{if(null==t?void 0:t.updatetime){const e={updatetime:void 0};return t.done=!!t.done,Object.assign(Object.assign({},t),e)}},r=s()(t.todoList||[],e),n=s()(Object(i.j)(this.todoList),e);return!i.d.structural(r,n)}mergeRemote(t,e){if(t.todoList)if(e)this.todoList=t.todoList;else{const e=this.todoList,r=t.todoList,{result:n}=u.a.mergeArray(e,r,"todoId");this.todoList=n}}edit(t){this.todoList=this.todoList.map(e=>e.todoId===t?Object.assign(Object.assign({},e),{edit:!e.edit}):e)}get hasDoneTodo(){return this.todoList.filter(t=>t.done).length}async addTodo(t){if(!o()(t).call(t).length)return;const e={done:!1,time:+new Date,todoId:u.a.randomId("todo-"),updatetime:await u.a.getTimestamp(),text:t};Object(i.i)(()=>{this.todoList=[e,...this.todoList]})}removeTodo(){this.todoList=this.todoList.filter(t=>!t.done)}deleteTodo(t){this.todoList=this.todoList.filter(e=>e.todoId!==t)}async toggleTodo(t){const e=await u.a.getTimestamp();Object(i.i)(()=>{this.todoList=this.todoList.map(r=>r.todoId===t?Object.assign(Object.assign({},r),{done:!r.done,updatetime:e}):Object.assign({},r))})}async updateTodo(t,e){const r=await u.a.getTimestamp();Object(i.i)(()=>{this.todoList=this.todoList.map(n=>n.todoId===t?Object.assign(Object.assign(Object.assign({},n),e),{updatetime:r,edit:!1}):Object.assign({},n))})}removeTime(t){this.todoList=this.todoList.map(e=>e.todoId===t?Object.assign(Object.assign({},e),{dueDate:"",dueTime:"",dueTimestamp:null}):e)}}d([i.g],h.prototype,"todoList",void 0),d([i.g],h.prototype,"currenetState",void 0),d([i.b],h.prototype,"toggleState",null),d([i.e],h.prototype,"needNotificationPermission",null),d([i.b],h.prototype,"mergeRemote",null),d([i.b],h.prototype,"edit",null),d([i.g],h.prototype,"listLength",void 0),d([i.e],h.prototype,"hasDoneTodo",null),d([i.b],h.prototype,"addTodo",null),d([i.b],h.prototype,"removeTodo",null),d([i.b],h.prototype,"deleteTodo",null),d([i.b],h.prototype,"toggleTodo",null),d([i.b],h.prototype,"updateTodo",null),d([i.b],h.prototype,"removeTime",null);const g=new h;g.initSyncStore(l.k,["todoList","listLength"],{}),g.initAutoBackup("todo",["todoList"]),Object(i.c)(()=>{if(g.firstSync){const t=g.todoList.filter(t=>!t.done).length;Object(i.i)(()=>{g.listLength=t}),localStorage.setItem("todo-length",t+"")}});let m=!1;Object(i.c)(()=>{if(g.firstSync){const t=g.todoList.filter(t=>!t.done&&t.dueTimestamp>Date.now()).map(t=>Object(i.j)(t));if(!m)return void(m=!0);f.slave.postTask("slave:change-todo",t)}}),Object(i.c)(()=>{let t=!1;const{todoList:e}=g;for(let r=0;r<e.length-1;r++){const{done:n}=e[r],o=e[r+1].done;if(n&&!o){t=!0;break}}t&&(Object(i.i)(()=>{const t=e.filter(t=>t.done),r=e.filter(t=>!t.done);g.todoList=[...r,...t]}),t=!1)},{delay:300})},,,,,,,,function(t,e,r){"use strict";r.r(e);var n=r(6),o=r.n(n),i=(r(11),r(13),r(196)),a=r(467),s=r(1),c=r(4),u=s.b`.i-bubble {
  position: fixed;
  top: 80px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 99999999;
}
.i-bubble.network-error .i-bubble-wrap,
.i-bubble.error .i-bubble-wrap,
.i-bubble.success .i-bubble-wrap {
  padding-left: 30px;
  padding-right: 32px;
}
.i-bubble + .i-bubble-mask {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(255, 255, 255, 0.7);
  z-index: 999999;
  display: none;
  opacity: 0;
  transition: opacity 150ms ease-in 0s;
}
.i-bubble.loading + .i-bubble-mask {
  display: block;
}
.i-bubble.loading.popup + .i-bubble-mask {
  opacity: 1;
}
.i-bubble .i-bubble-wrap {
  margin: 0 auto;
  box-sizing: border-box;
  padding: 12px 20px;
  background-color: #333;
  box-shadow: 0px 2px 20px 0px rgba(0, 0, 0, 0.1);
  border-radius: 4px;
  display: flex;
  flex-flow: row nowrap;
  align-items: center;
  font-size: 14px;
  line-height: 1.4em;
  transition: opacity 0.15s cubic-bezier(0, 0, 0.2, 1) 0ms, transform 0.15s cubic-bezier(0, 0, 0.2, 1) 0ms;
  transform: scale(0.8);
  opacity: 0;
  box-shadow: 0 3px 5px -1px rgba(0, 0, 0, 0.2), 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12);
  max-width: 600px;
}
.i-bubble.popup .i-bubble-wrap {
  transform: scale(1);
  opacity: 1;
}
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}
.i-bubble .icon {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
  margin-right: 12px;
  display: none;
}
.i-bubble .icon.icon-loading {
  animation: spin 700ms linear infinite;
}
.i-bubble .i-bubble-text {
  color: #e4e4e4;
  display: block;
  box-sizing: border-box;
  flex-grow: 1;
  width: 100%;
  word-break: break-all;
}
.i-bubble .i-bubble-button {
  width: 70px;
  height: 28px;
  color: #4caf50;
  background-color: initial;
  border: none;
  padding: 0;
  cursor: pointer;
  transition: color, background-color 200ms;
  border-radius: 4px;
  outline: none;
  max-width: 180px;
  margin-left: 46px;
  flex-shrink: 0;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.i-bubble .i-bubble-button:hover {
  background-color: rgba(76, 175, 80, 0.14);
}
`,l=r(15),f=r(27),d=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};const p=Object(f.a)("network-error.png",!1),h=Object(f.a)("error.png",!1),g=Object(f.a)("success.png",!1),m=Object(f.a)("loading.png",!1);class y extends i.a{constructor(){super(...arguments),this.popup=!1,this.showButton=!1}static _timeToHideHandler(t){if(t.showButton){const e=t.shadowRoot.querySelector(".i-bubble .i-bubble-button");e.onclick&&(e.onclick=null)}const e=t.shadowRoot.querySelector(".i-bubble > .i-bubble-wrap");let r=!1;const n=()=>{t.onmouseenter=null,t.onmouseleave=null,document.body.contains(t)&&document.body.removeChild(t),r=!0};e.addEventListener("transitionend",n,{once:!0}),e.addEventListener("transitioncancel",n,{once:!0}),setTimeout(()=>{r||n()},150),t.setPopup(!1)}static _setTimerToHide(t,e){this._clearTimerToHide(t),t.hideTimer=setTimeout(()=>this._timeToHideHandler(t),e)}static _clearTimerToHide(t){t.hideTimer&&(clearTimeout(t.hideTimer),t.hideTimer=null)}static _messageMisc(t,e,r){this.setText(t),document.body.appendChild(this),window.customElements.whenDefined("i-bubble").then(()=>(this.offsetWidth,this.setPopup(!0),new o.a(t=>requestAnimationFrame(t)))).then(()=>{r&&r(this)}),e>0&&y._setTimerToHide(this,e)}static message(t,e){const r=document.createElement("i-bubble");r.setType("message"),e=null!=e?e:this.duration,this._messageMisc.call(r,t,e)}static networkError(t,e){const r=document.createElement("i-bubble");r.setType("network-error"),e=null!=e?e:this.duration,this._messageMisc.call(r,t,e)}static success(t,e){const r=document.createElement("i-bubble");r.setType("success"),e=null!=e?e:this.duration,this._messageMisc.call(r,t,e)}static error(t,e){const r=document.createElement("i-bubble");r.setType("error"),e=null!=e?e:this.duration,this._messageMisc.call(r,t,e)}static popupLogin(t){const e=this.popup(i18n("reqeust_login_message"),{showButton:!0,btnValue:i18n("to_login"),type:"message",onBtnClick:null!=t?t:()=>{a.userStore.openModal()}}),r=Date.now();let n=this.duration2;e.onmouseenter=()=>{n=Date.now()-r,y._clearTimerToHide(e)},e.onmouseleave=()=>{y._setTimerToHide(e,n)}}static popupAddHomeAI(t){const e=this.popup(i18n("add_infinity_ai"),{showButton:!0,btnValue:i18n("add_now"),type:"message",onBtnClick:t,duration:8e3}),r=Date.now();let n=this.duration2;e.onmouseenter=()=>{n=Date.now()-r,y._clearTimerToHide(e)},e.onmouseleave=()=>{y._setTimerToHide(e,n)}}static popupLoading(t){const e=this.popup(i18n("wallpaper_loading"),{duration:0,showButton:!0,btnValue:i18n("cancel"),type:"loading",onBtnClick:t});return()=>setTimeout(()=>this._timeToHideHandler(e),y.waitForReady)}static loading(t){const e=this.popup(t,{type:"loading",duration:0});return()=>setTimeout(()=>this._timeToHideHandler(e),y.waitForReady)}static popup(t,e){const{duration:r=this.duration2,btnValue:n,onBtnClick:o,type:i,showButton:a}=e,s=document.createElement("i-bubble");return s.setType(i),n&&s.setBtnValue(n),a&&s.setShowButton(a),this._messageMisc.call(s,t,r,()=>{if(s.showButton){s.shadowRoot.querySelector(".i-bubble .i-bubble-button").onclick=t=>{o&&o(t),this._timeToHideHandler(s)}}}),s}firstUpdated(){const t="\n      background-size: cover;\n      background-repeat: no-repeat;\n      background-position: center;\n      display: block;\n    ",e=document.createElement("style");e.appendChild(document.createTextNode(`\n      .i-bubble .icon.icon-network-error{\n        background-image: url(${p});${t}\n      }\n      .i-bubble .icon.icon-success{\n        background-image: url(${g});${t}\n      }\n      .i-bubble .icon.icon-error{\n        background-image: url(${h});${t}\n      }\n      .i-bubble .icon.icon-loading{\n        background-image: url(${m});${t}\n      }\n      `)),this.shadowRoot.appendChild(e)}render(){return s.e`
      <section class="i-bubble ${this.type}${this.popup?" popup":""}">
        <section class="i-bubble-wrap">
          <i class="icon icon-${this.type}"></i>
          <span class="i-bubble-text">${this.text}</span>
          <input
            class="i-bubble-button"
            type="button"
            .value=${this.btnValue}
            style="${this.showButton?"":"display: none;"}"
          />
        </section>
      </section>
      <section class="i-bubble-mask" @click=${l.a.stopBubble}></section>
    `}setType(t){this.type=t}setText(t){this.text=t}setBtnValue(t){this.btnValue=t}setPopup(t){this.popup=t}setShowButton(t){this.showButton=t}}y.duration=3e3,y.duration2=5e3,y.waitForReady=1e3/60,y.styles=u,d([c.g],y.prototype,"type",void 0),d([c.g],y.prototype,"text",void 0),d([c.g],y.prototype,"btnValue",void 0),d([c.g],y.prototype,"popup",void 0),d([c.g],y.prototype,"showButton",void 0),d([c.b],y.prototype,"setType",null),d([c.b],y.prototype,"setText",null),d([c.b],y.prototype,"setBtnValue",null),d([c.b],y.prototype,"setPopup",null),d([c.b],y.prototype,"setShowButton",null),window.customElements.define("i-bubble",y);e.default=y},function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return i}));r(11),r(13);class n{constructor(){this._caches={},this._setCaches=t=>(...e)=>{this._caches[t]=e}}}const o=[],i=t=>new Proxy(t,{set:(t,e,r)=>null===r?(t[e]=r,!0):"function"==typeof t[e]?(console.warn("失败：重复注册"),!0):(t[e]=r,o.includes(e)&&delete t._caches[e],t._caches.hasOwnProperty(e)&&(t[e](...t._caches[e]),delete t._caches[e]),!0),get:(t,e)=>"function"==typeof t[e]?t[e]:t._setCaches(e)})},function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r(6),o=r.n(n),i=(r(8),r(0)),a=r(75);async function s(){if(i.s||i.r){if("granted"!==await new o.a(t=>{!function(){try{Notification.requestPermission().then()}catch(t){return!1}return!0}()?Notification.requestPermission(t):Notification.requestPermission().then(t)}))throw new Error}else await a.a.request(["notifications"])}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";r.r(e),r.d(e,"userStore",(function(){return T}));r(8),r(41),r(11),r(13),r(21);var n=r(6),o=r.n(n),i=r(396),a=r.n(i),s=r(99),c=r.n(s),u=r(4),l=r(262),f=r(23),d=r(0),p=r(94),h=r(22),g=r.n(h),m=r(164),y=r(161),v=r(469),b=r(468),w=r(9),x=r(29),S=r(330),_=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};class k extends l.a{constructor(){super(),this.isExpired=!1,this.isLogin=!1,this.token="",this.userInfo={},this.refreshToken="",this.mobileloginExpire=0,this.mobileloginUrl="",this.areaCodeList=[],this.thirdList=[{type:f.g.ThirdLoginType.wechat,title:i18n("wechat"),bindStatus:!1,nick_name:""},{type:f.g.ThirdLoginType.qq,title:"QQ",bindStatus:!1,nick_name:""},{type:f.g.ThirdLoginType.google,title:"Google",bindStatus:!1,nick_name:""},{type:f.g.ThirdLoginType.facebook,title:"Facebook",bindStatus:!1,abondon:!0,nick_name:""},{type:f.g.ThirdLoginType.weibo,title:i18n("xin_lang_weibo"),bindStatus:!1,abondon:!0,nick_name:""}],this.userProfilePromise=o.a.resolve(),this.wpColorUpdate=0,this.logining=!1,this.modalOpen=!1,this.removeAccountDisableSec=10,this.removeAccountDisableTimer=null,this.showLoginTipModal=!1,this.profileModal=!1,this.syncListModal=!1,this.isModify=!1,this.openMiniWindow=t=>{const e=Math.floor(window.screenY+200),r=Math.floor(window.screenX+window.innerWidth/3);return window.open(t,"_blank",`top=${e},left=${r},height=600,width=770,menubar=no,toolbar=yes,location=yes,status=no,resizable=no`)},this.binding=!1,this.bindListener=t=>{let e;const r=()=>{e=setTimeout(()=>{t.postMessage({from:"origin_login"},"*"),t.closed?(window.removeEventListener("message",n),this.binding=!1):r()},500)};r();const n=async t=>{try{if(!t.data&&!t.data.key&&"login"!==t.data.key)return;clearTimeout(e),window.removeEventListener("message",n,!1);const{message:r}=t.data;let o;switch(r.type){case f.g.ThirdLoginType.weibo:case f.g.ThirdLoginType.google:case f.g.ThirdLoginType.facebook:case f.g.ThirdLoginType.wechat:case f.g.ThirdLoginType.qq:o=await f.g.bindThird(r.type,r.code)}if(o.error)return void p.message.error(o.error.message);this.bindSuccess("third",o.data),p.message.success(i18n("bind_success"))}catch(t){p.message.error(i18n("network_error"))}finally{this.binding=!1}};window.addEventListener("message",n,!1)},this.countdownTimer=null,this.checkMobileUrlTimer=null,this.isShowLogoutConfirm=!1,this.showConfirmOpt="",this.isShowSecondProfileModal=!1,this.secondProfileModalType=null,this.clearAllData=!1,this.loading=!1,this.URL=d.x}get thirdAccountList(){const t={};return this.userInfo.third_account&&this.userInfo.third_account.forEach(e=>{t[e.platform]=e}),this.thirdList.map(e=>t[e.type]?Object.assign(Object.assign({},e),{bindStatus:!0,nick_name:t[e.type].nick_name}):e)}setWpColorUpdate(t){this.wpColorUpdate=t}closeModal(){this.modalOpen=!1}openModal(){this.modalOpen=!0}toggleLoginTipModal(){this.showLoginTipModal=!this.showLoginTipModal}closeLoginTipModal(){this.showLoginTipModal=!1}closeProfileModal(){this.profileModal=!1}openProfileModal(){this.profileModal=!0,this.openModify()}closeSyncListModal(){this.syncListModal=!1}openSyncListModal(){this.syncListModal=!0}openModify(){this.isModify=!0}async modifyProfile(t){try{const e=await f.g.updateProfile(t);Object(u.i)(()=>{if(e&&0===e.code){const{user:{name:t,gender:r,avatar:n}}=e.data;this.userInfo.name=t,this.userInfo.gender=r,this.userInfo.avatar=n}else p.message.error(i18n("update_data_failure"))})}catch(t){p.message.error(t.message)}}async getUserProfile(){const t=await f.g.getUserProfile();Object(u.i)(()=>{if(t)if(0===t.code&&this.isLogin){const{gender:e,name:r,avatar:n}=t.data;this.userInfo.name=r,this.userInfo.gender=e,this.userInfo.avatar=n,this.userInfo["auto-backup"]=t.data["auto-backup"],this.userInfo["wp-color-update"]=t.data["wp-color-update"],this.userInfo["backup-version-v2"]=t.data["backup-version-v2"],this.userInfo.email=t.data.email,this.userInfo.phone_number=t.data.phone_number,this.userInfo.third_account=t.data.third_account}else 3012===t.code&&(p.message.error(t.message),this.exitAccount())})}async getAreaCodeList(){const{data:t,error:e}=await f.g.getAreaCodeList();e||(null==t?void 0:t.length)&&Object(u.i)(()=>{this.areaCodeList=t})}async updateAvatar(t){try{return await f.g.uploadAvatar(t)}catch(t){p.message.error(i18n("upload_avatar_failure"))}}closeModify(){this.isModify=!1}thirdPartyLogin(t){let e;switch(this.logining=!0,t){case"facebook":e=this.URL+"/login/facebook";break;case"google":e=this.URL+"/login/google";break;case"qq":e=this.URL+"/login/qq";break;case"sina":e=this.URL+"/login/weibo";break;case"wechat":e=this.URL+"/login/wechat"}setTimeout(async()=>{const t=this.openMiniWindow(e);if(this.opener=t,d.n)return;const r=setInterval(()=>{t.postMessage({from:"origin_login"},"*")},300),n=t=>{if(!t.data&&!t.data.key&&"login"!==t.data.key)return;clearInterval(r),window.removeEventListener("message",n,!1);const{message:e}=t.data;this.login3rdSuccess(e)};window.addEventListener("message",n,!1)},300)}get isLastId(){const t=this.userInfo||{},e=t.third_account||[];let r=0;return t.email&&++r,t.phone_number&&++r,r+=e.length,r<=1}thirdPartyBind(t){if(this.binding)return;let e;switch(this.binding=!0,t){case f.g.ThirdLoginType.weibo:case f.g.ThirdLoginType.google:case f.g.ThirdLoginType.facebook:case f.g.ThirdLoginType.wechat:case f.g.ThirdLoginType.qq:e=this.openMiniWindow(`${d.x}/bind/to?type=${t}`),this.bindListener(e)}}async thirdPartyUnbind(t){let e;switch(t){case f.g.ThirdLoginType.weibo:case f.g.ThirdLoginType.google:case f.g.ThirdLoginType.facebook:case f.g.ThirdLoginType.qq:case f.g.ThirdLoginType.wechat:e=await f.g.unbindThird(t)}return e}bindSuccess(t,e){if("email"===t)this.userInfo.email=e;else if("phone"===t)this.userInfo.phone_number=e;else if("third"===t){const t=this.userInfo.third_account||[];t.push(e),this.userInfo.third_account=t}}unbindSuccess(t,e){if("email"===t)this.userInfo.email=null;else if("phone"===t)this.userInfo.phone_number=null;else if("third"===t){const t=this.userInfo.third_account||[],r=t.findIndex(t=>t.platform===e);if(-1===r)return;t.splice(r,1),this.userInfo.third_account=t}}async login(t){const e={};if(e.password=t.password,"email"===t.type)e.email=t.account;else{if("phone"!==t.type)return;e.phone_number=t.account}const r=await f.g.login(e);Object(u.i)(()=>{if(!r||0!==r.code)throw p.message.error(r.message),new Error(r.code);this.loginEmailSuccess(r.data.user),this.setToken(r.data),this.setRefreshToken(r.data.refreshToken)})}async getMobileloginUrl(t=!1){if(t&&(this.mobileloginUrl="",this.mobileloginExpire=0),m.f){const{data:t,error:e}=await f.g.getMobileloginUrl();if(e)return void Object(u.i)(()=>{this.mobileloginExpire=0});Object(u.i)(()=>{this.mobileloginUrl=t.url,this.mobileloginExpire=Math.floor(t.expire/1e3)}),this.checkMobileloginUrl(t.code,t.type),0!==this.mobileloginExpire&&(this.countdownTimer=setInterval(()=>{Object(u.i)(()=>{this.mobileloginExpire-=1}),this.mobileloginExpire<=0&&clearInterval(this.countdownTimer)},1e3))}}async checkMobileloginUrl(t,e,r=5e3){m.f&&this.mobileloginExpire>3&&(clearTimeout(this.checkMobileUrlTimer),this.checkMobileUrlTimer=setTimeout(async()=>{const{data:n}=await f.g.checkMobileloginUrl(t,e);if(n&&n.expired)return clearInterval(this.countdownTimer),void Object(u.i)(()=>{this.mobileloginExpire=0});this.checkMobileloginUrl(t,e,r)},r))}async loginEmailSuccess(t){this.logining=!1,this.closeModal(),this.isLogin=!0,this.userInfo=t,this.isExpired=!1,this.settingLoginSuccess()}setUserData(t){this.logining=!1,this.closeModal(),this.isLogin=t.isLogin,this.userInfo=t,this.isExpired=!1;["token","refreshToken","isLogin"].forEach(t=>delete this.userInfo[t])}async login3rdSuccess(t){if(!t||!Object.keys(t).length)return void this.cancelLogin();const e=t["login-type"];if(["qq","wechat"].includes(e)){const e=await f.g.loginWithUid(t);0===e.code?Object(u.i)(()=>{this.setUserData(t),this.setToken(e.data),this.setRefreshToken(e.data.refreshToken)}):3006===e.code&&p.message.error("获取token失败")}else this.setUserData(t),this.setToken(t),this.setRefreshToken(t.refreshToken);this.settingLoginSuccess()}settingLoginSuccess(){b.b.changeSetting("view","isHideIcp",!0)}cancelLogin(){var t;this.logining=!1,null===(t=this.opener)||void 0===t||t.close()}toggleClear(t){this.clearAllData=t}logout(t){this.isShowLogoutConfirm=!0,this.showConfirmOpt=t,"remove"===t&&(this.removeAccountDisableSec=10,clearInterval(this.removeAccountDisableTimer),this.removeAccountDisableTimer=setInterval(()=>{Object(u.i)(()=>{this.removeAccountDisableSec-=1,0===this.removeAccountDisableSec&&(clearInterval(this.removeAccountDisableTimer),this.removeAccountDisableTimer=null)})},1e3))}showSecondProfileModal(t){this.isShowSecondProfileModal=!0,this.secondProfileModalType=t}closeSecondProfileModal(){this.isShowSecondProfileModal=!1,this.secondProfileModalType=null}async exitAccount(){this.loading=!0,S.b.postIframeMessage({type:S.a.logout,logoutWithClear:this.clearAllData}),await new o.a(t=>{setTimeout(()=>{this.clearAllData?this.clearAllStore().then(t):t(null)},200)}),Object(u.i)(()=>{this.isLogin=!1,this.userInfo={},this.clearToken()}),this.clearAllData?window.location.reload():(Object(u.i)(()=>this.loading=!1),this.closeLogoutConfirm(),this.closeProfileModal(),d.s&&v.pluginStore.hideLast())}async deleteAccount(){this.loading=!0;const t=await f.g.deleteAccount();Object(u.i)(()=>{t&&0===t.code?this.exitAccount():(3012===t.code&&this.exitAccount(),p.message.error(t.message)),this.loading=!1})}restoreKeysToStorage(t){t.forEach(({data:t,key:e})=>localStorage.setItem(e,t))}async clearAllStore(){this.stopAutoBackupReaction(),this.stopToStorageReaction(),await w.a.deleteAllForLogout();const t=[x.c,x.d];await this._deleteIdb(t),y.slave.sendMessage("tabs-reload")}async _deleteIdb(t){const e=await new o.a(t=>a()(g.a).call(g.a,(e,r)=>t(r)));await o.a.all(t.map(t=>new o.a(r=>{const n=t.split("->");if(1===n.length)return e.includes(t)?void g.a.removeItem(t,r):void r(null);r(null),e.includes(n[0])&&g.a.getItem(n[0],t=>{c()(n).call(n,(t,e,r)=>(r===n.length-1&&Reflect.deleteProperty(t,e),t[e]),t),g.a.setItem(n[0],r)})})))}_clearLocalStorage(t){const e=new Map;t.filter(Boolean).forEach(t=>{const r=t.split("->");if(1===r.length)return void e.set(t,localStorage.getItem(t));const n=JSON.parse(localStorage.getItem(r[0]));r.slice(1).forEach((t,e)=>{const o=0===e?n:n[r[e]];for(const e in o)t!==e&&Reflect.deleteProperty(o,e)}),e.set(r[0],JSON.stringify(n))}),localStorage.clear();for(const t of a()(e).call(e))localStorage.setItem(t,e.get(t))}closeLogoutConfirm(){this.isShowLogoutConfirm=!1}setToken(t){this.token=t.token,S.b.postIframeMessage({type:S.a.authToken,authToken:T.token})}setRefreshToken(t){this.refreshToken=t}clearToken(){this.token="",this.refreshToken=""}setOutdated(){this.isExpired=!0,this.isLogin=!1}toggleReLogin(){this.isExpired=!1}getPhoneNumber(){if(this.userInfo.phone_number){const t=this.userInfo.phone_number+"";return`${t.slice(0,3)}****${t.slice(-4)}`}return""}}_([u.g],k.prototype,"isExpired",void 0),_([u.g],k.prototype,"isLogin",void 0),_([u.g],k.prototype,"token",void 0),_([u.g],k.prototype,"userInfo",void 0),_([u.g],k.prototype,"refreshToken",void 0),_([u.g],k.prototype,"mobileloginExpire",void 0),_([u.g],k.prototype,"mobileloginUrl",void 0),_([u.g],k.prototype,"areaCodeList",void 0),_([u.e],k.prototype,"thirdAccountList",null),_([u.g],k.prototype,"wpColorUpdate",void 0),_([u.b],k.prototype,"setWpColorUpdate",null),_([u.g],k.prototype,"opener",void 0),_([u.g],k.prototype,"logining",void 0),_([u.g],k.prototype,"modalOpen",void 0),_([u.g],k.prototype,"removeAccountDisableSec",void 0),_([u.g],k.prototype,"removeAccountDisableTimer",void 0),_([u.b],k.prototype,"closeModal",null),_([u.b],k.prototype,"openModal",null),_([u.g],k.prototype,"showLoginTipModal",void 0),_([u.b],k.prototype,"toggleLoginTipModal",null),_([u.b],k.prototype,"closeLoginTipModal",null),_([u.g],k.prototype,"profileModal",void 0),_([u.g],k.prototype,"syncListModal",void 0),_([u.b],k.prototype,"closeProfileModal",null),_([u.b],k.prototype,"openProfileModal",null),_([u.b],k.prototype,"closeSyncListModal",null),_([u.b],k.prototype,"openSyncListModal",null),_([u.g],k.prototype,"isModify",void 0),_([u.b],k.prototype,"openModify",null),_([u.b],k.prototype,"modifyProfile",null),_([u.b],k.prototype,"getUserProfile",null),_([u.b],k.prototype,"getAreaCodeList",null),_([u.b],k.prototype,"updateAvatar",null),_([u.b],k.prototype,"closeModify",null),_([u.b],k.prototype,"thirdPartyLogin",null),_([u.g],k.prototype,"binding",void 0),_([u.e],k.prototype,"isLastId",null),_([u.b],k.prototype,"thirdPartyBind",null),_([u.b],k.prototype,"thirdPartyUnbind",null),_([u.b],k.prototype,"bindSuccess",null),_([u.b],k.prototype,"unbindSuccess",null),_([u.b],k.prototype,"login",null),_([u.b],k.prototype,"getMobileloginUrl",null),_([u.b],k.prototype,"checkMobileloginUrl",null),_([u.b],k.prototype,"loginEmailSuccess",null),_([u.b],k.prototype,"setUserData",null),_([u.b],k.prototype,"login3rdSuccess",null),_([u.b],k.prototype,"cancelLogin",null),_([u.g],k.prototype,"isShowLogoutConfirm",void 0),_([u.g],k.prototype,"showConfirmOpt",void 0),_([u.g],k.prototype,"isShowSecondProfileModal",void 0),_([u.g],k.prototype,"secondProfileModalType",void 0),_([u.g],k.prototype,"clearAllData",void 0),_([u.b],k.prototype,"toggleClear",null),_([u.b],k.prototype,"logout",null),_([u.b],k.prototype,"showSecondProfileModal",null),_([u.b],k.prototype,"closeSecondProfileModal",null),_([u.g],k.prototype,"loading",void 0),_([u.b],k.prototype,"exitAccount",null),_([u.b],k.prototype,"deleteAccount",null),_([u.b],k.prototype,"clearAllStore",null),_([u.b],k.prototype,"closeLogoutConfirm",null),_([u.b],k.prototype,"setToken",null),_([u.b],k.prototype,"setRefreshToken",null),_([u.b],k.prototype,"clearToken",null),_([u.b],k.prototype,"setOutdated",null),_([u.b],k.prototype,"toggleReLogin",null);const T=new k;Object(u.c)(()=>{T.firstSync&&(T.isLogin?(T.closeModal(),T.toggleReLogin(),T.userProfilePromise=T.getUserProfile()):(T.closeProfileModal(),T.closeSecondProfileModal()))}),T.initSyncStore(w.l,["userInfo","isLogin","token","refreshToken","wpColorUpdate"]),w.j.injectUserStore(T),w.j.injectSendTabsSync(t=>{y.slave.sendMessage("tabs-sync",t)})},function(t,e,r){"use strict";r.d(e,"b",(function(){return m})),r.d(e,"a",(function(){return v}));r(11),r(13),r(21),r(8),r(41);var n=r(4),o=r(262),i=r(15),a=r(75),s=r(121),c=r(268),u=r(0),l=r(384),f=r(394),d=r(264),p=r(9),h=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};class g extends o.a{constructor(){super(...arguments),this.localSettings={},this.innerWidth=window.innerWidth,this.innerHeight=window.innerHeight,this.iconSpaceWidth=0,this.iconSpaceHeight=0,this.setting=this.init(),this.updatetime=0,this.permission={topUseful:-1,topBookmark:-1,searchSuggest:-1,gmailNotice:-1,gmailCount:-1,todoNotice:-1},this.logs=new Map,this.permissionMapper={topBookmark:[["bookmarks"],["chrome://favicon/"]],topUseful:[["topSites"],["chrome://favicon/"]],searchSuggest:[[],["https://suggestion.baidu.com/","https://google.com/"]],gmailNotice:[["notifications"],["https://mail.google.com/"]],gmailCount:[[],["https://mail.google.com/"]],todoNotice:[["notifications"],[]]},this.showSettingHomeModal=!1,this.webClickName=""}init(t={}){return{notice:Object.assign({},s.b.notice),link:Object.assign({},s.b.link),view:Object.assign({},s.b.view),layout:Object.assign({},s.b.layout),animation:Object.assign({},s.b.animation),icon:Object.assign({},s.b.icon),search:Object.assign({},s.b.search),font:Object.assign({},s.b.font),_v1Setting:t}}get withPermissionTopUseful(){return this.setting.view.topUseful&&1===this.permission.topUseful}get withPermissionTopBookmark(){return this.setting.view.topBookmark&&1===this.permission.topBookmark}get withPermissionSearchSuggest(){return this.setting.search.searchSuggest&&1===this.permission.searchSuggest}get needPermissionList(){const t=[],{view:e,notice:r,search:n}=this.setting,{topUseful:o,topBookmark:i,searchSuggest:a,gmailNotice:s,gmailCount:c,todoNotice:f}=this.permission;return u.m&&n.searchSuggest&&1!==a&&t.push({key:"searchSuggest",title:i18n("permission_serch_suggest_title"),content:i18n("permission_serch_suggest_content")}),u.m&&r.gmail&&1!==s&&t.push({key:"gmailNotice",title:i18n("permission_gmail_notice_title"),content:i18n("permission_gmail_notice_content")}),u.m&&r.gmailNumber&&1!==c&&t.push({key:"gmailCount",title:i18n("permission_gmail_num_title"),content:i18n("permission_gmail_num_content")}),u.s||u.r||!e.topBookmark||1===i||t.push({key:"topBookmark",title:i18n("permission_top_bookmark_title"),content:i18n("permission_top_bookmark_content")}),u.s||u.r||!e.topUseful||1===o||t.push({key:"topUseful",title:i18n("permission_top_useful_title"),content:i18n("permission_top_useful_content")}),l.a.needNotificationPermission&&1!==f&&((u.s||u.r)&&"denied"===Notification.permission||t.push({key:"todoNotice",title:i18n("permission_todo_notice_title"),content:i18n("permission_todo_notice_content")})),t}get sideRatio(){return this.setting.view.scaleSide}reset(){this.setting=this.init(this.setting._v1Setting),this.changeLayoutCb(this.setting.layout.col,this.setting.layout.row)}diffRemote(t){return!n.d.structural(t.setting||{},this.setting)}sendSettingValue(){Object.keys(this.localSettings).length&&(d.a.sendEvent({settingValue:this.localSettings}),this.localSettings={})}async mergeRemote(t){const e=t.setting;if(!t.setting)return;const r=this.setting;this.setting={notice:Object.assign(Object.assign({},r.notice),e.notice),link:Object.assign(Object.assign({},r.link),e.link),view:Object.assign(Object.assign({},r.view),e.view),layout:Object.assign(Object.assign({},r.layout),e.layout),animation:Object.assign(Object.assign({},r.animation),e.animation),icon:Object.assign(Object.assign({},r.icon),e.icon),search:Object.assign(Object.assign({},r.search),e.search),font:Object.assign(Object.assign({},r.font),e.font),_v1Setting:e._v1Setting};const o=await i.a.getTimestamp();Object(n.i)(()=>{this.updatetime=o})}sendSettingLog(t,e){this.logs.has(t)&&clearTimeout(this.logs.get(t)),this.logs.set(t,setTimeout(()=>{d.a.sendEvent({settingAction:{[t]:e}}),this.logs.delete(t)},2e3))}async changeSetting(t,e,r){if(this.setting[t][e]===r)return;this.setting[t][e]=r,"layout"===t&&("custom"===e&&!0===r||"customItem"===e)&&(this.setting.layout.row=this.setting.layout.customItem[0],this.setting.layout.col=this.setting.layout.customItem[1],this.changeLayoutCb(this.setting.layout.col,this.setting.layout.row));let o=`${t}_${e}`,a=r;"layout"!==t||"col"!==e&&"row"!==e||(this.changeLayoutCb(this.setting.layout.col,this.setting.layout.row),o="layout",a=this.setting.layout.row+"*"+this.setting.layout.col),this.sendSettingLog(o,a),this.localSettings[o]=a;const s=await i.a.getTimestamp();Object(n.i)(()=>{this.updatetime=s}),this.changeSettingEffect(t,e,r)}changeLayoutCb(t,e){console.log("col, row",t,e),console.log("changeLayoutCb 未注册")}changeLayout(t){this.changeLayoutCb=t}changeSettingEffect(t,e,r){switch(!0){case"topBookmark"===e:r&&this.requestPermission("topBookmark",!0);break;case"topUseful"===e:r&&this.requestPermission("topUseful",!0);break;case"notice"===t&&"gmail"===e:r&&this.requestPermission("gmailNotice",!0);break;case"notice"===t&&"gmailNumber"===e:r&&this.requestPermission("gmailCount",!0);break;case"searchSuggest"===e:r&&this.requestPermission("searchSuggest",!0)}}async checkPermission(t){if(u.s||u.r){switch(t){case"todoNotice":case"gmailNotice":return void("granted"===Notification.permission?this.permission[t]=1:"default"===Notification.permission?this.permission[t]=-1:this.permission[t]=0)}if(u.s)return}if(1===this.permission[t]){const e=this.permissionMapper[t];try{if(await a.a.has(e[0],e[1]))return}catch(t){console.log(t)}Object(n.i)(()=>{this.permission[t]=-1})}const e=this.permissionMapper[t];try{await a.a.has(e[0],e[1])&&Object(n.i)(()=>{this.permission[t]=1})}catch(t){}}async requestPermission(t,e=!1){if((u.s||u.r)&&["todoNotice","gmailNotice"].includes(t))return await Object(f.a)(),void Object(n.i)(()=>{this.permission.todoNotice=1,this.permission.gmailNotice=1});const r=this.permissionMapper[t];if(e||0!==this.permission[t]&&1!==this.permission[t])try{await a.a.request(r[0],r[1]),Object(n.i)(()=>{this.permission[t]=1}),"gmailNotice"===t&&this.checkPermission("todoNotice")}catch(e){e&&"REJECT"===e.message&&Object(n.i)(()=>{this.permission[t]=0})}}async requestAllPermission(){if(u.s||u.r)return await Object(f.a)(),void Object(n.i)(()=>{this.permission.todoNotice=1,this.permission.gmailNotice=1});const t=[[],[]];this.needPermissionList.forEach(e=>{const r=this.permissionMapper[e.key];t[0].push(...r[0]),r&&t[1].push(...r[1])});try{await a.a.request(t[0],t[1]),Object(n.i)(()=>{this.needPermissionList.forEach(t=>{this.permission[t.key]=1})})}catch(t){Object(n.i)(()=>{this.needPermissionList.forEach(t=>{this.permission[t.key]=0})})}}resetPermission(t){this.permission[t]=-1}setIconSpace(t){this.setting.icon.scale=t.iconScale,this.setting.layout.colGap=t.colGap,this.setting.layout.rowGap=t.rowGap,this.setting.search.scale=t.searchScale}openSearchSuggest(){this.setting.search.searchSuggest?this.requestPermission("searchSuggest",!0):this.setting.search.searchSuggest=!0}get sideScaleRatio(){return this.setting.view.scaleSide}toggleShowSettingHome(t){this.setting.view.isShowHomepageBtn=!t}toggleSettingHomeModal(){this.webClickName="",this.showSettingHomeModal=!this.showSettingHomeModal}closeSettingHomeModal(){this.showSettingHomeModal=!1}setWebClickName(t){this.webClickName=t}}h([n.g],g.prototype,"innerWidth",void 0),h([n.g],g.prototype,"innerHeight",void 0),h([n.g],g.prototype,"iconSpaceWidth",void 0),h([n.g],g.prototype,"iconSpaceHeight",void 0),h([n.g],g.prototype,"setting",void 0),h([n.g],g.prototype,"updatetime",void 0),h([n.g],g.prototype,"permission",void 0),h([n.e],g.prototype,"withPermissionTopUseful",null),h([n.e],g.prototype,"withPermissionTopBookmark",null),h([n.e],g.prototype,"withPermissionSearchSuggest",null),h([n.e],g.prototype,"needPermissionList",null),h([n.e],g.prototype,"sideRatio",null),h([n.b],g.prototype,"reset",null),h([n.b],g.prototype,"mergeRemote",null),h([n.b],g.prototype,"changeSetting",null),h([n.b],g.prototype,"checkPermission",null),h([n.b],g.prototype,"requestPermission",null),h([n.b],g.prototype,"requestAllPermission",null),h([n.b],g.prototype,"resetPermission",null),h([n.b],g.prototype,"setIconSpace",null),h([n.b],g.prototype,"openSearchSuggest",null),h([n.e],g.prototype,"sideScaleRatio",null),h([n.b],g.prototype,"toggleShowSettingHome",null),h([n.g],g.prototype,"showSettingHomeModal",void 0),h([n.b],g.prototype,"toggleSettingHomeModal",null),h([n.b],g.prototype,"closeSettingHomeModal",null),h([n.g],g.prototype,"webClickName",void 0),h([n.b],g.prototype,"setWebClickName",null);const m=new g;m.initSyncStore(p.h,["setting","permission","updatetime"],s.b),m.initAutoBackup("setting",["setting"]),Object(n.c)(()=>{m.firstSync&&m.setting.view.topBookmark&&m.checkPermission("topBookmark")},{delay:50}),Object(n.c)(()=>{m.firstSync&&m.setting.view.topUseful&&m.checkPermission("topUseful")},{delay:50}),Object(n.c)(()=>{m.firstSync&&m.setting.notice.gmail&&m.checkPermission("gmailNotice")},{delay:50}),Object(n.c)(()=>{l.a.firstSync&&l.a.needNotificationPermission&&m.checkPermission("todoNotice")},{delay:50}),Object(n.c)(()=>{m.firstSync&&m.setting.notice.gmailNumber&&m.checkPermission("gmailCount")},{delay:50}),Object(n.c)(()=>{m.firstSync&&m.setting.search.searchSuggest&&m.checkPermission("searchSuggest")},{delay:50}),Object(n.c)(()=>{m.firstSync&&1===m.permission.gmailNotice&&i.a.send({key:"bg-notice-gmail-permission",data:!0})}),Object(n.c)(()=>{if(m.firstSync){const{gmail:t,gmailVoice:e,gmailNumber:r}=m.setting.notice,{gmailCount:n,gmailNotice:o}=m.permission;i.a.send({key:"bg-notice-gmail-updated",data:{gmail:t&&1===o,gmailVoice:e,gmailNumber:r&&(1===o||1===n)}})}},{delay:100}),Object(n.c)(()=>{if(m.firstSync){const t={"--side-ratio":m.sideRatio,"--main-ratio":m.setting.view.scaleMain,"--icon-radius":Math.round(100*m.setting.icon.radius)+"%","--icon-font-color":m.setting.font.color,"--icon-font-size":Math.ceil(Math.max(m.setting.font.size*m.setting.view.scaleMain,12))+"px","--icon-opacity":m.setting.icon.opacity,"--icon-visible":m.setting.icon.isHideIconName?"hidden":"visible","--search-radius":""+m.setting.search.radius,"--search-opacity":m.setting.search.opacity};i.a.setStyle(t)}},{delay:50}),Object(n.c)(()=>{if(m.firstSync){let t=0,e=20;m.withPermissionTopBookmark&&(t+=36),m.withPermissionTopUseful&&(e+=26);const r={"--top-bar-height":t+"px","--settings-icon-top-offset":e+"px"};i.a.setStyle(r)}});const y=t=>{const e={"--search-height":t.searchHeight,"--search-width":t.searchWidth,"--search-margin-top":t.searchMarginTop,"--search-margin-bottom":t.searchMarginBottom,"--search-ratio":t.searchRatio,"--icon-box-width":t.iconBoxWidth,"--icon-box-height":t.iconBoxHeight,"--icon-one-height":t.iconOneHeight,"--icon-width":t.iconWidth,"--mini-icon-padding":t.miniIconPadding,"--icon-ratio":t.iconRatio,"--icon-row":m.setting.layout.row,"--icon-col":m.setting.layout.col,"--main-icons-margin":t.iconsMargin};i.a.setStyle(e)},v=(t=!0)=>{const e={row:m.setting.layout.row,col:m.setting.layout.col,rowGap:m.setting.layout.rowGap,colGap:m.setting.layout.colGap,iconScale:m.setting.icon.scale,searchScale:m.setting.search.scale,innerHeight:innerHeight,innerWidth:innerWidth,miniMode:m.setting.icon.miniMode,fontSize:m.setting.font.size,topUseful:m.withPermissionTopUseful,topBookmark:m.withPermissionTopBookmark,mainRatio:m.setting.view.scaleMain};if(t)requestIdleCallback(()=>{const t=Object(c.a)(e);y(t)});else{const t=Object(c.a)(e);y(t)}};Object(n.c)(()=>{m.firstSync&&v(!1)},{delay:40}),window.addEventListener("resize",i.a.throttle(()=>{v(!1)},56))},function(t,e,r){"use strict";r.r(e),r.d(e,"pluginStore",(function(){return l}));r(11),r(13),r(8);var n=r(4),o=r(75),i=r(393);class a extends i.a{opened(t){}}const s=Object(i.b)(new a);var c=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};class u{constructor(){this.pluginsMap={"infinity://weather":"side-weather","infinity://todos":"side-todos","infinity://notes":"side-notes","infinity://history":"side-history","infinity://bookmarks":"side-bookmarks","infinity://extension":"side-extension","infinity://chrome-apps":"chrome-apps","infinity://wallpaper":"wallpaper","infinity://settings":"side-profile",search:"side-search",profile:"side-profile",editIcon:"side-editicon","side-tutorial":"side-tutorial","infinity://chatai":"chatai"},this.pluginsTags={"side-weather":!1,"side-todos":!1,"side-notes":!1,"side-history":!1,"side-bookmarks":!1,"side-extension":!1,"chrome-apps":!1,"side-profile":!1,"side-search":!1,"side-editicon":!1,"side-tutorial":!1,wallpaper:!1,chatai:!1},this.pluginViews=[],this.focusRepair=!1,Object(n.h)(()=>this.pluginViews.map(t=>t),([t])=>{s.opened(t)})}initDom(t){this.pluginsTags[t]=!0}async show(t){if(this.pluginViews.includes(t))return;const e=this.pluginsMap[t];if(!1===this.pluginsTags[e])try{await this.requestPermission(e),Object(n.i)(()=>{this.pluginsTags[e]=!0,this.pluginViews.push(t)})}catch(t){}else this.pluginViews.push(t)}async showRepair(){this.focusRepair=!0,this.show("profile"),localStorage.setItem("user-checkout-old-data","true")}async showRepairBadVersion(){this.focusRepair=!0,this.show("profile")}blurRepair(){this.focusRepair=!1}requestPermission(t){switch(t){case"side-bookmarks":return o.a.request(["bookmarks"],["chrome://favicon/"]);case"side-extension":case"chrome-apps":return o.a.request(["management"]);case"side-history":return o.a.request(["history"],["chrome://favicon/"])}}hideLast(){const t=this.pluginViews.pop();return 0===this.pluginViews.length&&document.getElementsByTagName("newtab-main")[0].shadowRoot.querySelector(".swiper-content").style.setProperty("transform","none"),t}}c([n.g],u.prototype,"pluginsTags",void 0),c([n.b],u.prototype,"initDom",null),c([n.g],u.prototype,"pluginViews",void 0),c([n.g],u.prototype,"focusRepair",void 0),c([n.b],u.prototype,"show",null),c([n.b],u.prototype,"showRepair",null),c([n.b],u.prototype,"showRepairBadVersion",null),c([n.b],u.prototype,"blurRepair",null),c([n.b],u.prototype,"hideLast",null);const l=new u},,function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r(95),o=r(113);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const i=new WeakMap,a=Object(o.e)(t=>e=>{if(!(e instanceof o.b))throw new Error("unsafeHTML can only be used in text bindings");const r=i.get(e);if(void 0!==r&&Object(n.h)(t)&&t===r.value&&e.value===r.fragment)return;const a=document.createElement("template");a.innerHTML=t;const s=document.importNode(a.content,!0);e.setValue(s),i.set(e,{value:t,fragment:s})})},function(t,e,r){t.exports=r.p+"images/error.f782e7c.png"},function(t,e,r){t.exports=r.p+"images/remind.896ff6f.png"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";r.r(e),r.d(e,"FindPassword",(function(){return y}));var n=r(89),o=r.n(n),i=(r(8),r(1)),a=(r(494),r(471)),s=r(186),c=r(23),u=r(94),l=r(2),f=r(15),d=r(0),p=i.b`.wrapper {
  display: flex;
  height: 100%;
  width: 100%;
  justify-content: center;
  align-items: center;
}
.wrapper .container {
  display: flex;
}
.wrapper .form {
  box-sizing: border-box;
  width: 450px;
  height: 495px;
  padding: 60px;
  background: #f9f9f9;
  border-radius: 6px 0px 0px 6px;
}
.wrapper .bg {
  width: 400px;
  height: 495px;
}
.wrapper .bg img {
  width: 100%;
  height: 100%;
}
.large-title {
  margin: 0;
  margin-bottom: 2px;
  font-size: 30px;
  font-weight: 600;
  color: #333;
  line-height: 42px;
}
.large-title + p {
  margin: 0;
  color: #333;
  font-size: 16px;
  font-weight: 300;
  line-height: 22px;
}
.form-control {
  margin-top: 40px;
}
.form-control infinito-button {
  --button-color: #333;
  margin-top: 26px;
  width: 100%;
  height: 52px;
}
.form-control .cancel {
  display: block;
  margin: 0;
  font-size: 16px;
  color: #333;
  text-decoration: none;
  text-align: center;
  cursor: pointer;
}
infinito-input {
  --border-color: #999;
  margin-bottom: 24px;
}
.radio-control {
  display: flex;
  align-items: center;
}
.radio-control > span {
  font-size: 14px;
  margin-right: 24px;
}
.radio-control infinito-radio-group {
  flex: 1;
}
.radio-control .radio-content {
  display: flex;
}
.radio-control .radio-content p {
  margin: 0;
  margin-right: 6px;
}
.email-wrapper {
  display: flex;
  margin-bottom: 24px;
}
.email-wrapper infinito-input {
  margin: 0;
  flex: 1;
}
.email-wrapper infinito-button {
  --button-color: none;
  --border-color: #333;
  --font-color: #333;
  width: auto;
  min-width: 90px;
  margin: 0;
  margin-left: 10px;
}
.imgcode-wrapper .img-code {
  width: 156px;
  height: 52px;
  margin-left: 12px;
  border-radius: 6px;
  background: #e9e9e9;
  cursor: pointer;
}
.imgcode-wrapper .img-code svg {
  width: 100%;
  height: 100%;
}
`,h=r(586),g=r.n(h),m=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};let y=class extends i.a{constructor(){super(),this.email="",this.emailError="",this.imgCode="",this.imgcodeTime=Date.now(),this.imgcodeError="",this.password="",this.codeError="",this.disabled=!1,this.showCounter=!1,this.sec=60,this.loading1=!1,this.loading2=!1,this.imgToken="",this.imgData="",document.title=Object(l.i18n)("forget_password")}firstUpdated(){this.getTokenImg()}getImg(){this.imgcodeTime=Date.now()}async getTokenImg(){if(d.C.supportCookie)return;const{data:t,error:e}=await c.g.geVerifyTokenImg();e||(this.imgData=t.img,this.imgToken=t.token)}render(){return i.e`
      <div class="wrapper">
        <div class="container">
          <div class="form">
            <div>
              <h2 class="large-title">${Object(l.i18n)("forget_password")}</h2>
              <p>${l.IS_ZH?Object(l.i18n)("reset_password_by_email_or_phone"):Object(l.i18n)("reset_password_by_email")}</p>
            </div>
            <div class="form-control">
              <div class="email-wrapper imgcode-wrapper">
                <infinito-input
                  name="imgcode"
                  placeholder="${Object(l.i18n)("img_verify_code")}"
                  .error="${this.imgcodeError}"
                  @onfocus=${()=>{this.imgcodeError=""}}
                >
                </infinito-input>
                ${d.C.supportCookie?i.e`
                      <img
                        @click="${this.getImg}"
                        class="img-code"
                        src="${d.x+"/verify/get_img?t="+this.imgcodeTime}"
                        alt=""
                      />
                    `:i.e` <div @click="${this.getTokenImg}" class="img-code">${Object(a.a)(this.imgData)}</div> `}
              </div>
              <div class="email-wrapper">
                <infinito-input
                  name="email"
                  placeholder="${l.IS_ZH?Object(l.i18n)("email_or_phone_number_tips"):Object(l.i18n)("email")}"
                  .error="${this.emailError}"
                  @onfocus=${()=>{this.emailError=""}}
                >
                </infinito-input>
                ${this.showCounter?i.e`<infinito-button disabled>${this.sec}s</infinito-button>`:i.e`
                      <infinito-button
                        style="max-width: 165px;"
                        .loading=${this.loading1}
                        @click=${f.a.debounce(this.getCode,200)}
                      >
                        ${Object(l.i18n)("verity_code")}
                      </infinito-button>
                    `}
              </div>
              <infinito-input
                name="code"
                placeholder="${Object(l.i18n)("enter_verification_code_tips")}"
                .error="${this.codeError}"
                @onfocus=${()=>{this.codeError=""}}
              >
              </infinito-input>
              <infinito-button primary .loading=${this.loading2} @click="${this.handleClick}">
                ${Object(l.i18n)("next")}
              </infinito-button>
            </div>
          </div>
          <div class="bg">
            <img .src=${g.a} alt="bg" />
          </div>
        </div>
      </div>
    `}async getCode(){var t,e;if(this.disabled)return;const r=this.checkEmailOrPhone();if(this.emailError=r.error,this.emailError)return;if(this.imgcodeError=this.checkImgcode(),this.imgcodeError)return;const n=o()(t=this.emilInput.value).call(t),i=o()(e=this.imgcodeInput.value).call(e);let a;this.disabled=!0,this.loading1=!0,"email"===r.type?a=await c.g.getEmailCode({email:n,code:i,token:d.C.supportCookie?void 0:this.imgToken}):"phone"===r.type&&(a=await c.g.sendPhoneCode({phone_number:n,type:"reset_password",code:i,token:d.C.supportCookie?void 0:this.imgToken})),a.error&&3021===a.error.code||(d.C.supportCookie?this.getImg():this.getTokenImg()),a.error?(this.disabled=!1,u.message.error(a.error.message)):(u.message.success(Object(l.i18n)("send_success")),this.showCounter=!0,this.timer=setInterval(()=>{this.sec>0&&this.sec<=60?this.sec--:(this.sec=60,this.showCounter=!1,this.disabled=!1,clearInterval(this.timer))},1e3)),this.loading1=!1}async handleClick(){if(this.loading2)return;const t=this.emilInput.value,e=this.codeInput.value,r=this.checkEmailOrPhone();if(this.emailError=r.error,this.codeError=this.checkCode(),this.emailError||this.codeError)return;let n;this.loading2=!0,"email"===r.type?n=await c.g.forgetPassword({email:t,code:e}):"phone"===r.type&&(n=await c.g.verifyPhoneVCode(t,e)),n.error?u.message.error(n.error.message):Object(s.c)(`/reset-password/index.html?account=${encodeURIComponent(t)}&code=${e}`),this.loading2=!1}checkImgcode(){var t;if(!o()(t=this.imgcodeInput.value).call(t))return Object(l.i18n)("cannot_empty")}checkEmailOrPhone(){var t;const e=o()(t=this.emilInput.value).call(t);return e?/^\w+([+-.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e)?{type:"email"}:/^1[3456789]\d{9}$/.test(e)?{type:"phone"}:{error:l.IS_ZH?Object(l.i18n)("please_enter_right_account"):Object(l.i18n)("email_format_error")}:{error:Object(l.i18n)("cannot_empty")}}checkCode(){if(!this.codeInput.value)return Object(l.i18n)("verity_code_no_value")}};y.styles=p,m([Object(i.h)('infinito-input[name="email"]')],y.prototype,"emilInput",void 0),m([Object(i.h)('infinito-input[name="imgcode"]')],y.prototype,"imgcodeInput",void 0),m([Object(i.h)('infinito-input[name="code"]')],y.prototype,"codeInput",void 0),m([Object(i.g)({type:String})],y.prototype,"email",void 0),m([Object(i.g)({type:String})],y.prototype,"emailError",void 0),m([Object(i.g)({type:String})],y.prototype,"imgCode",void 0),m([Object(i.g)({type:Number})],y.prototype,"imgcodeTime",void 0),m([Object(i.g)({type:String})],y.prototype,"imgcodeError",void 0),m([Object(i.g)({type:String})],y.prototype,"password",void 0),m([Object(i.g)({type:String})],y.prototype,"codeError",void 0),m([Object(i.g)({type:Boolean})],y.prototype,"disabled",void 0),m([Object(i.g)({type:Boolean})],y.prototype,"showCounter",void 0),m([Object(i.g)({type:Number})],y.prototype,"sec",void 0),m([Object(i.g)({type:Boolean})],y.prototype,"loading1",void 0),m([Object(i.g)({type:Boolean})],y.prototype,"loading2",void 0),m([Object(i.f)()],y.prototype,"imgToken",void 0),m([Object(i.f)()],y.prototype,"imgData",void 0),y=m([Object(i.c)("find-password")],y)},,,,,,,,,,,,,,,,,,,function(t,e,r){t.exports=r.p+"images/user-bg1.519670c.png"}]]);