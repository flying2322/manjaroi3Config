"use strict";(globalThis.webpackChunkinfinity_hitab_client=globalThis.webpackChunkinfinity_hitab_client||[]).push([[533],{3214:(e,t,n)=>{n.r(t),n.d(t,{mountHome:()=>w,widgetApp:()=>m});var a=n(9445),i=n(8398),o=n(7268),l=n(137),s=n(5676),c=n(8514),r=n(5670),p=n(661),d=n.n(p),u=n(4891),g=n(3844);const h=(0,o.aZ)({__name:"widget-chatgpt-home",props:{size:null,id:null},setup(e){const t=e,n=(0,s.useUserStore)(),i=(0,r.useChatGptStore)();(0,o.YP)((()=>i.activeTheme),(e=>{(0,c.o)(e)})),(0,o.YP)((()=>n.isLogin),(e=>{e?((0,u.l4)(!0),i.reqConversionList(),i.reqAssistantList()):i.resetPage()})),(0,o.bv)((()=>{p(),(0,c.o)(i.activeTheme)}));const p=()=>{d()(i.overLimit).add(1,"day").get("date")<=d()().get("date")&&i.setOverLimit(0)};g.i.subscribe("EVERY_DAY",p);const{HomeComp:h}=(0,l.useChatGptComponent)(t),{clickWidget:v}=(0,l.useModal)();return(e,t)=>((0,o.wg)(),(0,o.iD)("section",{class:"contents cursor-pointer",onClick:t[0]||(t[0]=function(){return(0,a.SU)(v)&&(0,a.SU)(v)(...arguments)})},[((0,o.wg)(),(0,o.j4)((0,o.LL)((0,a.SU)(h))))]))}});var v=n(6755),f=n(5008);const m=(0,a.iH)(null),w=(e,t)=>{const n=(0,i.createApp)(h,t);return(0,f.f)(n),m.value=n,n.use(v.M),n.mount(e),m.value}},137:(e,t,n)=>{n.r(t),n.d(t,{useChatGptComponent:()=>I,useModal:()=>M,useModalData:()=>A});var a=n(7268),i=n(4209),o=n(9445),l=n(5676);const s={class:"insert-shadow relative flex h-full rounded-[var(--icon-home-radius)] bg-[#303B75] chat-p:bg-[#0A0920] chat-w:bg-[#FFFFFF]"},c={class:"relative z-[1] flex h-full w-full items-center pl-[20px] icon-m:pl-[16px] icon-s:pl-[12px]"},r=(e=>((0,a.dD)("data-v-76aade3c"),e=e(),(0,a.Cn)(),e))((()=>(0,a._)("div",{draggable:"false",class:"h-[48px] w-[48px] bg-[url(@widget/widget-chatgpt/img/ai-logo-green.png)] bg-contain bg-center bg-no-repeat icon-m:h-[40px] icon-m:w-[40px] icon-s:h-[36px] icon-s:w-[36px] chat-p:bg-[url(@widget/widget-chatgpt/img/ai-logo-purple.png)]",alt:""},null,-1))),p={class:"flex grow flex-col pl-[16px] icon-m:pl-[12px] icon-s:pl-[8px]"},d={class:"mt-[4px] font-ali-55 text-[14px] leading-[20px] text-[#AAAFCC] icon-m:text-[14px] icon-m:leading-[20px] icon-s:text-[12px] icon-s:leading-[17px] chat-w:text-[#3A3A3C]"},u=(0,a.aZ)({__name:"chatgpt-small",setup(e){const t=(0,l.useUserStore)();return(e,n)=>((0,a.wg)(),(0,a.iD)("section",s,[(0,a._)("div",c,[r,(0,a._)("div",p,[(0,a._)("div",{draggable:"false",class:(0,i.normalizeClass)([[(0,o.SU)(t).chatStatus.vip?"h-[14px] bg-[url(@widget/widget-chatgpt/img/ai-title-pro-fff.png)] icon-m:h-[14px] icon-s:h-[12px]":"h-[16px] bg-[url(@widget/widget-chatgpt/img/ai-title-fff.png)] icon-m:h-[16px] icon-s:h-[12px]"],"w-full bg-contain bg-left bg-no-repeat chat-w:bg-[url(@widget/widget-chatgpt/img/ai-title-pro-000.png)]"]),alt:""},null,2),(0,a._)("span",d,(0,i.toDisplayString)(e.i18n("jian35b5b0")),1)])])]))}});var g=n(6911);const h=(0,g.Z)(u,[["__scopeId","data-v-76aade3c"]]),v=e=>((0,a.dD)("data-v-233ed0cc"),e=e(),(0,a.Cn)(),e),f={class:"insert-shadow relative flex h-full overflow-hidden rounded-[var(--icon-home-radius)] bg-[#303B75] bg-[url(https://static.wetab.link/hitab/chatgpt-widget/chatgptbg2xpng.png)] bg-cover bg-no-repeat chat-p:bg-[url(@widget/widget-chatgpt/img/chatgptbg-pro.png)] chat-w:bg-[url(@widget/widget-chatgpt/img/w-chat-home-bg-m.png)]"},m={class:"full flex w-full flex-col items-center pt-[26px] icon-m:pt-[22px] icon-s:pt-[18px]"},w=v((()=>(0,a._)("div",{draggable:"false",class:"h-[88px] w-[88px] bg-[url(@widget/widget-chatgpt/img/ai-logo-green.png)] bg-contain bg-center bg-no-repeat icon-m:h-[76px] icon-m:w-[76px] icon-s:h-[64px] icon-s:w-[64px] chat-p:bg-[url(@widget/widget-chatgpt/img/ai-logo-purple.png)]",alt:""},null,-1))),x={class:"flex w-full flex-col items-center pt-[26px] icon-m:pt-[22px] icon-s:pt-[18px]"},b={class:"my-[8px] font-ali-55 text-[14px] leading-[16px] text-[#AAAFCC] icon-m:text-[12px] icon-s:text-[12px] chat-p:text-[#A98FFF] chat-w:text-[#3A3A3C]"},C=v((()=>(0,a._)("div",{class:"flex items-center text-[#2CCB92] chat-p:text-[#FFFFFF] chat-w:text-[#2CCB92]"},[(0,a._)("span",{class:"font-ali-65 text-[16px] leading-[22px] icon-m:leading-[16px] icon-s:leading-[16px]"}," Start "),(0,a._)("i",{class:"iconfont icon-icon_right text-[14px]"})],-1))),L=(0,a.aZ)({__name:"chatgpt-medium",setup(e){const t=(0,l.useUserStore)();return(e,n)=>((0,a.wg)(),(0,a.iD)("section",f,[(0,a._)("div",m,[w,(0,a._)("div",x,[(0,a._)("div",{draggable:"false",class:(0,i.normalizeClass)([[(0,o.SU)(t).chatStatus.vip?"h-[16px] bg-[url(@widget/widget-chatgpt/img/ai-title-pro-fff.png)]":"h-[22px] bg-[url(@widget/widget-chatgpt/img/ai-title-fff.png)] icon-m:h-[16px] icon-s:h-[14px]"],"w-full bg-contain bg-center bg-no-repeat chat-w:bg-[url(@widget/widget-chatgpt/img/ai-title-pro-000.png)]"]),alt:""},null,2),(0,a._)("span",b,(0,i.toDisplayString)(e.i18n("jian35b5b0")),1),C])])]))}}),S=(0,g.Z)(L,[["__scopeId","data-v-233ed0cc"]]);var y=n(3214);var k=n(5670),T=n(3131),D=n(5981),P=n(2288),F=n(4003),_=n(1785);const I=e=>{const t={s:h,m:S};return((e,t,n)=>{const i=(0,o.iH)(e);t.onChangeState=e=>{i.value={...e}};const l=(0,a.Fl)((()=>n?n[i.value.size]:null));return{propsState:i,HomeComp:l}})(e,y.widgetApp.value,t)},M=()=>{const e=(0,k.useChatGptStore)();return{clickWidget:()=>{e.uploadDocLoading||e.setUploadModal(!1),e.setModal(!0),e.setSelectModel()},onCloseModal:()=>{e.setModal(!1),setTimeout((()=>{e.panelShowType&&e.setPanelShowType(""),"chat-expense"===e.panelType&&e.setPanelType("chatai")}),0),F.EF&&(0,_.bc)({type:_.o1.closeAiModal})},show:(0,T.Jk)(e).modalShow}},A=()=>{const e=(0,k.useChatGptStore)(),t=(0,T.Jk)(e),n=(0,o.iH)(!1),i=(0,o.iH)();function l(t){e.setPanelShowType(t)}return(0,a.bv)((()=>{var n;null===(n=i.value)||void 0===n||n.addEventListener("scroll",(()=>{!function(){var n,a,o;if(!i.value)return;if(t.pagination.value.finished||t.pagination.value.loading)return;const l=null===(n=i.value)||void 0===n?void 0:n.clientHeight,s=null===(a=i.value)||void 0===a?void 0:a.scrollHeight,c=null===(o=i.value)||void 0===o?void 0:o.scrollTop;l&&s&&c&&l+c>=s-10&&e.reqConversionList()}()}))})),{list:t.linksList,customList:t.customLinks,selectLink:t.selectedLink,panelType:t.panelType,panelShowType:t.panelShowType,conversionDataList:t.conversionDataList,activeConversionId:t.activeConversionId,activeConversionItem:t.activeConversionItem,userOperationDisabled:t.userOperationDisabled,paymentOrderData:t.paymentOrderData,planList:t.planList,currentPlanList:t.currentPlanList,planSelectedIndex:t.planSelectedIndex,vipGroup:t.vipGroup,localCurrentTime:t.localCurrentTime,payOrderIds:t.payOrderIds,chatModelList:t.chatModelList,activeSelectModel:t.activeSelectModel,chatVipDetail:t.chatVipDetail,vipDetailLoading:t.vipDetailLoading,isFreeOrder:t.isFreeOrder,fromTag:t.fromTag,extpackRest:t.extpackRest,showRenewalConfirm:t.showRenewalConfirm,scrollChatRef:t.scrollChatRef,uploadDocModalShow:t.uploadDocModalShow,uploadMetaData:t.uploadMetaData,uploadDocLoading:t.uploadDocLoading,selectDocFile:t.selectDocFile,containerRect:t.containerRect,highlihgtPlanProduct:t.highlihgtPlanProduct,setSelectLink:function(t){t.iframe?e.setSelectLink(t):window.open(t.url,"_blank")},isFull:n,setIsFull:function(e){n.value=e},setpanelType:function(t){e.setPanelType(t)},setPanelShowType:l,addLink:function(n){t.customLinks.value.find((e=>e.url===n.url))?D.R.warn({message:i18n("yi3e8875")}):e.addCustomLink(n)},removeLink:function(n,a){var i;e.removeCustomLink(n),a.url===(null===(i=t.selectedLink.value)||void 0===i?void 0:i.url)&&e.setSelectLink(t.linksList.value[0])},removeOriginLink:function(n){var a;e.removeOriginLink(n.id),n.url===(null===(a=t.selectedLink.value)||void 0===a?void 0:a.url)&&e.setSelectLink(t.linksList.value[0])},onClickNewChat:function(){var n;const a=t.conversionDataList.value;null===(n=i.value)||void 0===n||n.scrollTo({top:0,behavior:"smooth"});const o=a.find((e=>e.id===k.NEWCHAT_ID));if(o){if(e.setSelectModel(),!(o.messages.length>0))return void e.setActiveConversionId(k.NEWCHAT_ID);e.setNewLocalId()}e.newChatHandler()},sendMessage:function(n){e.sendChatMessage(n,t.activeConversionId.value)},reGenerate:function(){e.reGenerateLastAnwser(t.activeConversionId.value)},exportMarkdown:function(){const e=t.activeConversionItem.value.messages;if(0===e.length)return;let n="";e.forEach((e=>{const t="assistant"===e.role?`## ${i18n("lai279275")}\n`:`## ${i18n("lai2e76db")}\n`;n+=t,n+=e.content+"\r\n\n"}));const a=`${F.EF?"InfinityAI":"WetabAI"}-${Math.ceil(Date.now()*Math.random())}.md`;(0,P.tf)(n,a,F.s$?"custom/hitab":"text/plain")},scrollListRef:i,onPauseChat:function(){e.abourtStream()},sponsorShow:t.sponsorShow,closeSponsor:function(){e.setSponsorShow(!1)},vipTipsShow:t.vipTipsShow,vipTipsContent:t.vipTipsContent,closeVipTipsShow:function(){e.setVipTipsShow(!1,"")},getPayCode:async function(t,n){return await e.getPayCode(t,n)},getPlanList:function(){e.getPlanList()},getPayList:async function(){return await e.getPayList()},checkAllOrders:async function(){return await e.checkAllOrders()},getVipGroup:function(){e.getVipGroup()},checkPayOrderIds:async function(t){const n=await e.checkRecentOrderIds(t);if(n)return n;throw new Error("no paidId")},createOrder:async function(t,n){return await e.createPaymentOrder(t,n)},saveCreateOrderParams:function(t){e.setCreateOrderParams(t)},refreshOrder:async function(){const{planId:n,payPlatform:a}=t.createOrderParams.value;return await e.createPaymentOrder(n,a)},onSelectModel:function(t){e.setSelectModel(t)},getChatModelList:function(){e.getChatModels()},modifyPlanForFree:async function(){return await e.confirmChangePlanForFree()},getVipDetail:async function(){return await e.getUserVipDetail()},clearOrderIds:function(){e.clearOrderIds()},setPlanSelectedIndex:function(t){e.setPlanSelectedIndex(t)},setFromTag:function(t){e.setFromTag(t)},backToPlanList:function(){"double11"===t.fromTag.value?l("chatai-double11"):l("chat-expense")},closeWidget:()=>{e.setModal(!1),e.setPanelShowType("")}}}}}]);