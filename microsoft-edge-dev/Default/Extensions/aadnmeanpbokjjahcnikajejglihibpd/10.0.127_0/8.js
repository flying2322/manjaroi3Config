(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{160:function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"f",(function(){return d})),i.d(t,"g",(function(){return u})),i.d(t,"c",(function(){return p})),i.d(t,"e",(function(){return h})),i.d(t,"b",(function(){return g})),i.d(t,"d",(function(){return b}));var n=i(6),s=i.n(n),a=(i(8),i(22)),o=i.n(a),c=i(29),r=i(117);async function l(e){let t;return t=await fetch(e).then(e=>e.blob()),t}const d=(e,t=0)=>new s.a(i=>{let n=document.createElement("img");n.onload=()=>i(!0),n.onerror=()=>i(!1),n.src=e,t>0&&setTimeout(()=>{n.src="",n=null,i(!1)},t)}),u=e=>o.a.setItem(c.d,e);function p(){return o.a.getItem(c.d)}function h(e){return!["image/gif"].includes(e.type)&&e.size>window.__INFINITY__.maxLocalFileSize}function g(e,t="cloud"){return e.map(e=>({type:t,id:e._id,url:e.url,content:e.thumbnail,like:e.like,source:e.source,rawUrl:e.rawUrl}))}function b(e){return e.map(e=>{const{content:t,url:i,rawUrl:n}=Object(r.convertURL)(e.url);return e.type="user-library",e.content=t,e.url=i,e.rawUrl=n,e})}},192:function(e,t,i){"use strict";i.d(t,"f",(function(){return r})),i.d(t,"a",(function(){return l})),i.d(t,"c",(function(){return d})),i.d(t,"b",(function(){return u})),i.d(t,"h",(function(){return p})),i.d(t,"j",(function(){return g})),i.d(t,"d",(function(){return b})),i.d(t,"g",(function(){return y})),i.d(t,"i",(function(){return m})),i.d(t,"e",(function(){return f}));i(11),i(13),i(41);var n=i(99),s=i.n(n),a=i(2),o=i(0),c=i(27);const r={name:Object(a.i18n)("search"),uuid:"dd3af9cc97ad7de8984baaf59514bb52",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/mychromesearch.png",desc:"",types:[{name:Object(a.i18n)("html"),url:"https://www.google.com/search?q="},{name:Object(a.i18n)("photos"),url:"https://www.google.com/search?tbm=isch&q="},{name:Object(a.i18n)("news"),url:"https://www.google.com/search?tbm=nws&q="},{name:Object(a.i18n)("videos"),url:"https://www.google.com/search?tbm=vid&q="},{name:Object(a.i18n)("map"),url:"https://www.google.com/maps/preview?q="}]},l={name:Object(a.i18n)("baidu"),uuid:"0c47016a8cd2d631bc618d4f3a741335",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/baidu.png",desc:Object(a.i18n)("most_used_in_chinese"),types:[{name:Object(a.i18n)("html"),url:"https://www.baidu.com/s?tn=44004473_48_oem_dg&ie=utf-8&wd="},{name:Object(a.i18n)("photos"),url:"https://image.baidu.com/search/index?isource=infinity&iname=baidu&tn=baiduimage&word="},{name:Object(a.i18n)("news"),url:"https://news.baidu.com/ns?isource=infinity&iname=baidu&tn=news&ie=utf-8&word="},{name:Object(a.i18n)("videos"),url:"https://video.baidu.com/v?isource=infinity&iname=baidu&ie=utf-8&word="},{name:Object(a.i18n)("map"),url:"http://map.baidu.com/?isource=infinity&iname=baidu&newmap=1&ie=utf-8&s=s%26wd%3D"}]},d={name:Object(a.i18n)("google"),uuid:"a22dcc25c75de3f58cb518e32c576865",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/google.png",desc:Object(a.i18n)("google_desc"),types:[{name:Object(a.i18n)("html"),url:"https://www.google.com/search?q="},{name:Object(a.i18n)("photos"),url:"https://www.google.com/search?isource=infinity&iname=google&tbm=isch&q="},{name:Object(a.i18n)("news"),url:"https://www.google.com/search?isource=infinity&iname=google&tbm=nws&q="},{name:Object(a.i18n)("videos"),url:"https://www.google.com/search?isource=infinity&iname=google&tbm=vid&q="},{name:Object(a.i18n)("map"),url:"https://www.google.com/maps/preview?isource=infinity&iname=google&q="}]},u={name:Object(a.i18n)("bing"),uuid:"5a6afaa65c95a841f6149c4e1591a637",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/bing_new.png",desc:Object(a.i18n)("bing_desc"),types:[{name:Object(a.i18n)("html"),url:"https://cn.bing.com/search?isource=infinity&iname=bing&itype=web&q="},{name:Object(a.i18n)("photos"),url:"https://cn.bing.com/images/search?isource=infinity&iname=bing&q="},{name:Object(a.i18n)("news"),url:"https://global.bing.com/news/search?isource=infinity&iname=bing&q="},{name:Object(a.i18n)("videos"),url:"https://cn.bing.com/videos/search?isource=infinity&iname=bing&q="},{name:Object(a.i18n)("map"),url:"https://www.bing.com/ditu/?isource=infinity&iname=bing&q="}]},p=[l,d,u,{name:Object(a.i18n)("yahoo"),uuid:"C26068F55492EF9E93E05E34A3B31139",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/yahoo.png",desc:Object(a.i18n)("yahoo_desc"),types:[{name:Object(a.i18n)("html"),url:"https://search.yahoo.com/search?isource=infinity&iname=yahoo&itype=web&p="},{name:Object(a.i18n)("photos"),url:"https://images.search.yahoo.com/search?isource=infinity&iname=yahoo&p="},{name:Object(a.i18n)("news"),url:"https://news.search.yahoo.com/search?isource=infinity&iname=yahoo&p="},{name:Object(a.i18n)("videos"),url:"https://video.search.yahoo.com/search/video?isource=infinity&iname=yahoo&p="}]},{name:Object(a.i18n)("yandex"),uuid:"f33155f8c51a36fb76dad667dec7e44f",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/yandex.png",desc:Object(a.i18n)("yandex_desc"),types:[{name:Object(a.i18n)("html"),url:"https://yandex.com/search/?isource=infinity&itype=web&iname=yandex&text="},{name:Object(a.i18n)("photos"),url:"https://yandex.com/images/search?isource=infinity&iname=yandex&text="},{name:Object(a.i18n)("news"),url:"https://news.yandex.com/yandsearch?isource=infinity&iname=yandex&text="},{name:Object(a.i18n)("videos"),url:"https://yandex.com/video/search?isource=infinity&iname=yandex&text="}]},{name:Object(a.i18n)("duckduckgo"),uuid:"569CD6FB4F6502B918DB8B30EC235384",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/duckduckgo.png",desc:Object(a.i18n)("duckduckgo_desc"),types:[{name:Object(a.i18n)("html"),url:"https://duckduckgo.com/?isource=infinity&iname=duckduckgo&itype=web&q="},{name:Object(a.i18n)("photos"),url:"https://duckduckgo.com/?isource=infinity&iname=duckduckgo&t=h_&dbexp=a&iax=1&ia=images&q="},{name:Object(a.i18n)("news"),url:"https://duckduckgo.com/?isource=infinity&iname=duckduckgo&t=h_&dbexp=a&ia=news&q="},{name:Object(a.i18n)("videos"),url:"https://duckduckgo.com/?isource=infinity&iname=duckduckgo&t=h_&iax=1&ia=videos&q="}]},{name:Object(a.i18n)("n_360"),uuid:"70adaba7374f6089aca0374dea85df00",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/360.png",desc:Object(a.i18n)("360_desc"),types:[{name:Object(a.i18n)("html"),url:"https://www.so.com/s?src=lm&ls=sm2054017&lm_extend=ctype:4&q="},{name:Object(a.i18n)("photos"),url:"https://image.so.com/i?isource=infinity&iname=360&src=infinitynewtab&q="},{name:Object(a.i18n)("news"),url:"http://news.so.com/ns?isource=infinity&iname=360&src=infinitynewtab&q="},{name:Object(a.i18n)("videos"),url:"http://video.so.com/v?isource=infinity&iname=360&src=infinitynewtab&q="}]},{name:Object(a.i18n)("sougou"),uuid:"a3e908082e31a92396970f8b58583863",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/sougou.png",desc:Object(a.i18n)("sougou_desc"),types:[{name:Object(a.i18n)("html"),url:"https://www.sogou.com/sogou?isource=infinity&iname=sogou&itype=web&pid=sogou-site-7985672db979303a&query="},{name:Object(a.i18n)("photos"),url:"https://pic.sogou.com/pics?isource=infinity&iname=sogou&ie=utf8&query="},{name:Object(a.i18n)("news"),url:"http://news.sogou.com/news?isource=infinity&iname=sogou&ie=utf8&query="},{name:Object(a.i18n)("videos"),url:"http://v.sogou.com/v?isource=infinity&iname=sogou&ie=utf8&query="},{name:Object(a.i18n)("wechat"),url:"http://weixin.sogou.com/weixin?isource=infinity&iname=sogou&type=2&ie=utf8&query="}]},{name:Object(a.i18n)("yarndex_ru"),uuid:"ff1ca8c4e6661d52440b7f2e15cb6a13",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/russia-yandex.png",desc:Object(a.i18n)("yandex_desc"),types:[{name:Object(a.i18n)("html"),url:"https://yandex.ru/search/?text="},{name:Object(a.i18n)("photos"),url:"https://yandex.ru/images/search?text="},{name:Object(a.i18n)("news"),url:"https://news.yandex.ru/yandsearch?text="},{name:Object(a.i18n)("videos"),url:"https://yandex.ru/video/search?text="}]}],h={"zh-CN":[{name:Object(a.i18n)("settings"),uuid:"552fa3a378b29375843fa3d021cbe129",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/9622b98e90dd4f107d23481566095b34.png",type:"app",target:"infinity://settings"},{name:"京东商城",uuid:"6dcbbe4e9dc6ef2fd68da7d8befd117c",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/cee009549b352def723ba09d6da4b742.png",type:"web",target:"https://www.infinitynewtab.com/jd.pro.html"},{name:"天猫精选",uuid:"be0ab26cf4dc6239c98791f7b18b633a",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/2f301c86bb2d0efeec3d49930147157f.png",type:"web",target:"https://s.click.taobao.com/t?e=m%3D2%26s%3DV5ucSP%2F1kT4cQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMRBynALhehQ4RitN3%2FurF3xNWm%2FATOfjswMAKinyMfntv%2FFgqkVH8133BMlVy3qlGE2srC8Mk09eQgZss1jm63jcHtRpEUy6RPalRWTdFmFpJPwiig1bxLMnyi1UQ%2F17I10hO9fBPG8oXH%2BQH9e66Y4%3D"},{name:"即时设计",uuid:"2c27f97e0620117079c3e455f8c4e402",target:"https://js.design?source=inftab&plan=001",bgImage:"https://infinityicon.infinitynewtab.com//icon8e91c4fbdd016e6499513423be678481",bgType:"image",type:"web"},{name:"爱淘宝",uuid:"c34f380f9d9136fc3b4dbd32f24feea3",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/346647fb95fbac4d303c93fa0a4936d3.png",type:"web",target:"https://ai.taobao.com/?pid=mm_50570328_39070332_145428725"},{name:"扩展迷",uuid:"6474696c6646280df5c4faa9b7fcae39",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/6474696c6646280df5c4faa9b7fcae39.png",type:"web",target:"https://extfans.com"},{name:"唯品会",uuid:"237ae8efe805e4bd741fa32f040b4571",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/150127100741.png.png",target:"http://click.union.vip.com/redirect.php?url=eyJjaGFuIjoiaW5maW5pdHkiLCJhZGNvZGUiOiI5dnpnMHBxYiIsInNjaGVtZWNvZGUiOiJmNWEwNWQ2NiIsInVjb2RlIjoibWQyd2dycnUifQ==",type:"web"},{name:"稿定设计",uuid:"f0b90e0f436466b121ebcc46297cbfc1",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/f0b90e0f436466b121ebcc46297cbfc1.png",target:"https://www.gaoding.com/utms/6ab367adcc9945e38f24ebec652c295e ",type:"web"},{name:"百度",uuid:"aeb990ca3978666676b1fbb811bb0dfc",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/c9f7546ad597dd7fb53e8129b6c07877.png",target:"https://www.baidu.com/?tn=44004473_48_oem_dg&ie=utf-8",type:"web"},{name:"网易严选",uuid:"c4ba1648d4014bad7fdea130cd421589",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/c4ba1648d4014bad7fdea130cd421589.png",target:"https://c.duomai.com/track.php?k=TPklWYmkTMwkDNx0DZp9VZ0l2cmYSe0lmbpZmbp1DZpVXZmcDOwM&t=http%3A%2F%2Fyou.163.com%2F",type:"web"},{name:"携程网",uuid:"afe7a96e6db449e6199df118756d5672",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/1502895222082.png",target:"http://www.ctrip.com/?allianceid=1050724&sid=1786019",type:"web"},{name:"少数派",uuid:"ff434e7f26d9e95e978e7756461de509",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/ab397474a68cae01968ea26324f239c2.png",target:"https://sspai.com/?utm_source=wetab.link",type:"web"},{name:"爱奇艺",uuid:"3d3a7777700d30c5f29be964835f398d",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/226c6aff617dbc253ce26d23be07c446.png",target:"https://www.iqiyi.com/?vfm=m_470_zhd&fv=97e6d58de4b83d39",type:"web"},{name:"狐猴",uuid:"7e6e38a85dc4b7873d6e36ae00753142",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/7e6e38a85dc4b7873d6e36ae00753142.png",target:"https://www.lemurbrowser.com/app/zh/?utm_source=infinity",type:"web"},{name:"秘塔写作猫",uuid:"6376978a50ad395d1f8881df62c6b57a",bgType:"image",bgImage:"https://infinitypro-img.infinitynewtab.com/custom-icon/8001dsc30hiijtzcj24bw5e1fooqg3.png",target:"https://xiezuocat.com/?s=wetab",type:"web",bgColor:""},{name:"Infinity Games",uuid:"5001b4d70b1c62f14859b51a6e8abd6f",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/5001b4d70b1c62f14859b51a6e8abd6f.png",type:"web",target:"https://games.infinitynewtab.com/"},{name:"Gmail",uuid:"01d0a35ebb602dde4dadd63887cc2a91",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/gmail_2.png",type:"app",target:"infinity://gmail"},{name:"Infinitytab",uuid:"bc545d7b32d3dc84c3041ca092fb2689",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/bc545d7b32d3dc84c3041ca092fb2689.png",type:"web",target:"https://www.infinitytab.com/?utm_source=extension"},{name:"扩展管理",uuid:"194dd7b46ac16ac93becf5386f14bcca",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/194dd7b46ac16ac93becf5386f14bcca.png",type:"app",target:"infinity://extension"},{name:"壁纸库",uuid:"76e8e8a1cb47ef88dc9faaf52167aa9a",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/76e8e8a1cb47ef88dc9faaf52167aa9a.png",type:"app",target:"infinity://wallpaper"},o.i&&{name:Object(a.i18n)("chrome_app_store"),uuid:"744e698c837a43c49fbd3e26753d7d3f",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/d2085270ca1ded965bfaac2d2a6b12dc.png",type:"web",target:"https://chrome.google.com/webstore/category/extensions"},o.k&&{name:Object(a.i18n)("edge_app_store"),uuid:"744e63c4998c83753d7d37a4fbd3e26f",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/eeedf66223852ae037aa58284858187d.png",type:"web",target:"https://microsoftedge.microsoft.com/addons"},o.n&&{name:Object(a.i18n)("firefox_app_store"),uuid:"743965befe82a5255fb48dcf7b848bbb",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/7ef4532818b99d9320879c3e4979fc01.png",type:"web",target:"https://addons.mozilla.org"},{name:"小米有品",uuid:"f3e3cb59c45d1bc6687b8393b4f271b1",bgType:"image",bgImage:"https://infinitypro-img.infinitynewtab.com/custom-icon/9001cf4suf1jwn7y3b7juxl0x1tpbc.png",target:"https://c.duomai.com/track.php?aid=4705&dm_fid=16055&euid=infinity&site_id=950780&t=https%3A%2F%2Fwww.xiaomiyoupin.com",type:"web"},{name:"哔哩哔哩",uuid:"ae50fb1b26d79a1a7bf89b02b5d30fb1",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/d8b62f4d64bda8800b1c788cd5ba3c68.png",target:"http://www.bilibili.com/",type:"web"},{name:"知乎",uuid:"86626e617258ad15b93e249c8d81a9f4",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/2b89ebe968d8cafe77a5c587daa79c7f.png",target:"https://www.zhihu.com/",type:"web"},{name:"GitHub",uuid:"a23b4cf17327527ae66aad5d13f059da",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/a23b4cf17327527ae66aad5d13f059da.png",target:"https://github.com/",type:"web"},{name:"华为商城",uuid:"940dba4bb4740f5340b2115a90582e6b",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/940dba4bb4740f5340b2115a90582e6b.png",target:"https://c.duomai.com/track.php?aid=387&dm_fid=16055&euid=infinity&site_id=950780&t=https%3A%2F%2Fwww.vmall.com%2Findex.html",type:"web",bgColor:""},{name:"斗鱼",uuid:"78f61134f1b7826bd587ac290b1781e1",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/66f3d54ad9a6e62fbcb13bbf96211f67.png",target:"http://www.douyutv.com/",type:"web"},{name:"当当网",uuid:"25bbf99ce3252149703a0a9b71dcd6b3",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/513b4167dd3c9bfd83f6ceae56d7bf7f.png",target:"http://union.dangdang.com/transfer.php?from=P-319540-infinity&amp;amp;amp;ad_type=10&amp;amp;amp;sys_id=1&amp;amp;amp;backurl=http://www.dangdang.com",type:"web"},{name:"微软",uuid:"422f830b299a5d3a3f3c4d5a939d25bf",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/2f580fd771401efdc2118f0562e3ab45.png",target:"https://c.duomai.com/track.php?aid=2649&dm_fid=16052&euid=infinity&site_id=339485&t=https%3A%2F%2Fwww.microsoftstore.com.cn",type:"web"},{name:"新浪微博",uuid:"0485f5de0396bd313ec0e4ab22080bb9",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/0f2ab700f8fff5b6e9ebc7d6a976981f.png",target:"http://weibo.com/",type:"web"}],default:[{uuid:"080772d54828d47e7f8ce223c66f36df",name:"Booking",target:"https://www.booking.com/index.html?aid=1267011",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/83e58c13ed40dc8393297d43d2639cce.png",bgType:"image",type:"web"},{uuid:"66117abb3659ad746baadc8c1e0b28df",name:"Twitter",target:"https://twitter.com",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/0c7e5d8b40c38cde576595b23546cc91.png",bgType:"image",type:"web"},{uuid:"4299970b2e054e9a39450e6f854a684c",name:"Amazon",target:"https://sovrn.co/11h5wnr",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/e67eed044bf08fbcac16a0527fcc165a.png",bgType:"image",type:"web"},{uuid:"912ed4e109a1cde4b956fa8a1670fae2",name:"eBay",target:"https://www.ebay.com?mkcid=1&mkrid=711-53200-19255-0&siteid=0&campid=5338095340&customid=infinity&toolid=10001&mkevt=1",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/ebay.png",bgType:"image",type:"web"},{name:"Youtube",uuid:"60e546111669c1d829f962c8831a0926",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/37d396f9975e494b10ac8696d64ebb2a.png",type:"web",target:"https://youtube.com"},{name:"Gmail",uuid:"01d0a35ebb602dde4dadd63887cc2a91",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/gmail_2.png",type:"app",target:"infinity://gmail"},{name:"AliExpress",uuid:"c4cbd39c0ff571475f3f4d09df79426c",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/07ec46eac62dca559954f3c21736b5c0.png",target:"http://s.click.aliexpress.com/e/jy3RvNn",type:"web"},{name:"Settings",uuid:"552fa3a378b29375843fa3d021cbe129",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/9622b98e90dd4f107d23481566095b34.png",type:"app",target:"infinity://settings"},{name:"Spotify",uuid:"f91b1d1670595c8e7a5459fcc32ad0d4",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/a0fdd81b4dda32d7394a9151f6d274ef.png",target:"https://sovrn.co/19egzal",type:"web"},{name:"Walmart",uuid:"778bb326cdf44093d702f6f016754cec",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/150127100751.png",target:"https://redirect.viglink.com?key=ddac7c192269498283581986ec8a9aaa&u=https%3A%2F%2Fwww.walmart.com%2F",type:"web"},{name:"Microsoft",uuid:"cbad4a1402d12a5574cabf9c0cc10634",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/150127092730.png",target:"https://sovrn.co/3to9uma",type:"web"},{name:"LinkedIn",uuid:"8c23d56b7135b831b929605e26049f5c",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/0ff885c9c58928965f6647b7e09b2be5.png",target:"https://sovrn.co/e8o1p9e",type:"web"},{name:"Lemur",uuid:"24f02a8178e6236d22dc563857bf32f8",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/24f02a8178e6236d22dc563857bf32f8.png",target:"https://www.lemurbrowser.com/app/en/?utm_source=infinity",type:"web"},{name:"Turbotax",uuid:"b170651fde3c3b89289c588266c582a3",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/b170651fde3c3b89289c588266c582a3.png",target:"https://sovrn.co/9mrq11x",type:"web"},{name:"Samsung",uuid:"4f7ffdfa59a5879cba9bfd41e8b5b9f6",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/ea07e21040037300243e520d89e0e818.png",target:"https://sovrn.co/15mhkmf",type:"web"},{name:"Alibaba",uuid:"8c94edee5ce4c028a2fcd80fbaed84ea",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/656ff7858665d1adcc5efeba588d5871.png",target:"http://www.alibaba.com/",type:"web"},{name:"Wallpapers library",uuid:"76e8e8a1cb47ef88dc9faaf52167aa9a",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/76e8e8a1cb47ef88dc9faaf52167aa9a.png",type:"app",target:"infinity://wallpaper"},o.i&&{name:Object(a.i18n)("chrome_app_store"),uuid:"744e698c837a43c49fbd3e26753d7d3f",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/d2085270ca1ded965bfaac2d2a6b12dc.png",type:"web",target:"https://chrome.google.com/webstore/category/extensions"},o.k&&{name:Object(a.i18n)("edge_app_store"),uuid:"744e63c4998c83753d7d37a4fbd3e26f",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/eeedf66223852ae037aa58284858187d.png",type:"web",target:"https://microsoftedge.microsoft.com/addons"},o.n&&{name:Object(a.i18n)("firefox_app_store"),uuid:"743965befe82a5255fb48dcf7b848bbb",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/7ef4532818b99d9320879c3e4979fc01.png",type:"web",target:"https://addons.mozilla.org"},{name:"Infinitytab",uuid:"bc545d7b32d3dc84c3041ca092fb2689",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/bc545d7b32d3dc84c3041ca092fb2689.png",type:"web",target:"https://www.infinitytab.com/?utm_source=extension"},{name:"Infinity Games",uuid:"5001b4d70b1c62f14859b51a6e8abd6f",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/5001b4d70b1c62f14859b51a6e8abd6f.png",type:"web",target:"https://games.infinitynewtab.com/"},{name:"Extensions",uuid:"194dd7b46ac16ac93becf5386f14bcca",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/194dd7b46ac16ac93becf5386f14bcca.png",type:"app",target:"infinity://extension"},{name:"Target",uuid:"cdcca78e7ecbc8c627d51cc783a4fd07",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/79c6cad0aca11ad3b7726f075d9a5371.png",target:"http://www.target.com",type:"web"},{name:"TripAdvisor",uuid:"c4b68571e44bb47d16456c5182e590ee",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/9001c8a3ah8l05e5u2fqhoxf8rh9ek.png.png",target:"https://redirect.viglink.com?key=ddac7c192269498283581986ec8a9aaa&u=https%3A%2F%2Fwww.tripadvisor.com%2F",type:"web"},{name:"Indeed",uuid:"69a66cfb185c3aef3539de59316d8e28",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/69a66cfb185c3aef3539de59316d8e28.png",target:"https://sovrn.co/o8pohng",type:"web"},{name:"Hulu",uuid:"ae3c79247f84079e195ba1290e6c7946",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/150127092951.png",target:"https://sovrn.co/c6vffrc",type:"web"},{name:"Lenovo",uuid:"04d2045593f65a947d5d8a225e2d966d",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/04d2045593f65a947d5d8a225e2d966d.png",target:"https://sovrn.co/1laxjon",type:"web"},{name:"macys",uuid:"174e3ea9866bdaad35be4899a3890f5e",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/174e3ea9866bdaad35be4899a3890f5e.png",target:"https://sovrn.co/0qtuyb4",type:"web"},{name:"Expedia",uuid:"0aac2322924424d864d45919527a4bd9",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/0aac2322924424d864d45919527a4bd9.png",target:"https://sovrn.co/1afrm3y",type:"web"},{name:"Airbnb",uuid:"e76e90dc2b1acac991f19e82c58f5259",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/5bcf01b6d7301fd2adf4155a807262ac.png",target:"https://sovrn.co/l1ewazi",type:"web"},{name:"AT&T",uuid:"e0f4649ae91a59cb296b3f266cd9eb80",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/e0f4649ae91a59cb296b3f266cd9eb80.png",target:"https://sovrn.co/153zpbb",type:"web"}]},g={name:Object(a.i18n)("weather"),uuid:"eed2a9287b324510678cd5e714888e99",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/assets/weather/default.png",type:"app",bgColor:"#36B3FF",target:"infinity://weather"},b={name:"Infinity AI",uuid:"eed2a9287b324510678cd5e723788e11",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/assets/infiityai-icon.png",type:"app",target:"infinity://chatai"},y=e=>{var t;return s()(t=[o.l&&b,g,{name:Object(a.i18n)("todos"),uuid:"c09f31db43d7faca5bf659fadad3967c",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/6e49210c084629259f22609980c48ecf.png",type:"app",target:"infinity://todos"},{name:Object(a.i18n)("notes"),uuid:"ea5ac5d9e9e08c1d57ad413e9e38d376",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/006b88c07a2e87d5a61f3c969a70575c.png",type:"app",target:"infinity://notes"},o.l&&!o.r&&{name:Object(a.i18n)("folder"),uuid:"folder-1gso53bkma3hh6lqtjkjpx7lyh1",children:[{name:Object(a.i18n)("bookmarks"),uuid:"96646a13688f5bfd0aaf4811a579aee1",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/31a36139ccf4b9b005ec55445bf833b0.png",type:"app",target:"infinity://bookmarks"},{name:Object(a.i18n)("history"),uuid:"4528cef4f8d66e661cb3143af733694e",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/history_2.png",type:"app",target:"infinity://history"}]},...h[e]||h.default].filter(e=>!!e)).call(t,(e,t,i)=>{t.id||(t.id="siteId-"+t.uuid),t.updatetime=0,t.children&&t.children.forEach(e=>{e.id="siteId-"+e.uuid,e.updatetime=0});const n=Math.floor(i/18);return e[n]||(e[n]=[]),e[n].push(t),e},[])},m=[{name:Object(a.i18n)("all_wallpaper_sources"),value:"all",desc:Object(a.i18n)("all_wallpaper_sources_desc"),img:Object(c.a)("source-all.png",!0)},{name:Object(a.i18n)("infinity_landscape_wallpaper_source"),value:"InfinityLandscape",desc:Object(a.i18n)("infinity_landscape_wallpaper_source_desc"),img:Object(c.a)("source-infinity-landscape.png",!0)},{name:Object(a.i18n)("infinity_comic_wallpaper_source"),value:"Infinity",desc:Object(a.i18n)("infinity_comic_wallpaper_source_desc"),img:Object(c.a)("source-infinity-comic.png",!0)},{name:"Bing",value:"bing",desc:Object(a.i18n)("bing_wallpaper_source_desc"),img:Object(c.a)("source-bing.png",!0)},{name:"Unsplash",value:"Unsplash",desc:Object(a.i18n)("unsplash_wallpaper_source_desc"),img:Object(c.a)("source-unsplash.png",!0)},{name:"Life Of Pix",value:"Life Of Pix",desc:Object(a.i18n)("life_of_pix_wallpaper_source_desc"),img:Object(c.a)("source-life-of-pix.png",!0)},{name:"MMT",value:"MMT",desc:Object(a.i18n)("mmt_wallpaper_source_desc"),img:Object(c.a)("source-mmt.png",!0)},{name:"Realistic Shots",value:"Realistic Shots",desc:Object(a.i18n)("realistic_shots_wallpaper_source_desc"),img:Object(c.a)("source-realistic-shots.png",!0)},{name:"Jay Mantri",value:"Jay Mantri",desc:Object(a.i18n)("jay_mantri_wallpaper_source_desc"),img:Object(c.a)("source-jay-mantri.png",!0)},{name:"Free Nature Stock",value:"Free Nature Stock",desc:Object(a.i18n)("free_nature_stock_wallpaper_source_desc"),img:Object(c.a)("source-free-nature-stock.png",!0)},{name:"Skitter Photo",value:"Skitter Photo",desc:Object(a.i18n)("skitter_photo_wallpaper_source_desc"),img:Object(c.a)("source-skitter-photo.png",!0)},{name:"Startup Stock Photos",value:"Startup Stock Photos",desc:Object(a.i18n)("startup_stock_wallpaper_source_desc"),img:Object(c.a)("source-startup-stock-photos.png",!0)},{name:"Barn Images",value:"Barn Images",desc:Object(a.i18n)("barn_images_wallpaper_source_desc"),img:Object(c.a)("source-barn.png",!0)},{name:"Picography",value:"Picography",desc:Object(a.i18n)("picography_wallpaper_source_desc"),img:Object(c.a)("source-picography.png",!0)}],f=["c00018","de8930","f7d946","cbe582","506f37","60a8d8","184878","be7ab9"]},248:function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return c}));i(6),i(41),i(21),i(62),i(8),i(22),i(0);var n=i(29);function s(e=15,t=0){const i={"--wallpaper-alpha":e/100,"--wallpaper-filter":t/5+"px"};Object.keys(i).forEach(e=>{document.body.style.setProperty(e,i[e])})}const a=document.querySelector(".wallpaper");function o(e){a.style.backgroundImage&&(a.style.backgroundImage=""),a.style.backgroundColor=e}const c=e=>{a.style.backgroundColor&&(a.style.backgroundColor="");let t=e;n.e&&(t=e.replace(n.f,"")),a.style.backgroundImage=`url(${t})`}},385:function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"d",(function(){return l})),i.d(t,"b",(function(){return d})),i.d(t,"c",(function(){return u}));var n=i(6),s=i.n(n),a=(i(8),i(11),i(13),i(0)),o=i(160),c=i(117);function r(e){let t=0;switch(e){case"per-hour":t=a.q?36e5:2e4;break;case"twelve-hour":t=432e5;break;case"one-day":t=864e5}return t}async function l(e){let t;var i;return t="string"==typeof e?await(i=e,fetch(i).then(e=>e.blob())):e,await new s.a((e,i)=>{const n=new FileReader;n.readAsDataURL(t),n.onload=()=>{e(n.result)},n.onerror=i})}async function d(){const e=await Object(c.getBingWallpaper)();if(e.error)throw e.error;const[t]=Object(o.b)([e.data]);return t}async function u(){const e=await Object(c.getCustomColor)();if(!e.error)return e.data.map(e=>(e.type="color",e));console.warn(e.error)}},506:function(e,t,i){e.exports=i.p+"images/wallpaper.c4eff18.webp"},565:function(e,t,i){"use strict";i.r(t),i.d(t,"syncStore",(function(){return U}));var n=i(6),s=i.n(n),a=i(99),o=i.n(a),c=(i(11),i(13),i(8),i(41),i(21),i(4)),r=i(23),l=i(262),d=i(576),u=i(468),p=i(577),h=i(573),g=i(384),b=i(578),y=i(467),m=i(574),f=i(1),w=i(196),v=f.b`.container {
  width: 410px;
  box-sizing: border-box;
  padding: 40px 40px 34px 40px;
  background: #ffffff;
  border-radius: 6px;
}
.header {
  text-align: center;
  line-height: 30px;
  height: 28px;
  font-size: 20px;
  font-weight: 500;
  color: #333333;
  line-height: 28px;
}
.main {
  margin: 24px auto 40px;
}
.tips {
  margin-bottom: 30px;
  font-size: 14px;
  font-weight: 400;
  color: #656565;
  line-height: 20px;
}
.checkbox {
  display: flex;
  align-items: center;
  position: relative;
  margin-bottom: 20px;
  font-size: 14px;
  font-weight: 400;
  color: #333333;
  cursor: pointer;
}
.checkbox .input-box {
  display: flex;
  align-items: center;
  position: relative;
}
.checkbox label {
  box-sizing: border-box;
  position: absolute;
  top: 0;
  left: 0;
  width: 16px;
  height: 16px;
  border: 2px solid #333;
  border-radius: 8px;
  cursor: pointer;
}
.checkbox label::after {
  content: '';
  width: 9px;
  height: 5px;
  position: absolute;
  top: 1px;
  left: 1px;
  border: 2px solid #333;
  border-top: none;
  border-right: none;
  background: transparent;
  opacity: 0;
  transform: rotate(-45deg);
}
.checkbox input {
  visibility: hidden;
}
.checkbox input:checked + label::after {
  opacity: 1;
}
.checkbox:last-of-type {
  margin-bottom: 0;
}
.btn {
  width: 330px;
  height: 52px;
}
.footer-import {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.btn-import {
  width: 155px;
  height: 52px;
}
`,O=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o};let j=class extends w.a{constructor(){super(...arguments),this.onChecked=e=>{},this.show=!1,this.checked=0,this.handleCheck=e=>{this.show=!1,"function"==typeof this.onChecked&&this.onChecked(e),this.checked=0,this.onChecked=()=>{}}}static create(e){const t=document.body.querySelector("#modal-first-sync");if(t){if(!this.instance){const e=document.createElement("modal-first-sync");t.appendChild(e),this.instance=e}return this.instance.show=!0,this.instance.onChecked=e,this.instance}}static hide(){this.instance&&this.instance.show&&this.instance.handleCheck(null)}firstUpdated(){}checkOne(e){this.checked=e}updated(){this.radios[this.checked].checked=!0}render(){return f.e`<infinito-modal style="--modal-padding:0;" .closeable="${!1}" .open=${this.show}>
      <div slot="body">
        <div class="container">
          <div class="header">${i18n("choose_sync_type")}</div>
          <div class="main">
            <div class="tips">${i18n("sync_type_tips")}</div>
            <div class="checkbox-box">
              <div class="checkbox" @click="${()=>this.checkOne(0)}">
                <div class="input-box">
                  <input name="first_sync" type="radio" value="0" id="first_sync_0" />
                  <label for="first_sync_0"></label>
                </div>
                <span>${i18n("merge_cloud_local")}</span>
              </div>
              <div class="checkbox" @click="${()=>this.checkOne(1)}">
                <div class="input-box">
                  <input name="first_sync" type="radio" value="1" id="first_sync_1" />
                  <label for="first_sync_1"></label>
                </div>
                <span>${i18n("use_local")}</span>
              </div>
              <div class="checkbox" @click="${()=>this.checkOne(2)}">
                <div class="input-box">
                  <input name="first_sync" type="radio" value="2" id="first_sync_2" />
                  <label for="first_sync_2"></label>
                </div>
                <span>${i18n("use_cloud")}</span>
              </div>
            </div>
          </div>
          <div class="footer">
            <infinito-button
              primary
              class="btn"
              @click="${()=>{this.handleCheck(this.checked)}}"
              >${i18n("confirm")}</infinito-button
            >
          </div>
        </div>
      </div>
    </infinito-modal> `}};j.styles=v,j.instance=null,O([Object(f.g)()],j.prototype,"onChecked",void 0),O([Object(f.g)({type:Boolean})],j.prototype,"show",void 0),O([Object(f.g)({type:Number})],j.prototype,"checked",void 0),O([Object(f.i)('[name="first_sync"]')],j.prototype,"radios",void 0),j=O([Object(f.c)("modal-first-sync")],j);var k=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o};let I=class extends w.a{constructor(){super(...arguments),this.onChecked=e=>{},this.show=!1,this.checked=0,this.handleCheck=e=>{this.show=!1,"function"==typeof this.onChecked&&this.onChecked(e),this.checked=0,this.onChecked=()=>{}}}static create(e){const t=document.body.querySelector("#modal-import-type");if(t){if(!this.instance){const e=document.createElement("modal-import-type");t.appendChild(e),this.instance=e}return this.instance.show=!0,this.instance.onChecked=e,this.instance}}static hide(){this.instance&&this.instance.show&&this.instance.handleCheck(null)}firstUpdated(){}checkOne(e){this.checked=e}updated(){this.radios[this.checked].checked=!0}render(){return f.e`<infinito-modal style="--modal-padding:0;" .closeable="${!1}" .open=${this.show}>
      <div slot="body">
        <div class="container">
          <div class="header">${i18n("import_select_tile")}</div>
          <div class="main">
            <div class="tips">${i18n("inportdata_desc")}</div>
            <div class="checkbox-box">
              <div class="checkbox" @click="${()=>this.checkOne(0)}">
                <div class="input-box">
                  <input name="first_sync" type="radio" value="0" id="first_sync_0" />
                  <label for="first_sync_0"></label>
                </div>
                <span>${i18n("merge_data")}</span>
              </div>
              <div class="checkbox" @click="${()=>this.checkOne(1)}">
                <div class="input-box">
                  <input name="first_sync" type="radio" value="1" id="first_sync_1" />
                  <label for="first_sync_1"></label>
                </div>
                <span>${i18n("overwrite_data")}</span>
              </div>
            </div>
          </div>
          <div class="footer-import">
            <infinito-button
              class="btn-import"
              @click="${()=>{this.handleCheck(null)}}"
              >${i18n("cancel")}</infinito-button
            >
            <infinito-button
              primary
              class="btn-import"
              @click="${()=>{this.handleCheck(this.checked)}}"
              >${i18n("confirm")}</infinito-button
            >
          </div>
        </div>
      </div>
    </infinito-modal> `}};I.styles=v,I.instance=null,k([Object(f.g)()],I.prototype,"onChecked",void 0),k([Object(f.g)({type:Boolean})],I.prototype,"show",void 0),k([Object(f.g)({type:Number})],I.prototype,"checked",void 0),k([Object(f.i)('[name="first_sync"]')],I.prototype,"radios",void 0),I=k([Object(f.c)("modal-import-type")],I);var _=i(161),S=i(0),x=i(385),R=i(264),C=i(9),E=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o};const T=[d.a,u.b,h.a,p.a,g.a,b.a,m.weatherStore];class L extends l.a{constructor(){super(...arguments),this.timmer=null,this.downloading=!1,this.backuping=!1,this.isBackup=!1,this.isOpenSync=!0,this.syncId="",this.lastSyncTime=0,this.syncSucsess=!1,this.syncFail=!1,this.syncFailMsg="",this.autosSyncList=[],this.waitMergeData=null,this.waitMergeId=null,this.manualSyncList={},this.isRecovered=!1,this.recoverErrorTimes=0,this.master=!1,this.prerender=[],this.autoBackupPipe={data:{},websocketKeys:[],timestamp:0},this.getAllBackupData=async()=>{const e={};return await s.a.all(T.map(async t=>{const i=await t.getBackupData();e[t.backupFileKey]=i})),e},this.getAutoLatest=async(e="all")=>{const t=localStorage.getItem("lock-auto-recover");if(t&&Date.now()-Number(t)<3e3)return;if(localStorage.setItem("lock-auto-recover",""+Date.now()),await this.getSyncList(),0===this.autosSyncList.length){const e=y.userStore.userInfo["backup-version-v2"];if(y.userStore.userInfo["auto-backup"]&&!e){const e=y.userStore.userInfo.email?"basic":"pro";await this.getV1RemoteData(e)}else this.tiggerBackup();return}const i=this.autosSyncList[0];if((null==i?void 0:i.id)===this.syncId||this.waitMergeId===(null==i?void 0:i.id))return;const n=localStorage.getItem("pre-sync-id");n&&(null==i?void 0:i.id)===n||(await this.getDetail(i.id,"auto",e,!1,!0),localStorage.removeItem("lock-auto-recover"))},this.changeSyncStatus=e=>{this.master=!1,this.downloading=e.downloading,this.backuping=e.backuping,this.isBackup=e.isBackup,this.syncFail=e.syncFail,this.syncFailMsg=e.syncFailMsg,this.syncSucsess=e.syncSucsess,(this.syncSucsess||this.syncFail)&&this.syncEnd()}}get autoSyncing(){return this.downloading||this.backuping}async changeSyncSwitch(e){this.isOpenSync=e}async autoBackup(e,t=""){const i=await this.toSync(!0,e,t);return i.error||Object(c.i)(()=>{this.autosSyncList=i.data}),i}async manualBackup(){const{default:e}=await Promise.resolve().then(i.bind(null,392)),t=e.loading(i18n("backing_up")),{error:n,data:s}=await this.toSync();t(),n?e.error(i18n("backup_failed")):Object(c.i)(()=>{this.manualSyncList=s})}async toSync(e=!1,t={},i=""){var n,a;let o;if(this.master=!0,e)this.isBackup=!0,this.backuping=!0,o=await r.e.autoBackup(t,i);else{const e={};await s.a.all(T.map(async t=>{const i=await t.getBackupData();e[t.backupFileKey]=i})),o=await r.e.manualBackup(e)}const{error:c,data:l=[]}=o;return e&&(c||_.slave.postTask("slave:sync-to-server",i),c?this.backupEnd(c.message||"auto-backup error",null===(n=l[0])||void 0===n?void 0:n.id):this.backupEnd(null,null===(a=l[0])||void 0===a?void 0:a.id)),o}backupEnd(e,t=""){Object(c.i)(()=>{this.master=!0,this.backuping=!1,e?this.syncFail=!0:(this.syncSucsess=!0,t&&(this.syncId=t,this.lastSyncTime=Date.now()))}),this.syncEnd()}downloadEnd(e,t=""){Object(c.i)(()=>{this.master=!0,this.downloading=!1,this.backuping=!1,e?this.syncFail=!0:(this.syncSucsess=!0,t&&(this.syncId=t,this.lastSyncTime=Date.now()))}),this.syncEnd()}syncEnd(){clearTimeout(this.timmer),this.timmer=setTimeout(()=>{Object(c.i)(()=>{this.syncFail=!1,this.syncFailMsg="",this.syncSucsess=!1,this.isBackup=!1})},3e3)}async getSyncList(){const{data:e,error:t}=await r.e.getSyncList();if(t)throw t;Object(c.i)(()=>{this.autosSyncList=e.auto,this.manualSyncList=e.manual})}async getDetail(e,t,n="all",s=!1,a=!1){let o,c;if(this.master=!0,s){const{default:e}=await Promise.resolve().then(i.bind(null,392));o=e,c=o.loading(i18n("syncing"))}else this.downloading=!0,this.isBackup=!1;const{data:l,error:d}=await r.e.getSyncDetail(a?"latest":e,t,n);s&&(null==c||c()),d?s?null==o||o.error(i18n("sync_fail")):this.downloadEnd(d.message||"download error"):(await this.useRemote(l,s),this.downloadEnd(null,e),this.tiggerBackup())}tiggerBackup(){var e;this.changeRecoveredStatus(!0),(null===(e=this.autoBackupPipe.websocketKeys)||void 0===e?void 0:e.length)&&(this.autoBackupPipe.timestamp=Date.now())}async getV1RemoteData(e,t=!1){let n,s;if(this.master=!0,t){const{default:e}=await Promise.resolve().then(i.bind(null,392));n=e,s=n.loading(i18n("syncing"))}else this.downloading=!0,this.isBackup=!1;const{error:a,data:o}=await r.e.getV2DataFromV1(e);t&&(null==s||s()),a?(t?null==n||n.error(i18n("sync_fail")):this.downloadEnd(a.message||"download v1 error"),Object(c.i)(()=>{this.recoverErrorTimes+=1})):(this.downloadEnd(null),await this.useRemote(o,t,!0),this.tiggerBackup())}changeRecoveredStatus(e){this.isRecovered=e}autoRunGetAutoLatest(){setTimeout(()=>{this.getAutoLatest()},0)}showModalAndCheckType(e=!1){return new s.a((t,i)=>{var n;if(e&&j.hide(),null===(n=j.instance)||void 0===n?void 0:n.show)return void t(null);const a=Object(c.j)(this.waitMergeData);j.create(async n=>{this.mergeType=n,this.diffColorItems();try{localStorage.setItem("restoring","1"),await s.a.all(T.map(async e=>{if(a&&a[e.backupFileKey])if(1===n)e.restartAutoBackupReaction(!0);else if(2===n)try{await e.mergeRemote(a[e.backupFileKey],!0),"site"===e.backupFileKey&&d.a.setRedirectVersion("")}catch(e){}else{if(0!==n)throw new Error("not check");try{await e.mergeRemote(a[e.backupFileKey],!1),"site"===e.backupFileKey&&d.a.setRedirectVersion("")}catch(e){}e.restartAutoBackupReaction(!0)}})),this.downloadEnd(null,this.waitMergeId),this.tiggerBackup(),Object(c.i)(()=>{this.waitMergeData=null,this.waitMergeId=null})}catch(t){e&&i(t)}localStorage.removeItem("restoring"),t(null)})})}useLocalData(e){T.map(async t=>{if(null==e?void 0:e[t.backupFileKey])try{await t.mergeRemote(e[t.backupFileKey],!0)}catch(e){console.error("Store ~ syncStores.map ~ error",e)}})}async useLocalDataWithCheck(e){T.some(t=>{if(e&&e[t.backupFileKey]){console.log("diffData ~ st.backupFileKey",t.backupFileKey);return t.diffRemote(e[t.backupFileKey])}return!1})?await this.showModalAndCheckImportType(e):this.useLocalData(e)}showModalAndCheckImportType(e){return new s.a(t=>{I.create(async i=>{try{await s.a.all(T.map(async t=>{if(e&&e[t.backupFileKey])if(1===i)try{await t.mergeRemote(e[t.backupFileKey],!0),"site"===t.backupFileKey&&d.a.setRedirectVersion("")}catch(e){}else{if(0!==i)throw new Error("not check");try{await t.mergeRemote(e[t.backupFileKey],!1),"site"===t.backupFileKey&&d.a.setRedirectVersion("")}catch(e){}}}))}catch(e){console.log("ModalImportType.create ~ error",e)}t(null)})})}useRemote(e,t,i=!1){return new s.a(async n=>{if(Object(c.i)(()=>{this.waitMergeData=null,this.waitMergeId=null}),t)await s.a.all(T.map(async t=>{if(null==e?void 0:e[t.backupFileKey])try{await t.mergeRemote(e[t.backupFileKey],!0),"site"===t.backupFileKey&&d.a.setRedirectVersion("")}catch(e){}})),this.mergeType=2,this.diffColorItems(),n(null);else if(this.isRecovered)await s.a.all(T.map(async t=>{if(null==e?void 0:e[t.backupFileKey])if(i)try{await t.mergeRemote(e[t.backupFileKey],!0)}catch(e){}else{t.stopAutoBackupReaction();try{await t.mergeRemote(e[t.backupFileKey],!0)}catch(e){}t.restartAutoBackupReaction()}})),n(null);else{T.some(t=>{if(e&&e[t.backupFileKey]){console.log("diffData ~ st.backupFileKey",t.backupFileKey);return t.diffRemote(e[t.backupFileKey])}return!1})?(Object(c.i)(()=>{var t;this.waitMergeData=e,this.waitMergeId=null===(t=this.autosSyncList[0])||void 0===t?void 0:t.id}),await this.showModalAndCheckType(!0),n(null)):(this.mergeType=2,this.diffColorItems(),await s.a.all(T.map(async t=>{if(null==e?void 0:e[t.backupFileKey])try{await t.mergeRemote(e[t.backupFileKey],!0)}catch(e){}})),n(null))}})}pushAutoBackupPipe(e){y.userStore.isLogin&&this.isOpenSync&&(Object.keys(e).forEach(t=>{this.autoBackupPipe.data[t]=e[t],this.autoBackupPipe.websocketKeys.includes(t)||this.autoBackupPipe.websocketKeys.push(t)}),this.autoBackupPipe.timestamp=Date.now())}cleanupPipe(e){e===this.autoBackupPipe.timestamp&&(this.autoBackupPipe={data:{},websocketKeys:[],timestamp:0})}clearList(){this.autosSyncList=[],this.manualSyncList=[]}async diffColorItems(){await y.userStore.userProfilePromise;const e=y.userStore.userInfo["wp-color-update"];if(e===y.userStore.wpColorUpdate)return;const{mergeType:t}=this,i=await Object(x.c)(),n=Object(c.j)(h.a.customColorItems);await h.a.mergeCustomColor(n,i,Number(t),!0),y.userStore.setWpColorUpdate(e)}}E([c.g],L.prototype,"downloading",void 0),E([c.g],L.prototype,"backuping",void 0),E([c.g],L.prototype,"isBackup",void 0),E([c.g],L.prototype,"isOpenSync",void 0),E([c.g],L.prototype,"syncId",void 0),E([c.g],L.prototype,"lastSyncTime",void 0),E([c.g],L.prototype,"syncSucsess",void 0),E([c.g],L.prototype,"syncFail",void 0),E([c.g],L.prototype,"syncFailMsg",void 0),E([c.g],L.prototype,"autosSyncList",void 0),E([c.g],L.prototype,"waitMergeData",void 0),E([c.g],L.prototype,"waitMergeId",void 0),E([c.g],L.prototype,"manualSyncList",void 0),E([c.g],L.prototype,"isRecovered",void 0),E([c.g],L.prototype,"recoverErrorTimes",void 0),E([c.g],L.prototype,"master",void 0),E([c.g],L.prototype,"prerender",void 0),E([c.g],L.prototype,"autoBackupPipe",void 0),E([c.e],L.prototype,"autoSyncing",null),E([c.b],L.prototype,"changeSyncSwitch",null),E([c.b],L.prototype,"autoBackup",null),E([c.b],L.prototype,"manualBackup",null),E([c.b],L.prototype,"toSync",null),E([c.b],L.prototype,"backupEnd",null),E([c.b],L.prototype,"downloadEnd",null),E([c.b],L.prototype,"syncEnd",null),E([c.b],L.prototype,"getSyncList",null),E([c.b],L.prototype,"getDetail",null),E([c.b],L.prototype,"tiggerBackup",null),E([c.b],L.prototype,"getV1RemoteData",null),E([c.b],L.prototype,"changeRecoveredStatus",null),E([c.b],L.prototype,"getAutoLatest",void 0),E([c.b],L.prototype,"pushAutoBackupPipe",null),E([c.b],L.prototype,"cleanupPipe",null),E([c.b],L.prototype,"clearList",null),E([c.b],L.prototype,"changeSyncStatus",void 0);const U=new L;U.initSyncStore(C.j,["autoBackupPipe","syncId","lastSyncTime","isOpenSync","isRecovered","recoverErrorTimes","prerender","waitMergeData","waitMergeId","manualSyncList","autosSyncList"],void 0,50);Object(c.c)(()=>{var e;if(U.firstSync){const{isOpenSync:t,isRecovered:i,downloading:n}=U;if(y.userStore.isLogin&&t&&i&&!n&&!(null===(e=j.instance)||void 0===e?void 0:e.show)){const{data:e,websocketKeys:t,timestamp:i}=U.autoBackupPipe;(async e=>{const{data:t,websocketKeys:i,timestamp:n}=e,a=Object.assign({},t);if(Object.keys(a).length)try{const e=localStorage.getItem("lock-auto-backup");if(e&&Date.now()-Number(e)<4e3)return;localStorage.setItem("lock-auto-backup",""+Date.now()),0===U.autosSyncList.length?await s.a.all(T.map(async e=>{const t=await e.getBackupData();a[e.backupFileKey]=t})):await s.a.all(T.map(async e=>{if(i.includes(e.backupFileKey)){const t=await e.getBackupData();a[e.backupFileKey]=t}}));const{error:t}=await U.autoBackup(Object(c.j)(a),i.join(","));if(t)return;U.cleanupPipe(n),localStorage.removeItem("lock-auto-backup")}catch(e){}})({data:e,websocketKeys:t,timestamp:i})}}},{delay:4e3}),Object(c.c)(()=>{if(U.firstSync){const e=U.isOpenSync&&y.userStore.isLogin;_.slave.postTask("slave:change-sync",{status:e,userInfo:{uid:y.userStore.userInfo.uid,secret:y.userStore.userInfo.secret}}),e?U.autoRunGetAutoLatest():y.userStore.isLogin&&0===U.autosSyncList.length&&0===U.manualSyncList.length?U.getSyncList():y.userStore.isLogin||U.clearList()}},{delay:100}),Object(c.c)(()=>{U.firstSync&&(U.isOpenSync&&y.userStore.isLogin||(U.changeRecoveredStatus(!1),Object(c.i)(()=>{U.syncId="",U.waitMergeId=null,U.waitMergeData=null}),localStorage.removeItem("pre-sync-id")))}),Object(c.c)(()=>{U.firstSync&&y.userStore.isLogin&&0===y.userStore.userInfo["auto-backup"]&&0===U.autosSyncList.length&&d.a.restartAutoBackupReaction(!0)}),Object(c.c)(()=>{if(U.firstSync&&U.master){const e={downloading:U.downloading,backuping:U.backuping,syncSucsess:U.syncSucsess,syncFail:U.syncFail,syncFailMsg:U.syncFailMsg,isBackup:U.isBackup};_.slave.sendMessage("tabs-sync-status",e)}},{delay:20}),Object(c.c)(()=>{var e;U.firstSync&&U.autosSyncList.length&&(U.waitMergeId===(null===(e=U.autosSyncList[0])||void 0===e?void 0:e.id)?U.showModalAndCheckType():j.hide())},{delay:1}),window.addEventListener("beforeunload",()=>{U.master&&_.slave.sendMessage("tabs-sync-status",{downloading:!1,backuping:!1,syncSucsess:!1,syncFail:!1,syncFailMsg:"",isBackup:!1})}),Object(c.h)(()=>U.firstSync,async e=>{if(e){const e=await F();R.a.trySendStatus(e)}},{delay:1e3});const F=async()=>({currentIsLogin:!!y.userStore.isLogin,currentIsOpenSync:y.userStore.isLogin&&U.isOpenSync,currentSearchEngine:p.a.searchEngine.current.types[0].url.split("?")[0],currentWallpaper:(()=>{try{const e=h.a.type,t=["userLibraryAuto","cloudAuto"],i=["cloud","color"];if(["local","default","bing"].includes(e))return e;if(t.includes(e))return{[e]:h.a.switchType};if(i.includes(e))return"color"===e?{[e]:h.a.color}:{[e]:h.a.rawUrl}}catch(e){return"error"}})(),currentIconCount:(()=>{try{var e;const t=o()(e=d.a.sites).call(e,(e,t)=>{if(null==t?void 0:t.length){return e+o()(t).call(t,(e,t)=>{var i;return(null===(i=null==t?void 0:t.children)||void 0===i?void 0:i.length)?e+t.children.length:e+1},0)}return e},0);return 10*Math.round(t/10)}catch(e){return"error"}})(),currentVersion:S.C.extVersion,currentBrowserEnv:S.c,currentRunBrowser:S.C.runtimePlatform,currentWidth:window.screen.width*window.devicePixelRatio});R.a.sendPageView({page:"newtab"})},573:function(e,t,i){"use strict";i.d(t,"a",(function(){return C}));var n=i(99),s=i.n(n),a=i(36),o=i.n(a),c=(i(21),i(62),i(41),i(11),i(13),i(8),i(4)),r=i(29),l=i(262),d=i(94),u=i(0),p=i(9),h=i(161),g=i(248),b=i(385);function y(){h.slave.postTask("slave:bg-run-clear-wallpaper-timer-task")}var m=i(160),f=i(467),w=i(117),v=i(587),O=i.n(v),j=i(15),k=i(585),I=i(392),_=i(588),S=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o};const x=i(506);class R extends l.a{constructor(){super(),this.url=x,this.urlInUI=x,this.rawUrl=x,this.setWpSouceCount=e=>this.wpSourceCount=e,this.type="default",this.switchType="disabled",this.setSwitchType=e=>{this.switchType=e,this._updateTimer(!0)},this.setWpSourceCount=e=>this.wpSourceCount=e,this.wpExt="png",this.list=[],this.index=-1,this.timeEnd=0,this.remoteData=[],this.opacity=40,this.blur=0,this.setOpacity=e=>this.opacity=e,this.setBlur=e=>this.blur=e,this.liked=[],this.setLiked=e=>{this.liked=e},this.customColorItems=[],this.setCustomColorItems=e=>this.customColorItems=e,this._rgbaToHex=e=>{const t=e.replace(/rgba?\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),i=parseFloat(t[3]||"1"),n=Math.floor(i*parseInt(t[0])+255*(1-i)),s=Math.floor(i*parseInt(t[1])+255*(1-i)),a=Math.floor(i*parseInt(t[2])+255*(1-i));return("0"+n.toString(16)).slice(-2)+("0"+s.toString(16)).slice(-2)+("0"+a.toString(16)).slice(-2)},this._maxCollectionlen=100,this.cloudCollection=[],this.appendCloudCollection=e=>this.cloudCollection.push(e),this.setCloudCollection=e=>this.cloudCollection=e,this._maxRecentUsedLen=100,this.cloudRecentUsedOrder={},this.setCloudRecentUsedOrder=e=>{const{cloudRecentUsedOrder:t,cloudRecentUsed:i}=this,n={};Object.keys(t).forEach(e=>{i.includes(e)&&(n[e]=t[e])}),n[e]=Date.now(),this.cloudRecentUsedOrder=n},this.cloudRecentUsed=[],this.setCloudRecentUsed=e=>{const t=Object.keys(this.cloudRecentUsedOrder);e.forEach(e=>{const i=t.indexOf(e);-1!==i&&t.splice(i,1)}),t.length>0&&t.forEach(e=>{delete this.localRecentUsedOrder[e]}),this.cloudRecentUsed=e},this.appendCloudRecentUsed=e=>{this.cloudRecentUsed.push(e),this.cloudRecentUsed=Array.from(new Set(this.cloudRecentUsed))},this.localRecentUsedOrder={},this.setLocalRecentUsedOrder=e=>{this.localRecentUsedOrder[e]=Date.now()},this.localRecentUsed=[],this.setLocalRecentUsed=e=>{const t=Object.keys(this.localRecentUsedOrder);e.forEach(e=>{const i=t.indexOf(e);-1!==i&&t.splice(i,1)}),t.length>0&&t.forEach(e=>{delete this.localRecentUsedOrder[e]}),this.localRecentUsed=e},this.appendLocalRecentUsed=e=>{this.localRecentUsed.push(e),this.localRecentUsed=Array.from(new Set(this.localRecentUsed))},this.isLibraryItem=e=>e.includes(window.__INFINITY__.wpLibraryItemId),this.isLocal=e=>e.includes(window.__INFINITY__.wpId),this.isColorItem=e=>e.includes(window.__INFINITY__.wpColorId),this.isCurrentWp=e=>this.id===e,this.diffRemote=e=>{const t=["type","switchType","timeEnd","id","wpSource","opacity","blur","customColorItems"],i=Object.keys(e).every(i=>!t.includes(i)||c.d.structural(this[i],e[i]));let n=!1;return"local"!==e.type&&e.url&&(n=this.urlInUI!==e.url),!i||n},this.nextPage=0,this.totalPage=-1,this.delay=-1,this._whenLocalSynced=async()=>{switch(function(e){Object(c.c)(()=>{const{opacity:t,blur:i}=e,n={"--wallpaper-alpha":t/100,"--wallpaper-filter":i/5+"px"};Object.keys(n).forEach(e=>{document.body.style.setProperty(e,n[e])})}),Object(c.h)(()=>e.type,t=>{t.includes("Auto")||("bing"!==t?e.wpSource&&(e.wpSource=void 0):e.wpSource=t,e.switchType="disabled",y())}),Object(c.c)(()=>{const{id:t}=e;t&&e.addRecentUsedP(t)});const t=document.querySelector(".wallpaper");Object(c.h)(()=>[e.urlInUI,e.color],([i,n])=>{"color"!==e.type?t.style.backgroundColor?(Object(g.a)("#999"),setTimeout(()=>{Object(g.b)(i)},200)):Object(g.b)(i):Object(g.a)(n)})}(this),await _.a.initStore(),this.isAuto&&this._setCloudAutoAfterInit(),this.type){case"bing":this._setBingAfterInit();break;case"userLibraryAuto":this._checkLibraryExists()}},this._syncLock=!1,this.mergeRemote=async(e,t)=>{try{if(this._syncLock)return;if(this._syncLock=!0,!("type"in e))return;if(u.n&&delete e.blur,"cloudRecentUsed"in e){if(t)this.setCloudRecentUsed(e.cloudRecentUsed);else{const t=Array.from(new Set(e.cloudRecentUsed.concat(this.cloudRecentUsed)));this.setCloudRecentUsed(t)}delete e.cloudRecentUsed}if("customColorItems"in e&&(this.mergeCustomColor(this.customColorItems,e.customColorItems,t?2:0),delete e.customColorItems),"local"===e.type)return void await this._mergeLocal(e);e.urlInUI=e.url,this._merge(e),this._afterSynced()}catch(e){console.log(e)}finally{this._syncLock=!1}},this.windmillRotating=!1,this._windmillPrevRotateSpeed=0,this._windmillPrevRotateDegree=0,this._windmillPrevRotateTime=-1,this.performWindmillRotate=e=>{if(-1===this._windmillPrevRotateTime)return this._windmillPrevRotateTime=e,void requestAnimationFrame(this.performWindmillRotate);const t=e-this._windmillPrevRotateTime;let i=this._windmillPrevRotateDegree;const{_windmillPrevRotateSpeed:n}=this;let s=n,a=0;if(this.windmillRotating)if(n<.46){let e,i;s+=36e-5*t,s>.46?(i=(s-.46)/36e-5,e=t-i,s=.46):(e=t,i=0),a=.46*i+n*e+18e-5*e*e}else a=.46*t;else{let i;s-=36e-5*t,s<0?(i=n/36e-5,s=0):i=t,0===s&&(e=-1),a=n*i-18e-5*i*i}i-=a,i%=360,i<0&&(i=360+i),this.windmillParent&&this.windmillParent.rotateWindMill(i),this._windmillPrevRotateDegree=i,this._windmillPrevRotateTime=e,this._windmillPrevRotateSpeed=s,0!==s&&requestAnimationFrame(this.performWindmillRotate)},this._lockLoadRandomP=!1,this.needSwitchWallpaper=!1,this._afterWpAutoSwitched=()=>{if(this._updateTimer(!0),!_.a.onlyOneItem)return this._prepareNextWp()},this._lockSwitchWallpaper=!1,this.timeToSwitchWallpaper=async()=>{if(!_.a.onlyOneItem&&!this._lockSwitchWallpaper){this._lockSwitchWallpaper=!0;try{await this.switchWallpaper(),await this._afterWpAutoSwitched()}finally{this._lockSwitchWallpaper=!1}}},this.switchToNextWallpaper=async()=>{try{await this.timeToSwitchWallpaper()}catch(e){d.message.top(i18n("wallpaper_switch_failure"))}},this.initAutoBackup("wallpaper",["id","url","rawUrl","wpSource","wpSourceName","type","switchType","color","timeEnd","index","opacity","blur","cloudRecentUsed","cloudRecentUsedOrder","customColorItems","nextPage","totalPage","wpExt"]),function(e){return e.initSyncStore(p.n,["id","urlInUI","rawUrl","wpSource","wpSourceCount","wpSourceName","type","switchType","imageName","imageSource","imageType","color","index","timeEnd","remoteData","opacity","blur","cloudRecentUsed","localRecentUsed","cloudRecentUsedOrder","localRecentUsedOrder","nextPage","totalPage","wpExt","customColorItems","delay"],void 0)}(this).then(this._whenLocalSynced),setTimeout(()=>{this.windmillParent=document.querySelector("newtab-main")})}_updateTimer(e=!1){const{switchType:t}=this;if(["disabled","when-newtab"].includes(t))y(),this.setTimeEnd(0);else{if(e){const e=Date.now();this.setTimeEnd(e+Object(b.a)(t))}!function(e,t){const i=Date.now(),n=Object(b.a)(t),s=e.timeEnd;let a;s>i?a=s-i:(a=n,e.setTimeEnd(i+n)),h.slave.postTask("slave:bg-run-timer-to-switch-wallpaper",a)}(this,t)}}setWpSourceName(e){this.wpSourceName=e}setWallpaper(e){const{url:t,urlInUI:i,rawUrl:n,id:s,name:a,source:o}=e;a&&(this.imageName=a),this.id=s,this.url=t,this.urlInUI=i,this.rawUrl=n,this.imageSource=o,this.setBase64Wallpaper()}async setBase64Wallpaper(){const{type:e,url:t}=this;if(["local","color"].includes(e))return;const i=await Object(b.d)(t);await Object(m.g)(i)}setColor(e){this.type="color",this.id=e.id,this.color=e.content,this.urlInUI=void 0}setCloudWallpaper(e){this.type="cloud",this.setCloudWallpaperRaw(e)}setCloudWallpaperRaw(e){this.setWallpaper({type:e.type,id:e.id,url:e.url,urlInUI:e.url,rawUrl:e.rawUrl,source:e.source})}setAutoWallpaperRaw(e){this.setWallpaper({type:e.type,id:e.id,url:e.url,urlInUI:e.url,rawUrl:e.rawUrl,source:e.source})}setWpExt(e){this.wpExt=e}async setLocalWallpaper(e){const{file:t}=e;this.setWpExt(O.a.getExtension(t.type));const i=await Object(b.d)(t);await Object(m.g)(i),this.setType("local"),this.setWallpaper({type:e.type,url:null,urlInUI:e.url,rawUrl:e.url,id:e.id})}async enableBingWallpaper(e){this.type="bing",this.wpSource="bing",this.setBingWallpaper(e)}setBingWallpaper(e){this.setCloudWallpaperRaw(e)}setList(e){this.list=e}pushList(e){this.list.push(...e)}setIndex(e){this.index=e}setTimeEnd(e){this.timeEnd=e}setRemoteData(e){this.remoteData=e}pushRemoteData(e){this.remoteData.push(...e)}spliceRemoteData(e,t=0){this.remoteData.splice(t,e)}get isAuto(){return this.type.includes("Auto")}removeLiked(e){const t=this.liked.indexOf(e);-1!==t&&this.liked.splice(t,1)}addLiked(e){const t=Object(c.j)(this.liked);t.push(e);const i=Array.from(new Set(t));this.setLiked(i)}includeLiked(e){return this.liked.includes(e)}async loadCollectionP(){const e=await Object(w.getCollectionWallpaper)();e.error||this.setCloudCollection(e.data)}async loadLikedP(){const e=await Object(w.getLikedWallpaper)();e.error||this.setLiked(e.data)}pushCustomColor(e){this.customColorItems.push(...e)}includesColorItem(e){return-1!==this.customColorItems.findIndex(({content:t})=>e===t)}appendCustomColor(e){if(-1===this.customColorItems.findIndex(({content:t})=>t===e.content)){const t=Object(c.j)(this.customColorItems);this.setCustomColorItems([e].concat(t))}}removeCustomColor(e){const t=this.customColorItems.findIndex(({id:t})=>t===e);-1!==t&&this.customColorItems.splice(t,1)}_rgbToHex(e){var t;return s()(t=e.map(e=>e.toString(16).padStart(0))).call(t,(e,t)=>e+t)}async addCustomColorItem(e){if(this.includesColorItem(e))return;const t=this._rgbaToHex(e),i=window.__INFINITY__.color_list,n=i.map(e=>j.a.hexColorDelta(t,e)),s=i[n.indexOf(Math.max.apply(null,n))],a={id:`${window.__INFINITY__.wpColorId}${Object(k.a)()}`,content:e,similarColor:s};try{f.userStore.isLogin&&await Object(w.addCustomColor)(a),this.appendCustomColor(Object.assign({type:"color"},a)),I.default.success(i18n("add_success"))}catch(e){I.default.error(i18n("network_error"))}}addCloudCollectionP(e){if(this.cloudCollection.includes(e))return;this.appendCloudCollection(e);const t=this._maxCollectionlen-this.collectionLen;if(t<0){const e=Object(c.j)(this.cloudCollection).reverse();e.length+=t,this.setCloudCollection(e.reverse())}}removeCloudCollectionP(e){const t=this.cloudCollection.indexOf(e);-1!==t&&this.cloudCollection.splice(t,1)}get collectionLen(){return this.cloudCollection.length}removeCollectionP(e){this.removeCloudCollectionP(e)}addCollectionP(e){this.addCloudCollectionP(e)}includeCollection(e){return this.cloudCollection.includes(e)}dropCloudRecentUsed(e){const t=this.cloudRecentUsed.indexOf(e);-1!==t&&this.cloudRecentUsed.splice(t,1)}get recentUsedLen(){return this.cloudRecentUsed.length+this.localRecentUsed.length}addLocalRecentP(e){if(this.setLocalRecentUsedOrder(e),this.localRecentUsed.includes(e))return;this.appendLocalRecentUsed(e);const t=this._maxRecentUsedLen-this.recentUsedLen;if(t<0){const e=Object(c.j)(this.localRecentUsed).reverse();e.length+=t,this.setLocalRecentUsed(e.reverse())}}addCloudRecentP(e){if(this.setCloudRecentUsedOrder(e),this.cloudRecentUsed.includes(e))return;this.appendCloudRecentUsed(e);const t=this._maxRecentUsedLen-this.recentUsedLen;if(t<0){const e=Object(c.j)(this.cloudRecentUsed).reverse();e.length+=t,this.setCloudRecentUsed(e.reverse())}}removeCloudRecentUsedP(e){const t=Object(c.j)(this.cloudRecentUsed);e.forEach(e=>{const i=t.indexOf(e);-1!==i&&t.splice(i,1)}),this.setCloudRecentUsed(t)}addRecentUsedP(e){this.addCloudRecentP(e)}async getBackupData(){const e={};this.backupValueKeys.forEach(t=>{e[t]=Object(c.j)(this[t])});try{if("local"===this.type){const t=await Object(m.c)();e.url=t}else e.url=this.urlInUI}catch(t){e.type="default"}return e}async _setBingAfterInit(){const e=await Object(b.b)();this.id!==e.id&&this.setCloudWallpaperRaw(e)}setDefaultWallpaper(){this.id=null,this.type="default",this.urlInUI=this.url=r.b,this.rawUrl=r.a}async _checkLibraryExists(){try{const e=await Object(w.hasWallpaperLibrary)(this.wpSource);if(e.error)throw e.error;1!==e.data&&this.setDefaultWallpaper()}catch(e){}}_setCloudAutoAfterInit(){_.a.ready?this._updateTimer(!0):this._afterWpAutoSwitched()}setType(e){this.type=e}_merge(e){Object.keys(e).forEach(t=>{this[t]!==e[t]&&(this[t]=e[t])})}async _mergeLocal(e){if("local"===this.type&&this.urlInUI.startsWith("blob:")){if(await Object(m.c)()!==e.url){const t=await Object(m.a)(e.url);e.urlInUI=e.rawUrl=o.a.createObjectURL(t),await Object(m.g)(e.url)}else delete e.urlInUI,delete e.rawUrl}else{const t=await Object(m.a)(e.url);e.urlInUI=e.rawUrl=o.a.createObjectURL(t),await Object(m.g)(e.url)}delete e.url;const t=e.wpExt;delete e.wpExt,this._merge(e),e.id?this.setWpExt(t):this.setWpExt(""),this._afterSynced()}async mergeCustomColor(e,t,i,n=!1){switch(i){case 1:if(0===e.length)return;await Object(w.setCustomColorItems)(e.map(e=>(delete e.type,e)));break;case 2:C.setCustomColorItems(t.map(e=>(e.type="color",e)));break;case 0:{const i=[],s=[];for(let t=0,n=e.length;t<n;++t){const n=e[t];s.includes(n.id)||(i.push(n),s.push(n.id))}for(let e=0,n=t.length;e<n;++e){const n=t[e];s.includes(n.id)||(i.push(n),s.push(n.id))}n&&await Object(w.setCustomColorItems)(i.map(e=>(delete e.type,e))),C.setCustomColorItems(i.map(e=>("type"in e||(e.type="color"),e)))}}}_afterSynced(){r.e&&Object(c.i)(()=>{this.url=this.url.replace(r.f,""),this.urlInUI=this.urlInUI.replace(r.f,"")}),this.setBase64Wallpaper(),this.isAuto&&(this._updateTimer(),this._prepareNextWp())}startRotateWindmill(){this.windmillRotating=!0,0===this._windmillPrevRotateSpeed&&requestAnimationFrame(this.performWindmillRotate)}endRotateWindmill(){this.windmillRotating=!1}async randomWallpaper(){if(!this._lockLoadRandomP){this._lockLoadRandomP=!0,this.startRotateWindmill();try{const{data:e,error:t}=await Object(w.getRandomWallpaper)();if(t)throw new Error(JSON.stringify(t));const i=await Object(m.f)(e.url);if(!i)throw new Error("fetch res to check :"+i);this.setCloudWallpaper(Object.assign({type:"cloud"},e)),d.message.top(i18n("wallpaper_switch_success"))}catch(e){d.message.top(i18n("wallpaper_switch_failure"))}finally{this._lockLoadRandomP=!1,this.endRotateWindmill()}}}async getNextWp(...e){const{data:t}=await Object(w.getNextWallpaper)(...e),[i]=Object(m.b)([t]);return i}async _prepareNextWp(){try{const e="userLibraryAuto"!==this.type?"library":"userLibrary",t=await this.getNextWp(this.wpSource,this.id,e);t.id===this.id?_.a.setOnlyOneItem(!0):_.a.setOnlyOneItem(!1),await Object(m.f)(t.url),_.a.setNextId(t.id),_.a.setNextRawURL(t.rawUrl),_.a.setNextURL(t.url),_.a.setNextItem(t),_.a.setReady(!0)}catch(e){if(!e.__CANCEL__)throw e}}enableUserLibraryAuto({libraryId:e,libraryName:t},i,n){this.type="userLibraryAuto",this.switchType=i,this.wpSource=e,this.wpSourceName=t,this._afterEnableWpAuto(n)}enableCloudAuto(e,t,i){this.type="cloudAuto",this.wpSource=e,this.switchType=t,this._afterEnableWpAuto(i)}_afterEnableWpAuto(e){this.setAutoWallpaperRaw(e),_.a.setOnlyOneItem(!1),this._afterWpAutoSwitched()}async switchWallpaper(){_.a.onlyOneItem||_.a.ready||await this._prepareNextWp(),this.setAutoWallpaperRaw(_.a.nextItem),_.a.setReady(!1),_.a.clearNextData()}}S([c.g],R.prototype,"id",void 0),S([c.g],R.prototype,"url",void 0),S([c.g],R.prototype,"urlInUI",void 0),S([c.g],R.prototype,"rawUrl",void 0),S([c.g],R.prototype,"wpSource",void 0),S([c.g],R.prototype,"wpSourceCount",void 0),S([c.b],R.prototype,"setWpSouceCount",void 0),S([c.g],R.prototype,"type",void 0),S([c.g],R.prototype,"switchType",void 0),S([c.b],R.prototype,"setSwitchType",void 0),S([c.b],R.prototype,"setWpSourceCount",void 0),S([c.g],R.prototype,"wpSourceName",void 0),S([c.b],R.prototype,"setWpSourceName",null),S([c.g],R.prototype,"imageName",void 0),S([c.g],R.prototype,"imageSource",void 0),S([c.g],R.prototype,"imageType",void 0),S([c.b],R.prototype,"setWallpaper",null),S([c.g],R.prototype,"color",void 0),S([c.b],R.prototype,"setColor",null),S([c.b],R.prototype,"setCloudWallpaper",null),S([c.b],R.prototype,"setCloudWallpaperRaw",null),S([c.b],R.prototype,"setAutoWallpaperRaw",null),S([c.g],R.prototype,"wpExt",void 0),S([c.b],R.prototype,"setWpExt",null),S([c.b],R.prototype,"enableBingWallpaper",null),S([c.b],R.prototype,"setBingWallpaper",null),S([c.g],R.prototype,"list",void 0),S([c.b],R.prototype,"setList",null),S([c.b],R.prototype,"pushList",null),S([c.g],R.prototype,"index",void 0),S([c.b],R.prototype,"setIndex",null),S([c.g],R.prototype,"timeEnd",void 0),S([c.b],R.prototype,"setTimeEnd",null),S([c.g],R.prototype,"remoteData",void 0),S([c.b],R.prototype,"setRemoteData",null),S([c.b],R.prototype,"pushRemoteData",null),S([c.b],R.prototype,"spliceRemoteData",null),S([c.g],R.prototype,"opacity",void 0),S([c.g],R.prototype,"blur",void 0),S([c.b],R.prototype,"setOpacity",void 0),S([c.b],R.prototype,"setBlur",void 0),S([c.e],R.prototype,"isAuto",null),S([c.g],R.prototype,"liked",void 0),S([c.b],R.prototype,"setLiked",void 0),S([c.b],R.prototype,"removeLiked",null),S([c.b],R.prototype,"addLiked",null),S([c.g],R.prototype,"customColorItems",void 0),S([c.b],R.prototype,"setCustomColorItems",void 0),S([c.b],R.prototype,"pushCustomColor",null),S([c.b],R.prototype,"removeCustomColor",null),S([c.b],R.prototype,"addCustomColorItem",null),S([c.g],R.prototype,"cloudCollection",void 0),S([c.b],R.prototype,"appendCloudCollection",void 0),S([c.b],R.prototype,"setCloudCollection",void 0),S([c.b],R.prototype,"addCloudCollectionP",null),S([c.b],R.prototype,"removeCloudCollectionP",null),S([c.e],R.prototype,"collectionLen",null),S([c.g],R.prototype,"cloudRecentUsed",void 0),S([c.b],R.prototype,"dropCloudRecentUsed",null),S([c.b],R.prototype,"setCloudRecentUsed",void 0),S([c.b],R.prototype,"appendCloudRecentUsed",void 0),S([c.g],R.prototype,"localRecentUsed",void 0),S([c.b],R.prototype,"setLocalRecentUsed",void 0),S([c.b],R.prototype,"appendLocalRecentUsed",void 0),S([c.e],R.prototype,"recentUsedLen",null),S([c.b],R.prototype,"addLocalRecentP",null),S([c.b],R.prototype,"addCloudRecentP",null),S([c.b],R.prototype,"removeCloudRecentUsedP",null),S([c.g],R.prototype,"delay",void 0),S([c.b],R.prototype,"setDefaultWallpaper",null),S([c.b],R.prototype,"_setCloudAutoAfterInit",null),S([c.b],R.prototype,"setType",null),S([c.b],R.prototype,"_merge",null),S([c.b],R.prototype,"mergeRemote",void 0),S([c.b],R.prototype,"randomWallpaper",null),S([c.b],R.prototype,"enableUserLibraryAuto",null),S([c.b],R.prototype,"enableCloudAuto",null),S([c.b],R.prototype,"switchWallpaper",null);const C=new R},574:function(e,t,i){"use strict";i.r(t),i.d(t,"weatherStore",(function(){return v})),i.d(t,"getCurrentWeather",(function(){return O}));var n=i(6),s=i.n(n),a=i(475),o=i.n(a),c=(i(11),i(13),i(8),i(4)),r=i(23),l=i(15),d=i(262),u=i(0);const p={100:i18n("w_100"),101:i18n("w_101"),102:i18n("w_102"),103:i18n("w_103"),104:i18n("w_104"),200:i18n("w_200"),201:i18n("w_201"),202:i18n("w_202"),203:i18n("w_203"),204:i18n("w_204"),205:i18n("w_205"),206:i18n("w_206"),207:i18n("w_207"),208:i18n("w_208"),209:i18n("w_209"),210:i18n("w_210"),211:i18n("w_211"),212:i18n("w_212"),213:i18n("w_213"),300:i18n("w_300"),301:i18n("w_301"),302:i18n("w_302"),303:i18n("w_303"),304:i18n("w_304"),305:i18n("w_305"),306:i18n("w_306"),307:i18n("w_307"),308:i18n("w_308"),309:i18n("w309"),310:i18n("w_310"),311:i18n("w_311"),312:i18n("w_312"),313:i18n("w_313"),314:i18n("w_314"),315:i18n("w_315"),316:i18n("w_316"),317:i18n("w_317"),318:i18n("w_318"),399:i18n("w_399"),400:i18n("w_400"),401:i18n("w_401"),402:i18n("w_402"),403:i18n("w_403"),404:i18n("w_404"),405:i18n("w_405"),406:i18n("w_406"),407:i18n("w_407"),408:i18n("w_408"),409:i18n("w_409"),410:i18n("w_410"),499:i18n("w_499"),500:i18n("w_500"),501:i18n("w_501"),502:i18n("w_502"),503:i18n("w_503"),504:i18n("w_504"),507:i18n("w_507"),508:i18n("w_508"),509:i18n("w_509"),510:i18n("w_510"),511:i18n("w_511"),512:i18n("w_512"),513:i18n("w_513"),514:i18n("w_514"),515:i18n("w_515"),900:i18n("w_900"),901:i18n("w_901"),999:i18n("w_999")},h={alyBGColor(e){let t="#36B3FF";switch(e.conditionCode){case"100":case"101":case"102":case"103":case"104":t="#0F7CFF";break;case"200":case"201":case"202":case"203":case"204":case"205":case"206":t="#10BDFF";break;case"207":case"208":case"209":case"210":case"211":case"212":t="#096BB2";break;case"213":case"900":t="#FF7F3B";break;case"300":case"301":case"302":case"303":case"304":case"305":case"306":case"307":case"308":case"309":case"310":case"311":case"312":case"313":case"314":case"315":case"316":case"317":case"318":case"399":t="#427BD1";break;case"301":case"300":case"402":case"403":case"404":case"405":case"406":case"407":case"408":case"409":case"410":case"4991":t="#87A6D5";break;case"500":case"501":case"502":case"503":case"504":case"505":case"506":case"507":case"508":case"509":case"510":case"511":case"512":case"513":case"514":case"515":case"999":t="#98A6BD";break;default:t="#0441C5"}return t},alyWIcon:e=>`${u.a}/weather/code_${e.conditionCode}.png`,alyText:e=>p[e.conditionCode]};function g(e,t,i){let n,s;return"celsius"===t?(n=e,s="°C"):(n=Math.floor(1.8*e+32),s="°F"),i&&(n+=s),n}var b=i(264),y=i(9),m=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},f=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]])}return i};class w extends d.a{constructor(){super(...arguments),this.localData={},this.list=[],this.lastUpdated=+new Date,this.unit="celsius",this.isShowModal=!1,this.isShowSetting=!1,this.searchState="none",this.citys=[]}get formateList(){return this.list.filter(e=>e.items).map(e=>{var t=f(e,[]);return t.items=t.items.map((e,t)=>{var i=f(e,[]);return 0===t&&(i._bgColor=h.alyBGColor(i),i._text=h.alyText(i)),i._bgImg=h.alyWIcon(i),i}),t})}sortList(e){this.list=e}changeIndex(e,t){var i;if(e===t)return;let n=[...this.list];const s=n.findIndex(t=>t.cid===e);if(-1===s)return;if("bottom"===t){const[e]=n.splice(s,1);n.push(e)}else if("top"===t){const[e]=n.splice(s,1);n.unshift(e)}else{const e=n.findIndex(e=>e.cid===t);if(-1===e)return;const[i]=n.splice(s,1);n.splice(e,0,i)}const a=(null===(i=this.list.filter(e=>e.top)[0])||void 0===i?void 0:i.name)||"";(a===e||a===t)&&(n=this.list.map(e=>e.top?Object.assign(Object.assign({},e),{top:0}):e)),this.list=n}openModal(){this.isShowModal=!0}closeModal(){this.isShowModal=!1,this.searchCitys("")}updateList(e){this.list=e}diffRemote(e){var t;if((null===(t=null==e?void 0:e.list)||void 0===t?void 0:t.length)!==this.list.length)return!0;if(this.unit!==e.unit)return!0;return this.list.some((t,i)=>t.cid!==e.list[i].cid)}async mergeRemote(e,t){if(e.list)try{const i=await this.getWeatherByCid(e.list);Object(c.i)(()=>{if(this.unit=e.unit,t)this.list=i;else{const e=this.list,t=i,{result:n}=l.a.mergeArray(e,t,"cid","updateTime");this.list=n}})}catch(e){}}async getWeatherByCid(e){e=e.filter(e=>e.name&&e.cid&&e.items);return await s.a.all(e.map(async e=>{if(e.cid){const t=await r.i.getForecastWeather(e.cid);if(null==t?void 0:t.data){return Object.assign(Object.assign({},t.data),{name:e.name})}}}))}async initLocal(){const e=await r.i.getLocalCity();Object(c.i)(()=>{e&&(this.localData=e.data)})}async addCity(e,t){const{data:i}=await r.i.getForecastWeather(e);if(!i)throw new Error(i18n("no_current_city_weather_data"));Object(c.i)(()=>{for(const t in this.list)if(this.list[t].cid===e)throw new Error(i18n("repeat_city"));this.list.push(Object.assign(Object.assign({},i),{cid:e,name:t})),this.lastUpdated=+new Date,this.closeModal()})}async searchCitys(e){if(!e)return this.citys=[],void(this.searchState="none");this.searchState="ing";try{const{data:t}=await r.i.getCityList(e);t?Object(c.i)(()=>{if(200===t.status){this.searchState="done";const e=t.cities.filter(e=>!this.filterCity(e.cid));this.citys=e}}):Object(c.i)(()=>{this.searchState="error"})}catch(e){Object(c.i)(()=>{this.searchState="error"})}}filterCity(e){const t=e.substr(e.length-1);return/^[a-zA-Z]+$/.test(t)}changeSelected(e,t){this.citys[e].selected=t}deleteCityWeather(e){let t=-1;for(const i in this.list)e===this.list[i].cid&&(t=Number(i));this.list.splice(t,1),this.lastUpdated=+new Date}changeUnit(){this.unit="celsius"===this.unit?"fahrenheit":"celsius",b.a.sendEvent({settingAction:{weatherUnit:this.unit}})}toggleSetting(){this.isShowSetting=!this.isShowSetting}closeSetting(){this.isShowSetting=!1}reset(){this.isShowSetting=!1,this.isShowModal=!1}toTop(e,t){var i;this.list=o()(i=this.list.map(i=>i.cid===e?Object.assign(Object.assign({},i),{top:0===t?1:0}):Object.assign(Object.assign({},i),{top:0}))).call(i,(e,t)=>t.top-e.top)}toggleOpen(e){this.list=this.list.map(t=>t.cid===e?Object.assign(Object.assign({},t),{open:0===t.open?1:0}):Object.assign({},t))}}m([c.g],w.prototype,"localData",void 0),m([c.g],w.prototype,"list",void 0),m([c.g],w.prototype,"lastUpdated",void 0),m([c.g],w.prototype,"unit",void 0),m([c.g],w.prototype,"isShowModal",void 0),m([c.g],w.prototype,"isShowSetting",void 0),m([c.g],w.prototype,"searchState",void 0),m([c.g],w.prototype,"citys",void 0),m([c.e],w.prototype,"formateList",null),m([c.b],w.prototype,"sortList",null),m([c.b],w.prototype,"changeIndex",null),m([c.b],w.prototype,"openModal",null),m([c.b],w.prototype,"closeModal",null),m([c.b],w.prototype,"updateList",null),m([c.b],w.prototype,"mergeRemote",null),m([c.b],w.prototype,"addCity",null),m([c.b],w.prototype,"searchCitys",null),m([c.b],w.prototype,"changeSelected",null),m([c.b],w.prototype,"deleteCityWeather",null),m([c.b],w.prototype,"changeUnit",null),m([c.b],w.prototype,"toggleSetting",null),m([c.b],w.prototype,"closeSetting",null),m([c.b],w.prototype,"reset",null),m([c.b],w.prototype,"toTop",null),m([c.b],w.prototype,"toggleOpen",null);const v=new w;v.initSyncStore(y.o,["localData","list","unit","lastUpdated"],{}),v.initAutoBackup("weather",["list","unit"]);const O=()=>{const e=v.formateList[0],t=null==e?void 0:e.items[0];if(!t)return{};return{name:g(t.tmpMax,v.unit,!0),bgColor:t._bgColor,bgImg:t._bgImg}};Object(c.c)(()=>{v.list.some(e=>!e||!e.cid)&&(u.j&&alert("error"),Object(c.i)(()=>{v.list=v.list.filter(e=>(null==e?void 0:e.name)&&(null==e?void 0:e.cid)&&(null==e?void 0:e.items))}))})},576:function(e,t,i){"use strict";i.d(t,"a",(function(){return O}));var n=i(99),s=i.n(n),a=i(475),o=i.n(a),c=(i(11),i(13),i(41),i(8),i(274),i(21),i(4)),r=i(395),l=i.n(r),d=i(262),u=i(468),p=i(15),h=i(0),g=i(192),b=i(469),y=i(574),m=i(23),f=i(9),w=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o};class v extends d.a{constructor(){super(...arguments),this.sites=[],this.editingId=null,this.currentPageIndex=0,this.redirectVersion="",this.mergeSiteArray=(e,t,i)=>{const n=e=>{if("object"==typeof e){if(e.target===g.j.target){const t=["target","uuid"];return s()(t).call(t,(t,i)=>t+e[i],"")}{var t;const i=o()(t=Object.keys(e).filter(e=>"id"!==e&&"updatetime"!==e)).call(t);return s()(i).call(i,(t,i)=>t+e[i],"")}}},a=(e=>{const t=Object.create(null),i=e=>{e.forEach(e=>{var n;if(Array.isArray(e))i(e);else if(e&&e.id){const s=e.id;t[s]=e,(null===(n=e.children)||void 0===n?void 0:n.length)>0&&i(e.children)}})};return i(e),t})(t),c=(e=>{const t=Object.create(null),i=e=>{e.forEach(e=>{var s;if(Array.isArray(e))i(e);else if("object"==typeof e)if((null===(s=e.children)||void 0===s?void 0:s.length)>0)i(e.children);else{const i=n(e);t[i]=!0}})};return i(e),t})(t);let r=!1;e.forEach((t,i)=>{e[i]=t.filter(e=>{var t;const i=a[e.id],s=e.updatetime||0;if((null===(t=e.children)||void 0===t?void 0:t.length)>0){if(i){return s>(i.updatetime||0)&&(r=!0,i.name=e.name),e.children.forEach(e=>{if(a[e.id]){const t=a[e.id].updatetime||0;(e.updatetime||0)>t&&(r=!0,Object.assign(a[e.id],e))}else r=!0,i.children.push(e)}),!1}return e.children=e.children.filter(e=>{if(a[e.id]){const t=a[e.id].updatetime||0;return(e.updatetime||0)>t&&(r=!0,Object.assign(a[e.id],e)),!1}return!0}),0!==e.children.length&&(1===e.children.length&&(Object.assign(e,e.children[0]),delete e.children),!0)}{if(!e.updatetime)return!1;const t=n(e);if(c[t])return!1;if(i){return s>(i.updatetime||0)&&(r=!0,Object.assign(a[e.id],e)),!1}return!0}})});const l=[];if(e.forEach(e=>{e.forEach(e=>{l.push(e)})}),l.length>0&&t.length>0){r=!0;let e=t.length-1;l.forEach(n=>{t[e].length<i?t[e].push(n):(e+=1,t[e]=[n])})}return{result:t,isLocalEffective:r}},this.convertBackupEquals=e=>{const{sites:t}=e;return(null==t?void 0:t.length)&&t.forEach(e=>{(null==e?void 0:e.length)&&e.forEach(e=>{(null==e?void 0:e.uuid)===g.j.uuid?(e.name=void 0,e.bgColor=void 0,e.bgImage=void 0):(null==e?void 0:e.children)&&e.children.forEach(e=>{(null==e?void 0:e.uuid)===g.j.uuid&&(e.name=void 0,e.bgColor=void 0,e.bgImage=void 0)})})}),e},this.reSortTimer=null,this.reSort=(e,t)=>{clearTimeout(this.reSortTimer),this.reSortTimer=setTimeout(()=>{var i;const n=e*t,a=s()(i=this.sites).call(i,(e,t)=>e.concat(t),[]),o=Array(Math.ceil(a.length/n)).fill(null);Object(c.i)(()=>{this.sites=o.map((e,t)=>a.slice(t*n,(t+1)*n))})},0)}}get uids(){const e=new Set;return(b.pluginStore.pluginViews.includes("infinity://chatai")||b.pluginStore.pluginViews.includes("infinity://settings")||b.pluginStore.pluginViews.includes("profile"))&&this.sites.forEach(t=>{t.filter(e=>e).forEach(t=>{t.children?t.children.forEach(t=>{e.add(t.uuid+"#"+t.target)}):e.add(t.uuid+"#"+t.target)})}),e}changeCurrentPage(e){this.currentPageIndex=e}diffRemote(e){const t=e=>{if((null==e?void 0:e.target)===g.j.target){const t={name:void 0,bgColor:void 0,bgImage:void 0};return Object.assign(Object.assign({},e),t)}},i=l()(e.sites||[],t),n=l()(Object(c.j)(this.sites),t);return!c.d.structural(i,n)}mergeRemote(e,t){if(!e.sites)return;const i=Object(y.getCurrentWeather)();if(t)this.setWeatherIcon(e.sites,i),this.sites=e.sites;else{const{col:t,row:n}=u.b.setting.layout,s=t*n,{result:a}=this.mergeSiteArray(Object(c.j)(this.sites),e.sites,s);this.setWeatherIcon(a,i),this.sites=a}this.sites.length?this.sites.length-1<this.currentPageIndex&&document.querySelector("newtab-main").toPage(this.sites.length-1):this.currentPageIndex=0}clearEditSite(){this.editingId=null}setEditSite(e){this.editingId=e}delSites(e=[],t=!0){var i,n,s;const[a,o,c]=e;let r,l=null;return 2===e.length?r=this.sites[a].splice(o,1):3===e.length&&(r=null===(n=null===(i=this.sites[a][o])||void 0===i?void 0:i.children)||void 0===n?void 0:n.splice(c,1)),t&&this.finishingSites(e[0]),2===e.length&&0===(null===(s=this.sites[a])||void 0===s?void 0:s.length)&&(l=a),{data:r,clearPageIndex:l}}insertSite(e=[],t){var i,n;const[s,a,o]=e;2===e.length?s!==this.sites.length||this.sites[s]?this.sites[s].splice(a,0,t):this.sites.push([t]):3===e.length&&(null===(n=null===(i=this.sites[s][a])||void 0===i?void 0:i.children)||void 0===n||n.splice(o,0,t))}handelStatus(e,t,i,n,s){const[a]=e;let[o]=t;if(null!==s&&s<o&&(o-=1,document.querySelector("newtab-main")._toPrevPage(!0)),3===e.length&&i.children.length<2){const e=this.findIndex(a,i.id);this.destroyFolder(e),o-=1}const c=null!==s?Math.min(s,o):o;return this.finishingSites(Math.max(c,0)),this.findIndex(o,n.id)}findIndex(e,t){const i=[];for(let n=Math.max(e||0,0);n<this.sites.length;n++){const e=this.sites[n];i[0]=n;if(e.find((e,n)=>e.id===t?(i[1]=n,!0):!!e.children&&e.children.find((e,s)=>e.id===t&&(i[1]=n,i[2]=s,!0))))return i}}findIcon(e,t){let i={};for(let n=Math.max(e||0,0);n<this.sites.length;n++){if(this.sites[n].some(e=>e.id===t?(i=e,!0):!!e.children&&e.children.some(e=>e.id===t&&(i=e,!0))))return i}return i}destroyFolder(e){const[t,i]=e,n=this.sites[t][i].children;0===n.length?this.sites[t].splice(i,1):(this.sites[t][i]=n.shift(),n.length>0&&this.sites[t].push(...n))}manualDestroyFolder(e){const[t,i]=e,n=this.sites[t][i].children;this.sites[t].splice(i,1);const{col:s,row:a}=u.b.setting.layout,o=s*a-this.sites[t].length;if(o>=n.length)this.sites[t].push(...n);else{const e=n.splice(0,o);this.sites[t].push(...e);const i=this.sites.length-1;this.sites[i].push(...n),this.finishingSites(i)}}finishingSites(e=0){const{col:t,row:i}=u.b.setting.layout,n=t*i,s=e=>{if(this.sites.length<=e)return;const t=this.sites[e].length;if(t>n){const i=e+1,a=this.sites[e].splice(n,t-n);this.sites.length>i?this.sites[i].unshift(...a):this.sites.push(a),s(i)}else 0===t?(e&&e===this.sites.length-1&&document.querySelector("newtab-main").toPage(e-1),this.sites.splice(e,1),s(e)):s(e+1)};s(e);for(let e=0;e<this.sites.length;){const t=this.sites[e];t&&t.length||(this.sites.splice(e,1),e-=1),e+=1}}addSite(e,t=0){if(this.sites.length>t){const{col:i,row:n}=u.b.setting.layout,s=i*n;return this.sites[t].length<s?(this.sites[t].push(e),t):this.addSite(e,t+1)}return this.sites[t]=[e],t}isIcon(e,t){return!this.findIcon(e,t).children}changeFolderName(e,t){const[i,n]=e;this.sites[i][n].name=t,this.sites[i][n].updatetime=Date.now()}setWeatherIcon(e,t){e.forEach(e=>{e&&e.forEach(e=>{e.target===g.j.target&&(e.name=t.name||g.j.name,e.bgColor=t.bgColor||g.j.bgColor,e.bgImage=t.bgImg||g.j.bgImage),e.children&&e.children.forEach(e=>{e.target===g.j.target&&(e.name=t.name||g.j.name,e.bgColor=t.bgColor||g.j.bgColor,e.bgImage=t.bgImg||g.j.bgImage)})})})}async submitSite(e){if("color"===e.bgType?delete e.bgImage:"image"===e.bgType&&(delete e.bgFont,delete e.bgText,delete e.bgColorImage,"transparent"===e.bgColor&&(e.bgColor=void 0)),e.updatetime=await p.a.getTimestamp(),this.editingId){const t=document.querySelector("newtab-main").iconSearchShow,i=this.findIcon(t?0:this.currentPageIndex,this.editingId);let n={};Object(c.i)(()=>{if(n=Object.assign(i,e),n.target===g.j.target){const e=Object(y.getCurrentWeather)();this.setWeatherIcon(O.sites,e)}})}else{const t=Object.assign({uuid:p.a.randomId("site-"),id:p.a.randomId("siteId-"),type:"web"},e),i=O.addSite(t,this.currentPageIndex);if(t.target===g.j.target){const e=Object(y.getCurrentWeather)();this.setWeatherIcon(O.sites,e)}document.querySelector("newtab-main").toPage(i)}return null}async getRedirectTargets(){const{data:e,error:t}=await m.b.getRedirectTargets(this.redirectVersion);if(!t&&e){const{list:t,version:i}=e;this.setRedirectVersion(i),this.userRedirect(t)}}setRedirectVersion(e){this.redirectVersion=e}userRedirect(e){e.forEach(e=>{let{matchs:t,version:i,target:n}=e;t=t.map(e=>new RegExp(e)),this.sites.forEach(e=>{e.forEach(e=>{var s;(null===(s=e.children)||void 0===s?void 0:s.length)?e.children.forEach(e=>{e.target&&t.some(t=>t.test(e.target))&&e.rVersion!==i&&(e.rVersion=i,e.target=n)}):e.target&&t.some(t=>t.test(e.target))&&e.rVersion!==i&&(e.rVersion=i,e.target=n)})})})}}w([c.g],v.prototype,"sites",void 0),w([c.g],v.prototype,"editingId",void 0),w([c.g],v.prototype,"currentPageIndex",void 0),w([c.g],v.prototype,"redirectVersion",void 0),w([c.e],v.prototype,"uids",null),w([c.b],v.prototype,"changeCurrentPage",null),w([c.b],v.prototype,"mergeRemote",null),w([c.b],v.prototype,"clearEditSite",null),w([c.b],v.prototype,"setEditSite",null),w([c.b],v.prototype,"delSites",null),w([c.b],v.prototype,"insertSite",null),w([c.b],v.prototype,"destroyFolder",null),w([c.b],v.prototype,"manualDestroyFolder",null),w([c.b],v.prototype,"finishingSites",null),w([c.b],v.prototype,"reSort",void 0),w([c.b],v.prototype,"addSite",null),w([c.b],v.prototype,"changeFolderName",null),w([c.b],v.prototype,"setWeatherIcon",null),w([c.b],v.prototype,"submitSite",null),w([c.b],v.prototype,"setRedirectVersion",null),w([c.b],v.prototype,"userRedirect",null);const O=new v;O.initSyncStore(f.i,["sites","redirectVersion"],{sites:Object(g.g)(h.C.lang)}),O.initAutoBackup("site",["sites"]),Object(c.h)(()=>[u.b.setting.layout.col,u.b.setting.layout.row].join(","),()=>{O.firstSync&&setTimeout(()=>{Object(u.a)(!1)},0)},{delay:0});const j=()=>{requestIdleCallback(()=>{O.firstSync?(O.sites.forEach((e,t)=>{e&&0!==e.length||Object(c.i)(()=>{O.sites.splice(t,1)})}),O.sites.forEach((e,t)=>{e.forEach((e,i)=>{e||Object(c.i)(()=>{O.sites[t].splice(i,1)})})})):j()})};setTimeout(()=>{j()},60),Object(c.c)(()=>{if(y.weatherStore.firstSync){const e=Object(y.getCurrentWeather)();O.setWeatherIcon(O.sites,e)}},{delay:20}),Object(c.c)(()=>{O.firstSync&&requestIdleCallback(()=>{O.getRedirectTargets()})},{delay:20}),u.b.changeLayout(O.reSort)},577:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i(475),s=i.n(n),a=i(99),o=i.n(a),c=(i(11),i(13),i(41),i(8),i(4)),r=i(262),l=i(192),d=i(15),u=i(23),p=i(0),h=i(467),g=i(9),b=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o};const y=p.C.isZh?l.a:l.b;class m extends r.a{constructor(){super(...arguments),this.list=[],this.defaultSearch=l.f,this.listHash="",this.version="",this.lang="",this.ignoreSuggest=!1,this.searchEngine={custom:[],addList:[],current:y,all:[]},this.convertBackupEquals=e=>{var t,i;let n=null===(t=null==e?void 0:e.searchEngine)||void 0===t?void 0:t.all,s=null===(i=null==e?void 0:e.searchEngine)||void 0===i?void 0:i.current;if(n&&(n=e.searchEngine.all.map(e=>e.uuid)),s&&(s=e.searchEngine.current.uuid),n||s){const t=Object.assign(Object.assign({},e.searchEngine),{all:n,current:s});return Object.assign(Object.assign({},e),{searchEngine:t})}return e},this.mergeAddArray=(e=[],t=[])=>{const i="uuid";if(!e||0===e.length)return{result:t||[],isLocalEffective:!1};const n=t.filter(e=>!!e),a=e=>{if("object"==typeof e){var t;const i=s()(t=Object.keys(e).filter(e=>"uuid"!==e&&"updatetime"!==e)).call(t);return o()(i).call(i,(t,i)=>t+e[i],"")}},c=(e=>{const t=Object.create(null);return e.forEach(e=>{const i=a(e);t[i]=!0}),t})(t),r=Object.create(null);t.forEach((e,t)=>{if(e[i]){const n=e[i];r[n]=t}});let l=!1;return e.filter(e=>0!==e.updatetime).forEach(e=>{const t=a(e);if(c[t])return;const s=e[i],o=r[s];if(void 0!==o){(n[o].updatetime||0)<(e.updatetime||0)&&(n[o]=e,l=!0)}else l=!0,n.push(e)}),{result:n.filter(e=>!!e),isLocalEffective:l}}}get allItems(){return[this.defaultSearch,...this.searchEngine.all]}get baiduSearch(){const e=this.list.find(e=>e.uuid===l.a.uuid);return e?e.types[0].url:""}diffRemote(e){var t,i;const n=e.searchEngine||{};if(JSON.stringify(n.addList||{})!==JSON.stringify(this.searchEngine.addList))return!0;if(JSON.stringify(n.custom||{})!==JSON.stringify(this.searchEngine.custom))return!0;if((null===(t=n.current)||void 0===t?void 0:t.uuid)!==this.searchEngine.current.uuid)return!0;if((null===(i=n.all)||void 0===i?void 0:i.length)!==this.searchEngine.all.length)return!0;return this.searchEngine.all.some((e,t)=>{var i,s;return(null===(s=null===(i=n.all)||void 0===i?void 0:i[t])||void 0===s?void 0:s.uuid)!==e.uuid})}mergeRemote(e,t){if(e.searchEngine)if(t)this.searchEngine=this.transformSearchI18n(e.searchEngine);else{const t=this.searchEngine.custom,i=e.searchEngine.custom,{result:n}=d.a.mergeArray(t,i,"uuid"),s=this.searchEngine.addList,a=e.searchEngine.addList,{result:o}=this.mergeAddArray(s,a),c=this.searchEngine.all,r=e.searchEngine.all,{result:l}=d.a.mergeArray(c,r,"uuid");this.searchEngine=this.transformSearchI18n({custom:n,addList:o,current:e.searchEngine.current,all:l})}}transformSearchI18n(e){const t=Object.create(null);this.list.forEach(e=>{t[e.uuid]=e});const i=e=>t[e.uuid]?Object.assign(Object.assign({},e),t[e.uuid]):e;return{custom:e.custom,addList:e.addList,current:i(e.current),all:e.all.map(e=>i(e))}}setActive(e){this.searchEngine.current=this.allItems[e]}closeSuggestTips(){this.ignoreSuggest=!0}delShortcut(e){const t=this.searchEngine.all.findIndex(t=>t.uuid===e);t>-1&&this.searchEngine.all.splice(t,1)}updateShortcut(e){if(e){this.searchEngine.all.some((t,i)=>t.uuid===e.uuid&&(this.searchEngine.all[i]=e,!0))||this.searchEngine.all.push(e);const t=this.searchEngine.current.uuid;e.uuid===t&&(this.searchEngine.current=e)}}createEngine(e,t=null){if(null===t){const t=d.a.randomId("custom-search-"),i=Object.assign(Object.assign({},e),{uuid:t});return this.searchEngine.custom.push(i),i}return this.searchEngine.custom[t]=Object.assign(Object.assign({},this.searchEngine.custom[t]),e),this.searchEngine.custom[t]}delEngine(e){const{uuid:t}=this.searchEngine.custom[e];return t!==this.searchEngine.current.uuid&&(this.delShortcut(t),this.searchEngine.custom.splice(e,1),!0)}createEngineAdd(e,t=null){if(null===t){const t=d.a.randomId("add-search-"),i=Object.assign(Object.assign({},e),{uuid:t});return this.searchEngine.addList.push(Object.assign(Object.assign({},e),{uuid:t})),i}return this.searchEngine.addList[t]=Object.assign(Object.assign({},this.searchEngine.addList[t]),e),this.searchEngine.addList[t]}delEngineAdd(e){return this.searchEngine.addList.splice(e,1),!0}async getEnginesList(){let e=this.version;this.lang!==p.C.lang&&(e="");const{data:t,error:i}=await u.d.getEnginesList(e);if(!i&&(Object(c.i)(()=>{var e;this.version=null===(e=t.meta)||void 0===e?void 0:e.version,this.lang=p.C.lang}),t.hash!==this.listHash))if(h.userStore.isLogin)this.updateEngines({list:t.list,listHash:t.hash});else{this.stopAutoBackupReaction();try{this.updateEngines({list:t.list,listHash:t.hash})}catch(i){}this.restartAutoBackupReaction()}}updateEngines({list:e,listHash:t}){this.list=e,this.listHash=t;const i={};e.forEach(e=>{i[e.uuid]=e});const n=this.searchEngine.current.uuid;i[n]&&(this.searchEngine.current=i[n]);const s=this.defaultSearch.uuid;i[s]&&(this.defaultSearch=i[s]);const a=[];this.searchEngine.all.forEach(e=>{const t=e.uuid;i[t]?0===e.updatetime?a.push(Object.assign(Object.assign({},i[t]),{updatetime:0})):a.push(Object.assign({},i[t])):a.push(e)}),this.searchEngine.all=a}sortShortcut(e,t){if(e===t)return;const i=[...this.searchEngine.all],n=i.findIndex(t=>t.uuid===e);if(-1!==n){if("all"===t){const[e]=i.splice(n,1);i.push(e)}else{const e=i.findIndex(e=>e.uuid===t);if(-1===e)return;const[s]=i.splice(n,1);i.splice(e,0,s)}this.searchEngine.all=i}}}b([c.g],m.prototype,"list",void 0),b([c.g],m.prototype,"defaultSearch",void 0),b([c.g],m.prototype,"listHash",void 0),b([c.g],m.prototype,"version",void 0),b([c.g],m.prototype,"lang",void 0),b([c.g],m.prototype,"ignoreSuggest",void 0),b([c.g],m.prototype,"searchEngine",void 0),b([c.e],m.prototype,"allItems",null),b([c.e],m.prototype,"baiduSearch",null),b([c.b],m.prototype,"mergeRemote",null),b([c.b],m.prototype,"setActive",null),b([c.b],m.prototype,"closeSuggestTips",null),b([c.b],m.prototype,"delShortcut",null),b([c.b],m.prototype,"updateShortcut",null),b([c.b],m.prototype,"createEngine",null),b([c.b],m.prototype,"delEngine",null),b([c.b],m.prototype,"createEngineAdd",null),b([c.b],m.prototype,"delEngineAdd",null),b([c.b],m.prototype,"getEnginesList",null),b([c.b],m.prototype,"updateEngines",null),b([c.b],m.prototype,"sortShortcut",null);const f=new m;f.initSyncStore(g.g,["searchEngine","list","listHash","ignoreSuggest","version","lang"],{list:l.h,searchEngine:{custom:[],addList:[],current:y,all:[Object.assign(Object.assign({},y),{updatetime:0}),Object.assign(Object.assign({},l.c),{updatetime:0})]}}),f.initAutoBackup("searcher",["searchEngine"]),Object(c.c)(()=>{f.firstSync&&f.getEnginesList()})},578:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));i(11),i(13),i(41),i(8);var n=i(4),s=i(395),a=i.n(s),o=i(262),c=i(23),r=i(15),l=i(9),d=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o};const u=[{title:"",content:"",time:+new Date,id:"note-default-1ehj4oc7ubn8bgu9zb2spjip0vj",updatetime:0,fontSize:14}];class p extends o.a{constructor(){super(...arguments),this.linkModal=!1,this.list=u,this.checkedId=this.list[0].id,this.boldActive=!1}toogleLinkModal(){this.linkModal=!this.linkModal}setBoldActive(e){this.boldActive=e}get isEmpty(){return 0===this.list.length}get checkedNote(){return this.checkedId?this.list.filter(e=>e.id===this.checkedId)[0]:this.list[0]}get noteList(){const e=[],t=[];return this.list.forEach(i=>{i.sticky?e.push(i):t.push(i)}),e.concat(t)}diffRemote(e){const t=e=>{if(null==e?void 0:e.updatetime){const t={updatetime:void 0};return Object.assign(Object.assign({},e),t)}},i=a()(e.list||[],t),s=a()(Object(n.j)(this.list),t);return!n.d.structural(i,s)}mergeRemote(e,t){if(e.list)if(t)this.list=e.list,this.checkedId=e.checkedId;else{const t=this.list,i=e.list;this.checkedId=e.checkedId;const{result:n}=r.a.mergeArray(t,i);this.list=n}}async add({title:e="",content:t=""}){const i=r.a.randomId("note-"),s=await r.a.getTimestamp(),a={title:e,content:t,time:+new Date,id:i,updatetime:s,fontSize:14};Object(n.i)(()=>{this.list=[a,...this.list],this.checkedId=i})}delete(e){this.list=this.list.filter(t=>t.id!==e),e!==this.checkedId||this.isEmpty||(this.checkedId=this.list[0].id)}setTop(e){const t=this.list.findIndex(t=>t.id===e);if(-1!==t){const[e]=this.list.splice(t,1);e.sticky=!0,this.list.unshift(e)}}cancelSetTop(e){const t=this.list.findIndex(t=>t.id===e);if(-1!==t){const[e]=this.list.splice(t,1);e.sticky=!1,this.list.unshift(e)}}updateId(e){this.checkedId=e}async updateNote(e){const t=await r.a.getTimestamp();Object(n.i)(()=>{var i;(null===(i=this.list)||void 0===i?void 0:i.length)&&(this.list=this.list.map(i=>i.id===e.id?Object.assign(Object.assign(Object.assign({},i),e),{updatetime:t}):Object.assign({},i)))})}async upload(e,t){var i,n;const{data:s,error:a}=await c.f.uploadFile(e,t+".png","infinity-notes-img");if(a){return{error:(null===(n=null===(i=a.response)||void 0===i?void 0:i.data)||void 0===n?void 0:n.error)?a.response.data.error:a.message,data:""}}return{data:s,error:""}}}d([n.g],p.prototype,"linkModal",void 0),d([n.b],p.prototype,"toogleLinkModal",null),d([n.g],p.prototype,"list",void 0),d([n.g],p.prototype,"checkedId",void 0),d([n.g],p.prototype,"boldActive",void 0),d([n.b],p.prototype,"setBoldActive",null),d([n.e],p.prototype,"isEmpty",null),d([n.e],p.prototype,"checkedNote",null),d([n.e],p.prototype,"noteList",null),d([n.b],p.prototype,"mergeRemote",null),d([n.b],p.prototype,"add",null),d([n.b],p.prototype,"delete",null),d([n.b],p.prototype,"setTop",null),d([n.b],p.prototype,"cancelSetTop",null),d([n.b],p.prototype,"updateId",null),d([n.b],p.prototype,"updateNote",null),d([n.b],p.prototype,"upload",null);const h=new p;h.initSyncStore(l.d,["list","checkedId"],{}),h.initAutoBackup("note",["list","checkedId"])},588:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));i(11),i(13);var n=i(9),s=i(4),a=i(262),o=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o};class c extends a.a{constructor(){super(...arguments),this.onlyOneItem=!1,this.ready=!1}initStore(){return this.initSyncStore(n.m,["onlyOneItem","ready","nextId","nextRawURL","nextURL","nextItem"])}setOnlyOneItem(e){this.onlyOneItem=e}setReady(e){this.ready=e}setNextId(e){this.nextId=e}setNextRawURL(e){this.nextRawURL=e}setNextURL(e){this.nextURL=e}setNextItem(e){this.nextItem=e}clearNextData(){this.nextURL=void 0,this.nextRawURL=void 0,this.nextId=void 0,this.nextItem=null}}o([s.g],c.prototype,"onlyOneItem",void 0),o([s.g],c.prototype,"ready",void 0),o([s.g],c.prototype,"nextId",void 0),o([s.g],c.prototype,"nextRawURL",void 0),o([s.g],c.prototype,"nextURL",void 0),o([s.g],c.prototype,"nextItem",void 0),o([s.b],c.prototype,"setOnlyOneItem",null),o([s.b],c.prototype,"setReady",null),o([s.b],c.prototype,"setNextId",null),o([s.b],c.prototype,"setNextRawURL",null),o([s.b],c.prototype,"setNextURL",null),o([s.b],c.prototype,"setNextItem",null),o([s.b],c.prototype,"clearNextData",null);const r=new c}}]);